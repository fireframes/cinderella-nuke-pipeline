#! C:/Program Files/Nuke14.0v1/nuke-14.0.1.dll -nx
version 14.0 v1
define_window_layout_xml {<?xml version="1.0" encoding="UTF-8"?>
<layout version="1.0">
    <window x="-1" y="-6" w="1920" h="1018" maximized="1" screen="0">
        <splitter orientation="1">
            <split size="40"/>
            <dock id="" hideTitles="1" activePageId="Toolbar.1">
                <page id="Toolbar.1"/>
            </dock>
            <split size="1231" stretch="1"/>
            <splitter orientation="2">
                <split size="531"/>
                <dock id="" activePageId="Viewer.1">
                    <page id="Viewer.1"/>
                </dock>
                <split size="445"/>
                <dock id="" activePageId="DAG.1" focus="true">
                    <page id="DAG.1"/>
                    <page id="Curve Editor.1"/>
                    <page id="DopeSheet.1"/>
                </dock>
            </splitter>
            <split size="641"/>
            <dock id="" activePageId="Properties.1">
                <page id="Properties.1"/>
                <page id="uk.co.thefoundry.backgroundrenderview.1"/>
                <page id="Scenegraph.1"/>
                <page id="com.fireframes.shotmanager"/>
            </dock>
        </splitter>
    </window>
</layout>
}
Root {
 inputs 0
 name C:/Users/admin/Documents/TEMPLATE_v002.nk
 format "2048 1556 0 0 2048 1556 1 2K_Super_35(full-ap)"
 proxy_type scale
 proxy_format "1024 778 0 0 1024 778 1 1K_Super_35(full-ap)"
 colorManagement OCIO
 OCIO_config aces_1.2
 defaultViewerLUT "OCIO LUTs"
 workingSpaceLUT scene_linear
 monitorLut "sRGB (ACES)"
 monitorOutLUT "sRGB (ACES)"
 int8Lut matte_paint
 int16Lut texture_paint
 logLut compositing_log
 floatLut scene_linear
 addUserKnob {20 Deadline}
 addUserKnob {1 FrameListMode l frameListMode}
 addUserKnob {1 CustomFrameList l customFrameList}
 addUserKnob {1 Department l department}
 addUserKnob {1 Pool l pool}
 addUserKnob {1 SecondaryPool l secondaryPool}
 addUserKnob {1 Group l group}
 addUserKnob {1 Priority l priority}
 addUserKnob {1 MachineLimit l machineLimit}
 addUserKnob {1 IsBlacklist l isBlacklist}
 addUserKnob {1 MachineList l machineList}
 addUserKnob {1 LimitGroups l limitGroups}
 addUserKnob {1 SubmitSuspended l submitSuspended}
 addUserKnob {1 ChunkSize l chunkSize}
 addUserKnob {1 ConcurrentTasks l concurrentTasks}
 addUserKnob {1 LimitConcurrentTasks l limitConcurrentTasks}
 addUserKnob {1 Threads l threads}
 addUserKnob {1 SubmitScene l submitScene}
 addUserKnob {1 BatchMode l batchMode}
 addUserKnob {1 ContinueOnError l continueOnError}
 addUserKnob {1 SeparateJobs l separateJobs}
 addUserKnob {1 UseNodeRange l useNodeRange}
 addUserKnob {1 UseGpu l useGpu}
 addUserKnob {1 UseSpecificGpu l useSpecificGpu}
 addUserKnob {1 ChooseGpu l chooseGpu}
 addUserKnob {1 EnforceRenderOrder l enforceRenderOrder}
 addUserKnob {1 DeadlineRenderMode l deadlineRenderMode}
 addUserKnob {1 PerformanceProfiler l performanceProfiler}
 addUserKnob {1 ReloadPlugin l reloadPlugin}
 addUserKnob {1 PerformanceProfilerPath l performanceProfilerPath}
}
BackdropNode {
 inputs 0
 name BackdropNode1
 tile_color 0x8e388e00
 label albedo_correction
 note_font_size 42
 xpos -682
 ypos -837
 appearance Border
 bdwidth 978
 bdheight 755
}
BackdropNode {
 inputs 0
 name BackdropNode10
 tile_color 0xff8888ff
 label SOURCES
 note_font_size 100
 xpos 3733
 ypos -7012
 appearance Border
 bdwidth 7640
 bdheight 1617
}
BackdropNode {
 inputs 0
 name BackdropNode11
 tile_color 0x8e00ffff
 label DEFOCUS
 note_font_size 42
 xpos -113
 ypos 10362
 appearance Border
 bdwidth 602
 bdheight 279
}
BackdropNode {
 inputs 0
 name BackdropNode12
 tile_color 0x8e8e3800
 label ALPHA
 note_font_size 42
 xpos -63
 ypos 2569
 appearance Border
 bdwidth 411
 bdheight 253
}
BackdropNode {
 inputs 0
 name BackdropNode13
 tile_color 0xff
 label BLACKS
 note_font_size 42
 xpos -507
 ypos 6699
 appearance Border
 bdwidth 2030
 bdheight 1514
}
BackdropNode {
 inputs 0
 name BackdropNode14
 tile_color 0x388e8e00
 label DEPTH
 note_font_size 42
 xpos -383
 ypos 9443
 appearance Border
 bdwidth 1385
 bdheight 785
}
BackdropNode {
 inputs 0
 name BackdropNode15
 tile_color 0x8e8e3800
 label MattePaint
 note_font_size 42
 xpos 4630
 ypos 559
 appearance Border
 bdwidth 798
 bdheight 427
}
BackdropNode {
 inputs 0
 name BackdropNode16
 tile_color 0x8e388e00
 label "    RAYS"
 note_font_size 42
 xpos 4269
 ypos 13066
 appearance Border
 bdwidth 932
 bdheight 480
}
BackdropNode {
 inputs 0
 name BackdropNode17
 tile_color 0xffc83bff
 label "     OUT"
 note_font_size 40
 note_font_color 0xffffffff
 xpos 4080
 ypos 17280
 appearance Border
 bdwidth 1964
 bdheight 745
}
BackdropNode {
 inputs 0
 name BackdropNode18
 tile_color 0x8e388e00
 label albedo_correction
 note_font_size 42
 xpos 8208
 ypos -710
 appearance Border
 bdwidth 1069
 bdheight 969
}
BackdropNode {
 inputs 0
 name BackdropNode19
 tile_color 0x8e8e3800
 label "MATTE BG\n"
 note_font_size 42
 xpos 8734
 ypos 9533
 appearance Border
 bdwidth 712
 bdheight 392
}
BackdropNode {
 inputs 0
 name BackdropNode2
 tile_color 0x378e55ff
 label specular_correction
 note_font_size 42
 xpos -681
 ypos 73
 appearance Border
 bdwidth 978
 bdheight 755
}
BackdropNode {
 inputs 0
 name BackdropNode20
 tile_color 0x8e00ffff
 label DEFOCUS
 note_font_size 42
 xpos 8777
 ypos 12730
 appearance Border
 bdwidth 602
 bdheight 279
}
BackdropNode {
 inputs 0
 name BackdropNode21
 tile_color 0x8e8e3800
 label ALPHA
 note_font_size 42
 xpos 8827
 ypos 3221
 appearance Border
 bdwidth 431
 bdheight 291
}
BackdropNode {
 inputs 0
 name BackdropNode22
 tile_color 0xff
 label BLACKS
 note_font_size 42
 xpos 8202
 ypos 7311
 appearance Border
 bdwidth 1828
 bdheight 2021
}
BackdropNode {
 inputs 0
 name BackdropNode23
 tile_color 0x388e8e00
 label DEPTH
 note_font_size 42
 xpos 8726
 ypos 11907
 appearance Border
 bdwidth 657
 bdheight 685
}
BackdropNode {
 inputs 0
 name BackdropNode26
 tile_color 0x378e55ff
 label specular_correction
 note_font_size 42
 xpos 8209
 ypos 353
 appearance Border
 bdwidth 978
 bdheight 755
}
BackdropNode {
 inputs 0
 name BackdropNode27
 tile_color 0x8e6637ff
 label reflect_correction
 note_font_size 42
 xpos 8213
 ypos 1198
 appearance Border
 bdwidth 978
 bdheight 755
}
BackdropNode {
 inputs 0
 name BackdropNode28
 tile_color 0x378b8eff
 label refract_correction
 note_font_size 42
 xpos 8222
 ypos 2038
 appearance Border
 bdwidth 976
 bdheight 776
}
BackdropNode {
 inputs 0
 name BackdropNode29
 tile_color 0x8e0000ff
 label "GLOBAL CC"
 note_font_size 42
 xpos 8933
 ypos 3769
 appearance Border
 bdwidth 284
 bdheight 259
}
BackdropNode {
 inputs 0
 name BackdropNode3
 tile_color 0x8e6637ff
 label reflect_correction
 note_font_size 42
 xpos -677
 ypos 929
 appearance Border
 bdwidth 978
 bdheight 755
}
BackdropNode {
 inputs 0
 name BackdropNode30
 tile_color 0x8e00ff
 label "SECONDARY CC"
 note_font_size 42
 xpos 8489
 ypos 4225
 appearance Border
 bdwidth 1489
 bdheight 2795
}
BackdropNode {
 inputs 0
 name BackdropNode31
 tile_color 0xffff00ff
 label "CHAR LIGHT GROUPS"
 note_font_size 92
 xpos 8233
 ypos -4828
 appearance Border
 bdwidth 3189
 bdheight 3860
}
BackdropNode {
 inputs 0
 name BackdropNode32
 tile_color 0xff0071ff
 label GLOW
 note_font_size 42
 xpos 8393
 ypos 10174
 appearance Border
 bdwidth 1129
 bdheight 1453
}
BackdropNode {
 inputs 0
 name BackdropNode35
 tile_color 0x8e8effff
 label FROST
 note_font_size 42
 xpos 2182
 ypos 1492
 appearance Border
 bdwidth 1369
 bdheight 1670
}
BackdropNode {
 inputs 0
 name BackdropNode38
 tile_color 0xff8888ff
 label "       matte"
 note_font_size 42
 xpos 9341
 ypos -6669
 appearance Border
 bdwidth 699
 bdheight 609
}
BackdropNode {
 inputs 0
 name BackdropNode4
 tile_color 0x378b8eff
 label refract_correction
 note_font_size 42
 xpos -668
 ypos 1729
 appearance Border
 bdwidth 976
 bdheight 776
}
BackdropNode {
 inputs 0
 name BackdropNode43
 tile_color 0x8888ffff
 label "edge blur\n(in case rough edges)"
 note_font_size 32
 xpos -74
 ypos 10748
 appearance Border
 bdwidth 541
 bdheight 631
}
BackdropNode {
 inputs 0
 name BackdropNode47
 tile_color 0x8888ffff
 label "edge blur\n(in case rough edges)"
 note_font_size 32
 xpos 8816
 ypos 13186
 appearance Border
 bdwidth 541
 bdheight 631
}
BackdropNode {
 inputs 0
 name BackdropNode48
 tile_color 0xff1f8eff
 label "    additional cc"
 note_font_size 42
 xpos 4549
 ypos 15410
 appearance Border
 bdwidth 794
 bdheight 647
}
BackdropNode {
 inputs 0
 name BackdropNode49
 tile_color 0x7171c600
 label "    post effects"
 note_font_size 42
 xpos 4501
 ypos 16297
 appearance Border
 bdwidth 788
 bdheight 555
}
BackdropNode {
 inputs 0
 name BackdropNode5
 tile_color 0x8e0000ff
 label "GLOBAL CC"
 note_font_size 42
 xpos 43
 ypos 3105
 appearance Border
 bdwidth 296
 bdheight 260
}
BackdropNode {
 inputs 0
 name BackdropNode6
 tile_color 0x8e00ff
 label "SECONDARY CC"
 note_font_size 42
 xpos -401
 ypos 3461
 appearance Border
 bdwidth 1338
 bdheight 3103
}
BackdropNode {
 inputs 0
 name BackdropNode7
 tile_color 0xffff00ff
 label "BG LIGHT GROUPS"
 note_font_size 92
 xpos -681
 ypos -4771
 appearance Border
 bdwidth 2638
 bdheight 3688
}
BackdropNode {
 inputs 0
 name BackdropNode8
 tile_color 0xff0071ff
 label GLOW
 note_font_size 42
 xpos -349
 ypos 8280
 appearance Border
 bdwidth 962
 bdheight 1056
}
BackdropNode {
 inputs 0
 name BackdropNode9
 tile_color 0x55ff55ff
 label "         BG"
 note_font_size 42
 xpos 4338
 ypos -6717
 appearance Border
 bdwidth 1978
 bdheight 1092
}
BackdropNode {
 inputs 0
 name attention
 tile_color 0xff0000ff
 label "Don't forget to pick a proper value in the Constant node for the depth where the alpha is zero"
 note_font_size 14
 xpos 244
 ypos 9502
 bdwidth 709
 bdheight 71
}
BackdropNode {
 inputs 0
 name BackdropNode24
 tile_color 0xaaaaaa00
 label "       CHAR"
 note_font_size 42
 xpos 6433
 ypos -6718
 appearance Border
 bdwidth 2028
 bdheight 1093
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode25
 tile_color 0x71c67100
 label "                bg+char"
 note_font_size 42
 xpos 8581
 ypos -6672
 appearance Border
 bdwidth 717
 bdheight 1023
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode33
 tile_color 0x8e388e00
 label "                   FROST\n"
 note_font_size 42
 xpos 10174
 ypos -6668
 appearance Border
 bdwidth 647
 bdheight 377
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode34
 tile_color 0x8e8e3800
 note_font_size 42
 xpos 3888
 ypos -6670
 appearance Border
 bdwidth 294
 bdheight 339
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode36
 tile_color 0x7cff7cff
 label "       exr"
 note_font_size 42
 xpos 4375
 ypos -6648
 bdwidth 270
 bdheight 254
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode37
 tile_color 0xaaaaaaff
 label "       exr"
 note_font_size 42
 xpos 6464
 ypos -6638
 bdwidth 270
 bdheight 253
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode39
 tile_color 0xe59595ff
 label "       exr"
 note_font_size 42
 xpos 9390
 ypos -6543
 bdwidth 254
 bdheight 210
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode40
 tile_color 0xaaaaffff
 label "       colorscript"
 note_font_size 42
 xpos 10914
 ypos -6680
 appearance Border
 bdwidth 430
 bdheight 505
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode41
 tile_color 0xf07100ff
 label "       key"
 note_font_size 42
 xpos 61
 ypos -4391
 appearance Border
 bdwidth 268
 bdheight 226
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode42
 tile_color 0x71f7ff
 label "        fill"
 note_font_size 42
 xpos 939
 ypos -4391
 appearance Border
 bdwidth 268
 bdheight 226
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode44
 tile_color 0xf07100ff
 label "       key"
 note_font_size 42
 xpos 8950
 ypos -4209
 appearance Border
 bdwidth 268
 bdheight 226
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode45
 tile_color 0x71f7ff
 label "        fill"
 note_font_size 42
 xpos 9901
 ypos -4218
 appearance Border
 bdwidth 268
 bdheight 226
 z_order 1
}
BackdropNode {
 inputs 0
 name BackdropNode46
 tile_color 0xb5a8afff
 label "        rim"
 note_font_size 42
 xpos 10796
 ypos -4213
 appearance Border
 bdwidth 294
 bdheight 245
 z_order 1
}
NoOp {
 inputs 0
 name NoOp1
 xpos 4461
 ypos -6505
}
Dot {
 name Dot83
 xpos 4495
 ypos -6354
}
set N8a669000 [stack 0]
Dot {
 name Dot56
 xpos 4495
 ypos -6276
}
set N8a668c00 [stack 0]
Dot {
 name Dot10
 xpos 4495
 ypos -6207
}
set N8a668800 [stack 0]
Dot {
 name Dot41
 xpos 4751
 ypos -6207
}
set N8a668400 [stack 0]
Dot {
 name Dot18
 xpos 4984
 ypos -6207
}
set N8a668000 [stack 0]
Dot {
 name Dot14
 xpos 5229
 ypos -6207
}
set N587efc00 [stack 0]
add_layer {bumpNormals bumpNormals.X bumpNormals.Y bumpNormals.Z}
add_layer {N N.X N.Y N.Z}
Shuffle2 {
 fromInput1 {{0} B}
 in1 bumpNormals
 out1 N
 fromInput2 {{0} B}
 mappings "3 bumpNormals.X 0 0 N.X 0 0 bumpNormals.Y 0 1 N.Y 0 1 bumpNormals.Z 0 2 N.Z 0 2"
 name Shuffle3
 label "\[ value in1 ]"
 xpos 5195
 ypos -6107
}
Remove {
 operation keep
 channels N
 name Remove2
 xpos 5195
 ypos -6056
}
Dot {
 name _bg_normals
 label "\[value name]"
 note_font_size 33
 xpos 5229
 ypos -5912
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
PxF_ZDefocus {
 inputs 0
 name PxF_ZDefocus
 xpos -6091
 ypos 35
}
push $N587efc00
Dot {
 name Dot19
 xpos 5490
 ypos -6207
}
set N4be3bc00 [stack 0]
Cryptomatte {
 pickerAdd {0 0 0 0 0 0 0 0}
 lastSelectedCryptoLayerName crypto_asset
 name Cryptomatte1
 xpos 5456
 ypos -6125
}
Dot {
 name _bg_crypto
 label "\[value name]"
 note_font_size 33
 xpos 5490
 ypos -5985
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N6ce9bc00 [stack 0]
Dot {
 name Dot13
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos 4347
 ypos 13244
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 cryptoLayerChoice {{2} crypto_asset crypto_shape crypto_node crypto_mesh}
 pickerAdd {0.002225135919 0.003829963505 0.00472911587 0 524 613 525 614}
 matteList window_kitchen_buildings_main_grp/window_kitchen_buildings_main_geo/window_kitchen_buildings_main_geoProxy
 lastSelectedCryptoLayerName crypto_node
 name Cryptomatte12
 xpos 4313
 ypos 13282
}
NoOp {
 inputs 0
 name NoOp2
 xpos 6560
 ypos -6507
}
Dot {
 name Dot91
 xpos 6594
 ypos -6316
}
set N85a86400 [stack 0]
Dot {
 name Dot92
 xpos 6594
 ypos -6170
}
set N85a86000 [stack 0]
Dot {
 name Dot93
 xpos 6850
 ypos -6170
}
set N857d1c00 [stack 0]
Dot {
 name Dot94
 xpos 7083
 ypos -6170
}
set N857d1800 [stack 0]
Dot {
 name Dot95
 xpos 7328
 ypos -6170
}
set N857d1400 [stack 0]
Shuffle2 {
 fromInput1 {{0} B}
 in1 bumpNormals
 out1 N
 fromInput2 {{0} B}
 mappings "3 bumpNormals.X 0 0 N.X 0 0 bumpNormals.Y 0 1 N.Y 0 1 bumpNormals.Z 0 2 N.Z 0 2"
 name Shuffle22
 label "\[ value in1 ]"
 xpos 7294
 ypos -6070
}
Remove {
 operation keep
 channels N
 name Remove11
 xpos 7294
 ypos -6019
}
Dot {
 name _char_normals
 label "\[value name]"
 note_font_size 33
 xpos 7328
 ypos -5875
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
push $N857d1400
Dot {
 name Dot96
 xpos 7589
 ypos -6170
}
set N857d1000 [stack 0]
Cryptomatte {
 pickerAdd {0 0 0 0 0 0 0 0}
 lastSelectedCryptoLayerName crypto_asset
 name Cryptomatte33
 xpos 7555
 ypos -6088
}
Dot {
 name _char_crypto
 label "\[value name]"
 note_font_size 33
 xpos 7589
 ypos -5948
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N507e2800 [stack 0]
Dot {
 name Dot108
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8361
 ypos 2329
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 cryptoLayerChoice {{1} crypto_asset crypto_shape crypto_node crypto_mesh}
 pickerAdd {0.05553328618 0.07873702049 0.2400142252 0 1492 578 1493 579}
 matteList "m:/local_asset_repository/cinderella/buildings/window_attic/main/window_attic_buildings_main_geo.abc//window_attic_buildings_main__glass_left_geo/window_attic_buildings_main__glass_left_geoShape\nm:/local_asset_repository/cinderella/buildings/window_attic/main/window_attic_buildings_main_geo.abc//window_attic_buildings_main__glass_right_geo/window_attic_buildings_main__glass_right_geoShape"
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte36
 xpos 8327
 ypos 2389
}
PxF_ZDefocus {
 inputs 0
 name PxF_ZDefocus5
 xpos 31416
 ypos -3392
}
Constant {
 inputs 0
 channels rgb
 color {0.4673614502 0.4668614566 0.662361443 0.7827928066}
 name Constant4
 xpos 8871
 ypos 12128
}
Read {
 inputs 0
 file_type mov
 file O:/cinderella/tools/compositing/elements/Arctic_Frost_09.mp4
 format "4096 2160 0 0 4096 2160 1 4K_DCP"
 last 721
 origlast 721
 origset true
 colorspace color_picking
 in_colorspace scene_linear
 out_colorspace scene_linear
 name Read8
 xpos 10210
 ypos -6579
 disable true
}
Reformat {
 type scale
 scale 0.5
 name Reformat1
 xpos 10210
 ypos -6483
 disable true
}
Dot {
 name frost_1
 label "\[value name]"
 note_font_size 33
 xpos 10244
 ypos -6383
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Read {
 inputs 0
 file_type mov
 file O:/cinderella/tools/compositing/elements/Arctic_Frost_10.mp4
 format "4096 2160 0 0 4096 2160 1 4K_DCP"
 last 721
 origlast 721
 origset true
 colorspace color_picking
 in_colorspace scene_linear
 out_colorspace scene_linear
 name Read10
 xpos 10508
 ypos -6588
 disable true
}
Transform {
 scale 1.5
 center {2048 1080}
 name Transform1
 xpos 10508
 ypos -6492
 disable true
}
Reformat {
 type scale
 scale 0.5
 name Reformat3
 xpos 10508
 ypos -6462
 disable true
}
Dot {
 name frost_3
 label "\[value name]"
 note_font_size 33
 xpos 10542
 ypos -6377
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Read {
 inputs 0
 file_type mov
 file O:/cinderella/tools/compositing/elements/Arctic_Frost_07.mp4
 format "4096 2160 0 0 4096 2160 1 4K_DCP"
 last 721
 origlast 721
 origset true
 colorspace color_picking
 in_colorspace scene_linear
 out_colorspace scene_linear
 name Read11
 xpos 10659
 ypos -6589
 disable true
}
Reformat {
 type scale
 scale 0.5
 name Reformat4
 xpos 10659
 ypos -6493
 disable true
}
Dot {
 name frost_4
 label "\[value name]"
 note_font_size 33
 xpos 10693
 ypos -6378
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
push $N8a668c00
LayerContactSheet {
 showLayerNames true
 name LayerContactSheet4
 xpos 4898
 ypos -6279
}
Dot {
 name _bg_contactsheet
 label "\[value name]"
 note_font_size 33
 xpos 5186
 ypos -6276
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
push $N85a86400
LayerContactSheet {
 showLayerNames true
 name LayerContactSheet1
 xpos 6997
 ypos -6319
}
Dot {
 name _char_contactsheet
 label "\[value name]"
 note_font_size 33
 xpos 7527
 ypos -6316
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
push $N8a669000
ViewMetaData {
 name ViewMetaData1
 xpos 4735
 ypos -6357
}
Roto {
 inputs 0
 output alpha
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44800000 x43d68000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Ellipse1 512 bezier
     {{cc
       {f 8192}
       {px 1
        {xc40b689a 0}
        {x447f8003 xc0000000}
        {x440b6896 0}
        {0 xc36fb10b}
        {x44fdf5f7 x43d80000}
        {0 x436fb10c}
        {x440b6896 0}
        {x447f8003 x44588002}
        {xc40b689a 0}
        {0 x436fb10c}
        {x414505c8 x43d80000}
        {0 xc36fb10b}}}     idem}
     {tx 1 x447f8000 x43d80000}
     {a osw x41200000 osf 0 str 1 spx x44800000 spy x43d68000 sb 1 tt x40e00000}}}}}}
 toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 tt 7 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 429}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_shutter_offset_type centred
 source_black_outside true
 name Roto2
 xpos 5100
 ypos 15625
}
Blur {
 channels alpha
 size 300
 name Blur7
 label "Size: \[ value size ]"
 xpos 5100
 ypos 15683
}
Dot {
 name Dot210
 xpos 5134
 ypos 15751
}
set Ne55fa000 [stack 0]
Dot {
 name Dot211
 xpos 5134
 ypos 15900
}
push $Ne55fa000
push $N857d1000
Dot {
 name Dot97
 xpos 7823
 ypos -6170
}
set N7bc52000 [stack 0]
add_layer {other other.depth other.unDepth}
Shuffle2 {
 fromInput1 {{0} B}
 in1 other
 out1 depth
 fromInput2 {{0} B}
 mappings "1 other.depth 0 0 depth.Z 0 0"
 name Shuffle28
 label "\[ value in1 ]"
 xpos 7789
 ypos -6108
 disable true
}
Remove {
 operation keep
 channels depth
 name Remove12
 xpos 7789
 ypos -6057
}
Dot {
 name _char_depth
 label "\[value name]"
 note_font_size 33
 xpos 7823
 ypos -5926
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Dot {
 name Dot110
 label _char_depth
 note_font " Italic"
 note_font_size 22
 xpos 8770
 ypos 11987
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot111
 xpos 8770
 ypos 12079
}
set N6f25ec00 [stack 0]
Shuffle2 {
 fromInput1 {{0} B}
 in1 depth
 fromInput2 {{0} B}
 mappings "4 depth.Z 0 0 rgba.red 0 0 depth.Z 0 0 rgba.green 0 1 depth.Z 0 0 rgba.blue 0 2 depth.Z 0 0 rgba.alpha 0 3"
 name Shuffle37
 label "\[ value in1 ]"
 xpos 8736
 ypos 12203
}
Dot {
 name Dot112
 xpos 8770
 ypos 12386
}
Constant {
 inputs 0
 channels rgb
 color {0.7123613954 0.4668614864 0.4173614085 0.7827928066}
 name Constant3
 xpos 8872
 ypos 12261
}
Merge2 {
 inputs 2
 operation mask
 name Merge23
 xpos 8872
 ypos 12383
}
Dot {
 name Dot113
 xpos 8906
 ypos 12470
}
push $N6f25ec00
NoOp {
 inputs 0
 name NoOp3
 xpos 9476
 ypos -6411
}
add_layer {matte_mask matte_mask.red matte_mask.green matte_mask.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 matte_mask
 fromInput2 {{0} B}
 mappings "4 matte_mask.green 0 1 rgba.green 0 1 matte_mask.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.red 0 0 matte_mask.red 0 0 rgba.alpha 0 3"
 name Shuffle42
 xpos 9476
 ypos -6283
}
set Nea117000 [stack 0]
Dot {
 name _char_matte
 label "\[value name]"
 note_font_size 33
 xpos 9510
 ypos -6136
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set Nea116c00 [stack 0]
Dot {
 name Dot89
 label _char_matte
 note_font " Italic"
 note_font_size 22
 xpos 8594
 ypos 10350
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot103
 xpos 8594
 ypos 10454
}
set Nea116400 [stack 0]
Dot {
 name Dot117
 xpos 8594
 ypos 10873
}
set Nea116000 [stack 0]
Dot {
 name Dot120
 xpos 8594
 ypos 11320
}
push $Nea116000
push $Nea116400
push $Nea116c00
Dot {
 name Dot84
 label _char_matte
 note_font " Italic"
 note_font_size 22
 xpos 8913
 ypos 9759
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot104
 xpos 8913
 ypos 9825
}
push $N507e2800
Dot {
 name Dot175
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8638
 ypos 8182
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0 0 0 0 0 0 0 0}
 name Cryptomatte13
 xpos 8604
 ypos 8227
}
push $N7bc52000
Dot {
 name Dot98
 xpos 8122
 ypos -6170
}
set N4a7ef000 [stack 0]
add_layer {lighting lighting.red lighting.green lighting.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lighting
 out1 rgb
 fromInput2 {{0} B}
 mappings "3 lighting.green 0 1 rgba.green 0 1 lighting.red 0 0 rgba.red 0 0 lighting.blue 0 2 rgba.blue 0 2"
 name Shuffle30
 label "\[ value in1 ]"
 xpos 8088
 ypos -6118
}
push $N4a7ef000
Dot {
 name Dot99
 xpos 8264
 ypos -6170
}
add_layer {albedo albedo.red albedo.green albedo.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 albedo
 out1 rgb
 fromInput2 {{0} B}
 mappings "3 albedo.red 0 0 rgba.red 0 0 albedo.green 0 1 rgba.green 0 1 albedo.blue 0 2 rgba.blue 0 2"
 name Shuffle31
 label "\[ value in1 ]"
 xpos 8230
 ypos -6109
}
Dot {
 name Dot100
 xpos 8264
 ypos -6027
}
Merge2 {
 inputs 2
 operation divide
 name Merge22
 xpos 8088
 ypos -6030
}
Shuffle2 {
 fromInput1 {{0} B}
 fromInput2 {{0} B}
 mappings "4 rgba.red 0 0 rgba.red 0 0 rgba.red 0 0 rgba.green 0 1 rgba.red 0 0 rgba.blue 0 2 rgba.red 0 0 rgba.alpha 0 3"
 name Shuffle32
 label "\[ value in1 ]"
 xpos 8088
 ypos -6006
}
Remove {
 operation keep
 channels rgba
 name Remove14
 xpos 8088
 ypos -5961
}
Clamp {
 name Clamp7
 xpos 8088
 ypos -5937
}
Invert {
 name Invert3
 xpos 8088
 ypos -5901
}
Grade {
 channels alpha
 blackpoint 0.6
 whitepoint 0.9
 white_clamp true
 name Grade39
 xpos 8088
 ypos -5850
}
Dot {
 name _char_shadows
 label "\[value name]"
 note_font_size 33
 xpos 8122
 ypos -5757
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Dot {
 name Dot118
 label _char_shadows
 note_font " Italic"
 note_font_size 22
 xpos 8822
 ypos 8035
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot119
 xpos 8822
 ypos 8127
}
Dot {
 name Dot122
 xpos 8918
 ypos 8127
}
Grade {
 channels alpha
 blackpoint 0.8
 white_clamp true
 mix 0.5
 name Grade42
 xpos 8884
 ypos 8161
}
ChannelMerge {
 inputs 2
 operation in
 name ChannelMerge5
 xpos 8884
 ypos 8215
}
push $N507e2800
Dot {
 name Dot123
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8361
 ypos -347
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.1285684854 0.0570955351 0.2283821404 0 254 271 255 272}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte38
 xpos 8327
 ypos -279
}
push $N85a86000
Dot {
 name _char_beauty
 label "\[value name]"
 note_font_size 33
 xpos 6594
 ypos -5894
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N684f9c00 [stack 0]
Dot {
 name Dot124
 label _char_beauty
 note_font " Italic"
 note_font_size 22
 xpos 8542
 ypos -609
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 albedo
 fromInput2 {{0} B}
 mappings "4 albedo.red 0 0 rgba.red 0 0 albedo.green 0 1 rgba.green 0 1 albedo.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle43
 label "\[ value in1 ]"
 xpos 8508
 ypos -543
}
Clamp {
 minimum 0.0001
 name Clamp9
 xpos 8508
 ypos -486
}
Dot {
 name Dot125
 xpos 8542
 ypos -425
}
set N684f8c00 [stack 0]
Grade {
 inputs 1+1
 name Grade11
 label "Mix: \[ value mix ]"
 xpos 8508
 ypos -285
}
Dot {
 name _char_albedo
 label "\[value name]"
 note_font_size 33
 xpos 8542
 ypos -132
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N684f8400 [stack 0]
Dot {
 name Dot126
 label _char_albedo
 note_font " Italic"
 note_font_size 22
 xpos 9244
 ypos 8230
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
push $N507e2800
Dot {
 name Dot107
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8681
 ypos 7455
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.09329242259 0.2426786721 0.2207145989 0 924 372 925 373}
 matteList "73850\n51030\n69820"
 lastSelectedCryptoLayerName crypto_mesh
 name pers_skin_all
 xpos 8647
 ypos 7538
}
Dot {
 name Dot144
 xpos 8681
 ypos 7641
}
push $Nea117000
Dot {
 name Dot82
 xpos 9864
 ypos -6280
}
add_layer {occlusion occlusion.red occlusion.green occlusion.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 occlusion
 fromInput2 {{0} B}
 mappings "4 occlusion.green 0 1 rgba.green 0 1 occlusion.blue 0 2 rgba.blue 0 2 occlusion.red 0 0 rgba.red 0 0 occlusion.blue 0 2 rgba.alpha 0 3"
 name Shuffle38
 xpos 9830
 ypos -6203
}
Dot {
 name occlusion
 label "\[value name]"
 note_font_size 33
 xpos 9864
 ypos -6132
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Dot {
 name Dot105
 label occlusion
 note_font " Italic"
 note_font_size 22
 xpos 8815
 ypos 7415
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Grade {
 channels alpha
 blackpoint 0.5
 whitepoint 0.99
 gamma 0.5
 white_clamp true
 name Grade27
 label "Mix: \[ value mix ]"
 xpos 8781
 ypos 7517
}
Blur {
 channels rgba
 size 2
 name Blur6
 label "Size: \[ value size ]"
 xpos 8781
 ypos 7583
}
Merge2 {
 inputs 2
 operation mask
 name Merge27
 label "Mix: \[ value mix ]"
 xpos 8781
 ypos 7632
}
Shuffle2 {
 fromInput1 {{0} B}
 fromInput2 {{0} B}
 mappings "4 rgba.alpha 0 3 rgba.red 0 0 rgba.alpha 0 3 rgba.green 0 1 rgba.alpha 0 3 rgba.blue 0 2 rgba.alpha 0 3 rgba.alpha 0 3"
 name Shuffle40
 label "\[ value in1 ]"
 xpos 8781
 ypos 7668
}
Dot {
 name Dot4
 xpos 8815
 ypos 7721
}
push $N857d1800
add_layer {position position.red position.green position.blue}
add_layer {P P.red P.green P.blue P.alpha P.X P.Y P.Z}
Shuffle2 {
 fromInput1 {{0} B}
 in1 position
 out1 {P.red P.green P.blue P.alpha P.X P.Y P.Z}
 fromInput2 {{0} B}
 mappings "7 position.red 0 0 P.red 0 0 position.green 0 1 P.green 0 1 position.blue 0 2 P.blue 0 2 black -1 -1 P.alpha 0 3 black -1 -1 P.X 0 4 black -1 -1 P.Y 0 5 black -1 -1 P.Z 0 6"
 name Shuffle33
 label "\[ value in1 ]"
 xpos 7049
 ypos -6068
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 bumpNormals
 out1 N
 fromInput2 {{0} B}
 mappings "3 bumpNormals.X 0 0 N.X 0 0 bumpNormals.Y 0 1 N.Y 0 1 bumpNormals.Z 0 2 N.Z 0 2"
 name Shuffle34
 label "\[ value in1 ]"
 xpos 7049
 ypos -6032
}
Remove {
 operation keep
 channels P
 channels2 N
 name Remove15
 xpos 7049
 ypos -5995
}
Dot {
 name _char_position
 label "\[value name]"
 note_font_size 33
 xpos 7083
 ypos -5868
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N5407a800 [stack 0]
Dot {
 name Dot127
 label _char_position
 note_font " Italic"
 note_font_size 22
 xpos 8817
 ypos 5875
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
xyzKey_v01 {
 name xyzKey_v01_8
 xpos 8783
 ypos 5961
 in_1 P
 color {-8.888613701 10.42199898 35.33896255}
 uniform_scale 0.215
 rot_sk 1
 rotate {0 10 0}
 vec x
 ramp 0.1
 sm 0
 lut {master {}
   red {}
   green {}
   blue {}
   alpha {curve C k 0 s0 L 1 s0}}
 n_k true
 in N
 sm_norm 0
 lut_1 {master {}
   red {}
   green {}
   blue {}
   alpha {curve L 0 1}}
}
push $N507e2800
Dot {
 name Dot128
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8677
 ypos 4510
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.08806169033 0.1589870453 0.1359481812 0 891 365 892 366}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte39
 xpos 8643
 ypos 4558
}
push $N857d1c00
Shuffle2 {
 fromInput1 {{0} B}
 in1 alpha
 out1 alpha
 fromInput2 {{0} B}
 mappings "1 rgba.alpha 0 0 rgba.alpha 0 0"
 name Shuffle29
 label "\[ value in1 ]"
 xpos 6816
 ypos -6052
}
Remove {
 operation keep
 channels alpha
 name Remove13
 xpos 6816
 ypos -6016
}
Dot {
 name _char_alpha
 label "\[value name]"
 note_font_size 33
 xpos 6850
 ypos -5863
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Dot {
 name Dot129
 label _char_alpha
 note_font " Italic"
 note_font_size 22
 xpos 8874
 ypos 3309
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot130
 xpos 8874
 ypos 3388
}
push $N684f9c00
Dot {
 name Dot131
 label _char_beauty
 note_font " Italic"
 note_font_size 22
 xpos 8533
 ypos 2105
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
add_layer {refract refract.red refract.green refract.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 refract
 fromInput2 {{0} B}
 mappings "4 refract.red 0 0 rgba.red 0 0 refract.green 0 1 rgba.green 0 1 refract.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle45
 label "\[ value in1 ]"
 xpos 8499
 ypos 2145
}
Clamp {
 minimum 0.0001
 name Clamp10
 xpos 8499
 ypos 2208
}
Dot {
 name Dot132
 xpos 8533
 ypos 2296
}
set N6b68cc00 [stack 0]
Multiply {
 channels rgb
 name Multiply5
 label "Value: \[ value value ]"
 xpos 8499
 ypos 2474
}
Dot {
 name Dot133
 xpos 8531
 ypos 2737
}
push $N6b68cc00
push $N507e2800
Dot {
 name Dot134
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8351
 ypos 1608
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 cryptoLayerChoice {{1} crypto_asset crypto_shape crypto_node crypto_mesh}
 pickerAdd {0.1637058258 0.1192932129 0.2271728516 0 224 603 225 604}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte40
 xpos 8317
 ypos 1643
}
push $N684f9c00
Dot {
 name Dot135
 label _char_beauty
 note_font " Italic"
 note_font_size 22
 xpos 8532
 ypos 1308
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
add_layer {reflect reflect.red reflect.green reflect.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 reflect
 fromInput2 {{0} B}
 mappings "4 reflect.red 0 0 rgba.red 0 0 reflect.green 0 1 rgba.green 0 1 reflect.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle46
 label "\[ value in1 ]"
 xpos 8498
 ypos 1336
}
Clamp {
 minimum 0.0001
 name Clamp11
 xpos 8498
 ypos 1372
}
Dot {
 name Dot136
 xpos 8532
 ypos 1419
}
set N6cfb3800 [stack 0]
Multiply {
 inputs 1+1
 channels rgb
 name Multiply4
 label "Value: \[ value value ]"
 xpos 8498
 ypos 1637
}
Dot {
 name Dot137
 xpos 8532
 ypos 1853
}
push $N6cfb3800
push $N507e2800
Dot {
 name Dot138
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8357
 ypos 698
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 cryptoLayerChoice {{2} crypto_asset crypto_shape crypto_node crypto_mesh}
 pickerAdd {0.07343298197 0.1749277115 0.1997108459 0 77 237 78 238}
 pickerRemove {0.1872436553 0.08242664486 0.04010527208 1.000000119 71 235 72 236}
 lastSelectedCryptoLayerName crypto_node
 name Cryptomatte41
 xpos 8323
 ypos 765
}
push $N684f9c00
Dot {
 name Dot139
 label _char_beauty
 note_font " Italic"
 note_font_size 22
 xpos 8538
 ypos 434
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
add_layer {specular specular.red specular.green specular.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 specular
 fromInput2 {{0} B}
 mappings "4 specular.red 0 0 rgba.red 0 0 specular.green 0 1 rgba.green 0 1 specular.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle47
 label "\[ value in1 ]"
 xpos 8504
 ypos 544
}
Clamp {
 minimum 0.0001
 name Clamp12
 xpos 8504
 ypos 580
}
Dot {
 name Dot140
 xpos 8538
 ypos 629
}
set N6b50b000 [stack 0]
Multiply {
 inputs 1+1
 channels rgb
 name Multiply1
 label "Value: \[ value value ]"
 xpos 8504
 ypos 759
}
Dot {
 name Dot141
 xpos 8538
 ypos 1006
}
push $N6b50b000
push $N684f8400
Dot {
 name Dot142
 xpos 8542
 ypos -48
}
set N6b50a000 [stack 0]
Dot {
 name Dot143
 xpos 8542
 ypos 21
}
push $N6b50a000
push $N684f8c00
push $N5407a800
Dot {
 name Dot151
 label _char_position
 note_font " Italic"
 note_font_size 22
 xpos 10738
 ypos -3373
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
xyzKey_v01 {
 name xyzKey_v01_10
 xpos 10704
 ypos -3290
 in_1 P
 color {6.038646 7.28978014 -13.34919167}
 uniform_scale 0.018
 rot_sk 0
 inv true
 vec x
 ramp 0.3
 sm 0
 lut {master {}
   red {}
   green {}
   blue {}
   alpha {curve C k 0 s0 L 1 s0}}
 in N
 sm_norm 0
 lut_1 {master {}
   red {}
   green {}
   blue {}
   alpha {curve L 0 1}}
}
push $N507e2800
Dot {
 name Dot152
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 10730
 ypos -3760
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {1.011823654 1.002079368 0.008317480795 1 1179 607 1180 608}
 lastSelectedCryptoLayerName crypto_node
 name Cryptomatte11
 xpos 10696
 ypos -3697
}
push $N684f9c00
Dot {
 name Dot101
 label _char_beauty
 note_font " Italic"
 note_font_size 22
 xpos 9076
 ypos -4478
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot146
 xpos 9076
 ypos -4276
}
set N6b0d0c00 [stack 0]
Dot {
 name Dot147
 xpos 10038
 ypos -4276
}
set N6b0d1000 [stack 0]
Dot {
 name Dot148
 xpos 10936
 ypos -4276
}
add_layer {lgt_rim lgt_rim.red lgt_rim.green lgt_rim.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_rim
 fromInput2 {{0} B}
 mappings "4 lgt_rim.red 0 0 rgba.red 0 0 lgt_rim.green 0 1 rgba.green 0 1 lgt_rim.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle50
 label "\[ value in1 ]"
 xpos 10902
 ypos -4139
}
add_layer {lgt_pers_rim lgt_pers_rim.red lgt_pers_rim.green lgt_pers_rim.blue none}
Remove {
 operation keep
 channels rgb
 channels2 {lgt_pers_rim.red lgt_pers_rim.green lgt_pers_rim.blue none}
 name Remove22
 xpos 10902
 ypos -4087
}
Grade {
 name Grade28
 label "Mix: \[ value mix ]"
 xpos 10902
 ypos -3907
}
Grade {
 inputs 1+1
 name Grade29
 label "Mix: \[ value mix ]"
 xpos 10902
 ypos -3703
}
Grade {
 inputs 1+1
 name Grade24
 label "Mix: \[ value mix ]"
 xpos 10902
 ypos -3296
}
Shuffle2 {
 fromInput1 {{0} B}
 out1 lgt_pers_rim
 fromInput2 {{0} B}
 mappings "3 rgba.red 0 0 lgt_pers_rim.red 0 0 rgba.green 0 1 lgt_pers_rim.green 0 1 rgba.blue 0 2 lgt_pers_rim.blue 0 2"
 name Shuffle51
 label "\[ value in1 ]"
 xpos 10902
 ypos -1464
}
set N6b0f5000 [stack 0]
Dot {
 name Dot153
 xpos 10936
 ypos -1306
}
push $N5407a800
Dot {
 name Dot154
 label _char_position
 note_font " Italic"
 note_font_size 22
 xpos 9739
 ypos -3389
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
xyzKey_v01 {
 name xyzKey_v01_4
 xpos 9705
 ypos -3306
 in_1 P
 rot_sk 0
 sm 0
 lut {master {}
   red {}
   green {}
   blue {}
   alpha {curve C k 0 s0 L 1 s0}}
 in N
 sm_norm 0
 lut_1 {master {}
   red {}
   green {}
   blue {}
   alpha {curve L 0 1}}
}
push $N507e2800
Dot {
 name Dot155
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 9798
 ypos -3763
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {1.011823654 1.002079368 0.008317480795 1 1179 607 1180 608}
 lastSelectedCryptoLayerName crypto_node
 name Cryptomatte43
 xpos 9764
 ypos -3700
}
push $N6b0d1000
add_layer {lgt_fill lgt_fill.red lgt_fill.green lgt_fill.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_fill
 fromInput2 {{0} B}
 mappings "4 lgt_fill.red 0 0 rgba.red 0 0 lgt_fill.green 0 1 rgba.green 0 1 lgt_fill.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle52
 label "\[ value in1 ]"
 xpos 10004
 ypos -4107
}
add_layer {lgt_pers_fill lgt_pers_fill.red lgt_pers_fill.green lgt_pers_fill.blue}
Remove {
 operation keep
 channels rgb
 channels2 lgt_pers_fill
 name Remove23
 xpos 10004
 ypos -4060
}
Grade {
 name Grade15
 label "Mix: \[ value mix ]"
 xpos 10004
 ypos -3919
}
Grade {
 inputs 1+1
 name Grade21
 label "Mix: \[ value mix ]"
 xpos 10004
 ypos -3706
}
Grade {
 inputs 1+1
 name Grade23
 label "Mix: \[ value mix ]"
 xpos 10004
 ypos -3312
}
Shuffle2 {
 fromInput1 {{0} B}
 out1 lgt_pers_fill
 fromInput2 {{0} B}
 mappings "3 rgba.red 0 0 lgt_pers_fill.red 0 0 rgba.green 0 1 lgt_pers_fill.green 0 1 rgba.blue 0 2 lgt_pers_fill.blue 0 2"
 name Shuffle53
 label "\[ value in1 ]"
 xpos 10004
 ypos -2083
}
Dot {
 name Dot156
 xpos 10038
 ypos -1976
}
push $N5407a800
Dot {
 name Dot157
 label _char_position
 note_font " Italic"
 note_font_size 22
 xpos 8726
 ypos -3375
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
xyzKey_v01 {
 name xyzKey_v01_3
 xpos 8692
 ypos -3327
 in_1 P
 rot_sk 0
 sm 0
 lut {master {}
   red {}
   green {}
   blue {}
   alpha {curve C k 0 s0 L 1 s0}}
 in N
 sm_norm 0
 lut_1 {master {}
   red {}
   green {}
   blue {}
   alpha {curve L 0 1}}
}
push $N507e2800
Dot {
 name Dot158
 label _char_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8836
 ypos -3742
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {1.011823654 1.002079368 0.008317480795 1 1179 607 1180 608}
 lastSelectedCryptoLayerName crypto_node
 name Cryptomatte10
 xpos 8802
 ypos -3703
}
push $N6b0d0c00
add_layer {lgt_key lgt_key.red lgt_key.green lgt_key.blue}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_key
 fromInput2 {{0} B}
 mappings "4 lgt_key.red 0 0 rgba.red 0 0 lgt_key.green 0 1 rgba.green 0 1 lgt_key.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle54
 label "\[ value in1 ]"
 xpos 9042
 ypos -4111
}
Remove {
 operation keep
 channels rgb
 name Remove24
 xpos 9042
 ypos -4075
}
Grade {
 name Grade14
 label "Mix: \[ value mix ]"
 xpos 9042
 ypos -3920
}
Grade {
 inputs 1+1
 name Grade20
 label "Mix: \[ value mix ]"
 xpos 9042
 ypos -3709
}
Grade {
 inputs 1+1
 name Grade22
 label "Mix: \[ value mix ]"
 xpos 9042
 ypos -3333
}
add_layer {lgt_pers_key lgt_pers_key.red lgt_pers_key.green lgt_pers_key.blue}
Shuffle2 {
 fromInput1 {{0} B}
 out1 lgt_pers_key
 fromInput2 {{0} B}
 mappings "3 rgba.red 0 0 lgt_pers_key.red 0 0 rgba.green 0 1 lgt_pers_key.green 0 1 rgba.blue 0 2 lgt_pers_key.blue 0 2"
 name Shuffle55
 label "\[ value in1 ]"
 xpos 9042
 ypos -2078
}
Merge2 {
 inputs 2
 operation plus
 bbox B
 also_merge lgt_pers_fill
 name Merge25
 xpos 9042
 ypos -1979
}
Merge2 {
 inputs 2
 operation plus
 bbox B
 also_merge {lgt_pers_rim.red lgt_pers_rim.green lgt_pers_rim.blue none}
 name Merge26
 xpos 9042
 ypos -1309
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide5
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 9042
 ypos -434
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 also_merge albedo
 name Merge28
 xpos 9042
 ypos -51
}
Shuffle2 {
 inputs 2
 fromInput1 {{1} B A}
 in1 rgb
 out1 albedo
 fromInput2 {{0} B A}
 mappings "3 rgba.red 0 0 albedo.red 0 0 rgba.green 0 1 albedo.green 0 1 rgba.blue 0 2 albedo.blue 0 2"
 name Shuffle56
 label "\[ value in1 ]"
 xpos 9042
 ypos 12
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide6
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 9042
 ypos 620
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 name Merge29
 xpos 9042
 ypos 1003
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide7
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 9042
 ypos 1410
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 name Merge30
 xpos 9042
 ypos 1850
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide8
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 9042
 ypos 2287
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 name Merge31
 xpos 9042
 ypos 2734
}
Copy {
 inputs 2
 from0 rgba.alpha
 to0 rgba.alpha
 name Copy1
 xpos 9042
 ypos 3379
}
Grade {
 white {{parent.Grade9.white} {parent.Grade9.white} {parent.Grade9.white} {parent.Grade9.white}}
 multiply {{parent.Grade9.multiply}}
 mix 0.7
 name Grade52
 tile_color 0xff0000ff
 xpos 9042
 ypos 3864
}
Saturation {
 saturation {{parent.Saturation1.saturation}}
 name Saturation3
 tile_color 0xff0000ff
 xpos 9042
 ypos 3944
}
Grade {
 inputs 1+1
 name Grade5
 label "Mix: \[ value mix ]"
 xpos 9042
 ypos 4552
}
Grade {
 inputs 1+1
 name Grade16
 label "Mix: \[ value mix ]"
 xpos 9042
 ypos 5955
}
Dot {
 name Dot5
 xpos 9076
 ypos 7615
}
Merge2 {
 inputs 2
 operation multiply
 screen_alpha true
 Achannels {rgba.red rgba.green rgba.blue -rgba.alpha}
 mix 0.25
 name Merge2
 label "Mix: \[ value mix ]"
 xpos 9042
 ypos 7712
}
Merge2 {
 inputs 2+1
 operation screen
 Achannels albedo
 mix 0.2
 name Merge32
 xpos 9042
 ypos 8227
}
Group {
 name BlacksMatch2
 help "Choose a black point color or plug an image /constant you wish to be your blackpoint into BlackColor input.\n\nUse Mult Range to control how far above the blackpoint color to affect the lows\n\nUse the RollOff gamma to add fall off to the bottom of the curve\n\nTurn on the preview Plotscan and move the sampler over a region to see what your settings are doing to a linear 0-1 ramp.  This will help you see if you have weird curves, clamping or other funky problems as you adjust settings"
 knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\n\nif k.name() == \"inputChange\":\n    nsd = nuke.toNode(\"SwitchDefault\")\n    n\[\"defaultBlack\"].setEnabled(nsd\[\"which\"].getValue()==1)\n\nif k.name() == \"previewPlotScan\":\n    p = n.knob(\"previewPlotScan\").value()\n    if p == True:\n        n.knob(\"plotscanSampler\").setVisible(True)\n    else:\n        n.knob(\"plotscanSampler\").setVisible(False)"
 tile_color 0x1c1c1cff
 note_font "Helvetica Bold"
 xpos 9042
 ypos 9163
 addUserKnob {20 BlacksMatch}
 addUserKnob {6 default_black_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 premultInput l "Premultiplied Input" +STARTLINE}
 premultInput true
 addUserKnob {4 mergeOp l Operation: t "Plus and Screen do the same thing with our operation, so I only included a hypot between plus/screen and hypot.  Hypot raises the mult by x2 because I thought that gave more pleasising results.  It will probably be a harsher curve (more towards clamp) than the plus/screen result)." M {Plus/Screen Hypot "" ""}}
 mergeOp Hypot
 addUserKnob {18 defaultBlack l "Default Black"}
 defaultBlack {0.02583334409 -0.01666665636 0.140833348}
 addUserKnob {6 defaultBlack_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 defaultBlack_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {26 ""}
 addUserKnob {7 multBase l "Mult Low Range" t "This is the Multiplier for the top of the \"toe\" curve.  It is multiplying the BlackPoint color by this number and setting it as the highest point weird the curve will influence the midtones and the highlights" R 1.5 10}
 multBase 2
 addUserKnob {7 rolloffGamma l "Rolloff Gamma" t "This controls the bottom of the curve, the falloff to where it is bending toward the \"cut off point\" which is out black color.  A lower value will act more like a clamp and a higher value will act more like a plus." R 0.1 1}
 rolloffGamma 0.15
 addUserKnob {4 minVal l "Min Value is:" M {"Toe Result" "Clamp Result" "" ""}}
 addUserKnob {6 previewPlotScan l "Preview PlotScan" t "Click to overlay a plotscan graph to show you how your black color is influenced by your settings." +STARTLINE}
 addUserKnob {12 plotscanSampler l "PlotScan Sampler" +HIDDEN}
 plotscanSampler {200 200}
 addUserKnob {6 color_rgb_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {41 maskChannelMask l mask -STARTLINE T MergeKeymix.maskChannelMask}
 addUserKnob {41 inject -STARTLINE T MergeKeymix.inject}
 addUserKnob {41 invert_mask l invert -STARTLINE T MergeKeymix.invert_mask}
 addUserKnob {41 fringe -STARTLINE T MergeKeymix.fringe}
 addUserKnob {41 mix T MergeKeymix.mix}
 addUserKnob {20 info l Info}
 addUserKnob {26 creator l Creator: T "<b><big>Tony Lyons"}
 addUserKnob {26 desc l Name: T BlacksMatch}
 addUserKnob {26 ver l Version: T v10}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0x556a5000
  label "This Creates a \nPer Channel Key\nBased on the Blackpoint"
  note_font_size 30
  note_font_color 0xffffffff
  xpos 991
  ypos -77
  bdwidth 314
  bdheight 421
 }
 StickyNote {
  inputs 0
  name StickyNote2
  tile_color 0xff
  label green
  note_font_size 41
  note_font_color 0xffffffff
  xpos 177
  ypos 466
 }
 StickyNote {
  inputs 0
  name StickyNote1
  tile_color 0xff
  label red
  note_font_size 41
  note_font_color 0xffffffff
  xpos 188
  ypos 350
 }
 StickyNote {
  inputs 0
  name StickyNote3
  tile_color 0xff
  label blue
  note_font_size 41
  note_font_color 0xffffffff
  xpos 186
  ypos 570
 }
 StickyNote {
  inputs 0
  name StickyNote4
  tile_color 0xff
  label "min will be \nblack color"
  note_font_size 31
  note_font_color 0xffffffff
  xpos 143
  ypos 733
 }
 Input {
  inputs 0
  name Inputimg
  xpos 322
  ypos -550
 }
 Dot {
  name Dot17
  xpos 356
  ypos -418
 }
set N648d2000 [stack 0]
 AddChannels {
  channels rgba
  color 1
  name AddChannels1
  xpos 322
  ypos -365
 }
 Dot {
  name Dot5
  note_font_size 41
  xpos 356
  ypos -288
 }
set N642d3800 [stack 0]
 Grade {
  channels rgba
  white 0
  multiply 0
  add {{defaultBlack.r} {defaultBlack.g} {defaultBlack.b} 0}
  black_clamp false
  name Grade1
  label color
  xpos 922
  ypos -295
 }
 Input {
  inputs 0
  name InputBlackColor
  xpos 1138
  ypos -569
  number 1
 }
 Switch {
  inputs 2
  which {{"!\[exists parent.input1]"}}
  name SwitchDefault
  xpos 1138
  ypos -291
 }
 Dot {
  name Dot26
  label "Black Color"
  note_font_size 41
  xpos 1172
  ypos -212
 }
 Dot {
  name Dot4
  note_font_size 41
  xpos 1172
  ypos -151
 }
set N85d07400 [stack 0]
 Dot {
  name Dot36
  note_font_size 41
  xpos 1631
  ypos -151
 }
set N85d07000 [stack 0]
 Dot {
  name Dot16
  note_font_size 41
  xpos 2140
  ypos -151
 }
set N85d06800 [stack 0]
 Crop {
  box {{plotscanSampler.x-2} {plotscanSampler.y-2} {plotscanSampler.x+2} {plotscanSampler.x+2}}
  reformat true
  crop false
  name Crop1
  xpos 2432
  ypos -154
  addUserKnob {20 User}
  addUserKnob {22 cropToBbox l "Crop to Bounding Box" -STARTLINE T codeBBox()}
  addUserKnob {22 cropToBbox_1 l "Crop to Bounding Box" -STARTLINE T codeBBox()}
 }
 Blur {
  channels rgb
  size 16
  name Blur1
  label "\[value size]"
  xpos 2432
  ypos -130
 }
 Reformat {
  format "512 512 0 0 512 512 1 square_512"
  name Reformat4
  xpos 2432
  ypos -92
 }
 Dot {
  name Dot12
  note_font_size 41
  xpos 2466
  ypos -43
 }
set N85d8e400 [stack 0]
 Dot {
  name Dot47
  note_font_size 41
  xpos 2917
  ypos -43
 }
set N85d8e000 [stack 0]
 Dot {
  name Dot42
  label "Black Color"
  note_font_size 41
  xpos 2917
  ypos 286
 }
 Dot {
  name Dot43
  note_font_size 41
  xpos 2917
  ypos 366
 }
set N85703c00 [stack 0]
 Dot {
  name Dot44
  note_font_size 41
  xpos 2917
  ypos 480
 }
set N85703800 [stack 0]
 Dot {
  name Dot45
  note_font_size 41
  xpos 2917
  ypos 588
 }
set N85703400 [stack 0]
 Dot {
  name Dot31
  note_font_size 41
  xpos 2917
  ypos 656
 }
set N85703000 [stack 0]
push $N85703000
push $N85d8e000
 Dot {
  name Dot11
  label "Black Color"
  note_font_size 41
  xpos 3426
  ypos -43
 }
 Multiply {
  channels rgb
  value 2
  name Multiply6
  label "mult black color"
  xpos 3392
  ypos 77
 }
 Reformat {
  inputs 0
  format "512 512 0 0 512 512 1 square_512"
  pbb true
  name Reformat1
  xpos 2711
  ypos 61
 }
 Ramp {
  p0 {0 0}
  p1 {512 0}
  name Ramp1
  xpos 2711
  ypos 93
 }
 Dot {
  name Dot1
  note_font_size 41
  xpos 2745
  ypos 154
 }
set N64f07c00 [stack 0]
 Dot {
  name Dot7
  note_font_size 41
  xpos 3138
  ypos 154
 }
set N64f07800 [stack 0]
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide2
  xpos 3392
  ypos 151
 }
 Invert {
  channels rgb
  name Invert5
  xpos 3392
  ypos 175
 }
 Clamp {
  channels rgb
  name Clamp4
  xpos 3392
  ypos 199
 }
 Gamma {
  channels rgb
  value 0.5
  name Gamma4
  xpos 3392
  ypos 223
 }
 Dot {
  name Dot39
  xpos 3426
  ypos 366
 }
set N684bf800 [stack 0]
 Dot {
  name Dot40
  xpos 3426
  ypos 480
 }
set N684bf400 [stack 0]
 Dot {
  name Dot41
  xpos 3426
  ypos 588
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle11
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 3277
  ypos 581
 }
push $N85703400
push $N684bf400
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle12
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 3276
  ypos 473
 }
push $N85703800
push $N684bf800
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle13
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 3270
  ypos 359
 }
push $N85703c00
push $N64f07800
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge14
  label red
  xpos 3104
  ypos 359
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge15
  label green
  xpos 3104
  ypos 473
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge16
  label blue
  xpos 3104
  ypos 581
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge18
  label "Set Min Color\nto Blackpoint"
  xpos 3104
  ypos 644
 }
 Dot {
  name Dot46
  note_font_size 41
  xpos 3138
  ypos 742
 }
 Switch {
  inputs 2
  which {{minVal}}
  name SwitchMinColor1
  xpos 2883
  ypos 739
 }
push $N85d8e400
 Multiply {
  channels rgb
  value {{multBase}}
  name Multiply3
  label "mult black color"
  xpos 2432
  ypos 63
 }
 Multiply {
  channels rgb
  value 2
  name Multiply4
  label "hypot Extra Mult\n"
  xpos 2432
  ypos 95
  disable {{"mergeOp == 1 ? 0 : 1"}}
 }
push $N64f07c00
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide1
  xpos 2432
  ypos 151
 }
 Invert {
  channels rgb
  name Invert2
  xpos 2432
  ypos 175
 }
 Clamp {
  channels rgb
  name Clamp2
  xpos 2432
  ypos 199
 }
 Gamma {
  channels rgb
  value {{rolloffGamma}}
  name Gamma2
  xpos 2432
  ypos 223
 }
 Dot {
  name Dot6
  xpos 2466
  ypos 366
 }
set N68745800 [stack 0]
 Dot {
  name Dot9
  xpos 2466
  ypos 480
 }
set N68745400 [stack 0]
 Dot {
  name Dot10
  xpos 2466
  ypos 588
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle4
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2511
  ypos 581
 }
push $N85703400
push $N68745400
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle5
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2511
  ypos 473
 }
push $N85703800
push $N68745800
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle6
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2517
  ypos 359
 }
push $N85703c00
push $N64f07c00
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge2
  label red
  xpos 2711
  ypos 359
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge6
  label green
  xpos 2711
  ypos 473
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge7
  label blue
  xpos 2711
  ypos 581
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge8
  label "Set Min Color\nto Blackpoint"
  xpos 2711
  ypos 730
 }
 Group {
  name PlotScanline
  tile_color 0x9c0000ff
  xpos 2711
  ypos 805
  addUserKnob {20 Controls}
  addUserKnob {4 mode l "Sampling method" M {"Slice Per Pixel (faster)" "Slice Area (slower)" "Full Scanline" "" "" ""}}
  mode "Full Scanline"
  addUserKnob {6 add2image l "Add to original" +STARTLINE}
  addUserKnob {6 Normalize -STARTLINE}
  addUserKnob {6 tonemap l "Tone Map (HDRI)" -STARTLINE}
  addUserKnob {6 curve l "Plot as curve" +STARTLINE}
  curve true
  addUserKnob {3 curveFat l "Curve Thickness" -STARTLINE}
  addUserKnob {3 sa l "Sample Area" t "Disabled when using pr pixel method."}
  sa 1
  addUserKnob {7 lift l Lift R -1 1}
  addUserKnob {7 scale l Scale R 0 5}
  scale 1
  addUserKnob {26 ""}
  addUserKnob {12 p1 l "Start Point"}
  p1 {376 418}
  addUserKnob {12 p2 l "End Point" -STARTLINE}
  p2 {428.5 425.5}
  addUserKnob {26 ""}
  addUserKnob {26 "" l "About " T "Plot Scanline v0.4 | theo@euqahuba.com\nUse P1 to select your scanline and/or you start slice."}
 }
  Input {
   inputs 0
   name Input1
   xpos -480
   ypos 62
  }
set N6b7d0400 [stack 0]
  Expression {
   temp_name0 length
   temp_expr0 sqrt(r*r+g*g+b*b)
   expr0 r/length
   expr1 g/length
   expr2 b/length
   name Normalize
   xpos -480
   ypos 108
   disable {{1-parent.Normalize i}}
  }
  Expression {
   expr0 r/(r+1)
   expr1 g/(g+1)
   expr2 b/(b+1)
   name tonamap
   xpos -480
   ypos 134
   disable {{1-parent.tonemap i}}
  }
set N6ce9a000 [stack 0]
  Expression {
   temp_name0 rExpr
   temp_expr0 "min(max(0,\r\nceil(r(x,parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name1 gExpr
   temp_expr1 "min(max(0,\r\nceil(g(x,parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name2 bExpr
   temp_expr2 "min(max(0,\r\nceil(b(x,parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   expr0 rExpr
   expr1 gExpr
   expr2 bExpr
   expr3 0
   name scanline
   xpos -302
   ypos 193
   addUserKnob {20 User}
  }
push $N6ce9a000
  Expression {
   temp_name0 rExpr
   temp_expr0 "min(max(0,\r\nceil(r((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y,parent.sa,parent.sa)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name1 gExpr
   temp_expr1 "min(max(0,\r\nceil(g((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y,parent.sa,parent.sa)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name2 bExpr
   temp_expr2 "min(max(0,\r\nceil(b((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y,parent.sa,parent.sa)-((y/height+parent.lift)*parent.scale))),1)"
   expr0 rExpr
   expr1 gExpr
   expr2 bExpr
   expr3 0
   name Expression_highQuality
   xpos -515
   ypos 197
   addUserKnob {20 User}
  }
push $N6ce9a000
  Expression {
   temp_name0 rExpr
   temp_expr0 "min(max(0,\r\nceil(r((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name1 gExpr
   temp_expr1 "min(max(0,\r\nceil(g((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name2 bExpr
   temp_expr2 "min(max(0,\r\nceil(b((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   expr0 rExpr
   expr1 gExpr
   expr2 bExpr
   expr3 0
   name perPixel
   xpos -419
   ypos 201
   addUserKnob {20 User}
  }
  Switch {
   inputs 3
   which {{parent.mode i}}
   name Switch2
   xpos -480
   ypos 253
  }
  Matrix {
   matrix {
       {0 1 0}
       {1 -4 1}
       {0 1 0}
     }
   name Matrix2
   xpos -480
   ypos 284
   disable {{-1+parent.curve i x70 1}}
  }
  Dilate {
   size {{parent.curveFat}}
   name Dilate1
   xpos -480
   ypos 326
   disable {{-1+parent.curve.main}}
  }
  Clamp {
   name Clamp1
   xpos -480
   ypos 383
  }
set N85ffa400 [stack 0]
push $N6b7d0400
  Dot {
   name Dot1
   xpos -556
   ypos 66
  }
  Clamp {
   maximum 331
   name Clamp2
   xpos -590
   ypos 352
  }
  Merge2 {
   inputs 2
   operation plus
   bbox intersection
   name Merge1
   xpos -590
   ypos 394
  }
  Dot {
   name Dot2
   xpos -556
   ypos 433
  }
push $N85ffa400
  Switch {
   inputs 2
   which {{parent.add2image i}}
   name Switch1
   xpos -480
   ypos 430
  }
  Output {
   name Output1
   xpos -480
   ypos 470
  }
 end_group
 Dot {
  name Dot15
  note_font_size 41
  xpos 2745
  ypos 857
 }
set N6cbc8000 [stack 0]
 Shuffle {
  red white
  green white
  blue white
  alpha white
  name Shuffle7
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2821
  ypos 850
 }
 BlackOutside {
  name BlackOutside1
  xpos 2821
  ypos 882
 }
 Dilate {
  channels rgba
  size -2
  name Dilate1
  xpos 2821
  ypos 910
 }
 Invert {
  name Invert3
  xpos 2821
  ypos 934
 }
push $N6cbc8000
 Merge2 {
  inputs 2
  name Merge9
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 2711
  ypos 938
 }
 Group {
  name BinaryAlpha
  tile_color 0x2a2a2aff
  label "(\[value an] --> \[value output1])"
  note_font Verdana
  note_font_color 0xfffff9ff
  xpos 2711
  ypos 983
  addUserKnob {20 BinaryAlpha}
  addUserKnob {4 an l Analyze: M {rgb rgba alpha "" "" ""}}
  addUserKnob {4 output1 l Output: M {rgba alpha "" "" "" ""}}
  output1 alpha
  addUserKnob {20 info l Info}
  addUserKnob {26 creator l Creator: T "<b><big>Tony Lyons"}
  addUserKnob {26 desc l Description: t "Analyzes channel input and creates a binary result 0 or 1 and outputs it into output channel" T BinaryAlpha}
  addUserKnob {26 ver l Version: T v03}
 }
  Input {
   inputs 0
   name Input
   xpos -398
   ypos 275
  }
  Expression {
   temp_name0 rgb_an
   temp_expr0 "r !=0 || g!=0 || b!=0?1:0"
   temp_name1 rgba_an
   temp_expr1 "r!=0 || g!=0 || b!=0 || a!=0?1:0"
   temp_name2 alpha_an
   temp_expr2 a!=0?1:0
   expr3 "parent.an == 0 ? rgb_an : parent.an == 1 ? rgba_an : alpha_an"
   name Expression
   xpos -398
   ypos 341
  }
  Shuffle {
   red alpha
   green alpha
   blue alpha
   name Shuffle
   label "\[value in]"
   xpos -398
   ypos 367
   disable {{parent.output1}}
  }
  Output {
   name Output1
   xpos -398
   ypos 456
  }
 end_group
 Reformat {
  type "to box"
  box_height {{"\[exists parent.input0] ? parent.input.height : root.format.height"}}
  resize height
  filter impulse
  pbb true
  name Reformat2
  xpos 2711
  ypos 1041
 }
 Reformat {
  type "to box"
  box_width {{"\[exists parent.input0] ? parent.input.width : root.format.width"}}
  box_height {{input.height}}
  resize none
  filter impulse
  black_outside true
  pbb true
  name Reformat3
  xpos 2711
  ypos 1081
 }
 Dilate {
  channels rgba
  size 1
  name Dilate2
  xpos 2711
  ypos 1121
 }
 Dot {
  name Dot14
  note_font_size 41
  xpos 2745
  ypos 1192
 }
 Input {
  inputs 0
  name Inputmask
  xpos 864
  ypos 878
  number 2
 }
 Dot {
  name Dot29
  xpos 898
  ypos 1015
 }
push $N85d07000
 Dot {
  name Dot33
  label "Black Color"
  note_font_size 41
  xpos 1631
  ypos 295
 }
 Dot {
  name Dot37
  note_font_size 41
  xpos 1631
  ypos 360
 }
set N6cc20c00 [stack 0]
 Dot {
  name Dot34
  note_font_size 41
  xpos 1631
  ypos 474
 }
set N6cc21000 [stack 0]
 Dot {
  name Dot35
  note_font_size 41
  xpos 1631
  ypos 582
 }
set N6cc21400 [stack 0]
 Dot {
  name Dot13
  note_font_size 41
  xpos 1631
  ypos 674
 }
set N6cc21800 [stack 0]
push $N6cc21800
push $N85d06800
 Multiply {
  channels rgb
  value 2
  name Multiply7
  label "mult black color"
  xpos 2106
  ypos 87
 }
push $N642d3800
 Unpremult {
  name Unpremult1
  xpos 322
  ypos -16
  disable {{"! premultInput"}}
 }
 Dot {
  name Dot18
  xpos 356
  ypos 145
 }
set N6b608400 [stack 0]
 Dot {
  name Dot22
  note_font_size 41
  xpos 1028
  ypos 145
 }
set N6b608800 [stack 0]
 Dot {
  name Dot32
  note_font_size 41
  xpos 1852
  ypos 145
 }
set N6b608c00 [stack 0]
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide3
  xpos 2106
  ypos 142
 }
 Invert {
  channels rgb
  name Invert4
  xpos 2106
  ypos 166
 }
 Clamp {
  channels rgb
  name Clamp3
  xpos 2106
  ypos 190
 }
 Gamma {
  channels rgb
  value 0.51
  name Gamma3
  xpos 2106
  ypos 214
 }
 Dot {
  name Dot24
  xpos 2140
  ypos 360
 }
set N6cdf4400 [stack 0]
 Dot {
  name Dot25
  xpos 2140
  ypos 474
 }
set N6cdf4800 [stack 0]
 Dot {
  name Dot27
  xpos 2140
  ypos 582
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle8
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1990
  ypos 575
 }
push $N6cc21400
push $N6cdf4800
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle9
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1990
  ypos 467
 }
push $N6cc21000
push $N6cdf4400
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle10
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1984
  ypos 353
 }
push $N6cc20c00
push $N6b608c00
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge11
  label red
  xpos 1818
  ypos 353
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge12
  label green
  xpos 1818
  ypos 467
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge13
  label blue
  xpos 1818
  ypos 575
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge17
  label "Set Min Color\nto Blackpoint"
  xpos 1818
  ypos 662
 }
 Dot {
  name Dot38
  note_font_size 41
  xpos 1852
  ypos 760
 }
 Switch {
  inputs 2
  which {{minVal}}
  name SwitchMinColor
  xpos 1597
  ypos 757
 }
push $N85d07400
 Multiply {
  channels rgb
  value {{multBase}}
  name Multiply1
  label "mult black color"
  xpos 1138
  ypos 52
 }
 Multiply {
  channels rgb
  value 2
  name Multiply2
  label "hypot Extra Mult\n"
  xpos 1138
  ypos 84
  disable {{"mergeOp == 1 ? 0 : 1"}}
 }
push $N6b608800
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide
  xpos 1138
  ypos 194
 }
 Invert {
  channels rgb
  name Invert1
  xpos 1138
  ypos 239
 }
 Clamp {
  channels rgb
  name Clamp1
  xpos 1138
  ypos 263
 }
 Gamma {
  channels rgb
  value {{rolloffGamma}}
  name Gamma1
  xpos 1138
  ypos 287
 }
 Dot {
  name Dot19
  xpos 1172
  ypos 364
 }
set N7ebf0c00 [stack 0]
 Dot {
  name Dot20
  xpos 1172
  ypos 478
 }
set N7ebf1000 [stack 0]
 Dot {
  name Dot21
  xpos 1172
  ypos 586
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle3
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1022
  ypos 579
 }
push $N85d07400
 Dot {
  name Dot23
  xpos 706
  ypos -151
 }
 Dot {
  name Dot8
  label "Black Color"
  note_font_size 41
  xpos 706
  ypos 293
 }
set N8619e000 [stack 0]
 Dot {
  name Dot2
  note_font_size 41
  xpos 706
  ypos 404
 }
set N8619e400 [stack 0]
 Dot {
  name Dot3
  note_font_size 41
  xpos 706
  ypos 523
 }
push $N7ebf1000
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle2
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1022
  ypos 471
 }
push $N8619e400
push $N7ebf0c00
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle1
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1016
  ypos 357
 }
push $N8619e000
push $N6b608400
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge3
  label red
  xpos 322
  ypos 357
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge4
  label green
  xpos 322
  ypos 471
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge5
  label blue
  xpos 322
  ypos 579
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge1
  label "Set Min Color\nto Blackpoint"
  xpos 322
  ypos 748
 }
 Premult {
  name Premult4
  xpos 322
  ypos 881
  disable {{"! premultInput"}}
 }
push $N648d2000
 Dot {
  name Dot28
  xpos -146
  ypos -418
 }
 Dot {
  name Dot30
  xpos -146
  ypos 1015
 }
 Merge2 {
  inputs 2+1
  operation copy
  bbox B
  Achannels {rgba.red rgba.green rgba.blue -rgba.alpha}
  Bchannels {rgba.red rgba.green rgba.blue -rgba.alpha}
  output {rgba.red rgba.green rgba.blue -rgba.alpha}
  mix 0.1
  name MergeKeymix
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 322
  ypos 1012
 }
 Merge2 {
  inputs 2
  name Merge10
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 322
  ypos 1189
  disable {{!previewPlotScan}}
 }
 Output {
  name Output1
  xpos 322
  ypos 1395
 }
 NoOp {
  inputs 0
  name Settings
  note_font_size 51
  xpos 2494
  ypos -414
  addUserKnob {20 User}
  addUserKnob {7 mergeOpNum l "Merge Op Num"}
  mergeOpNum {{"mergeOp == 0 ? 24 : 13"}}
 }
end_group
Merge2 {
 inputs 2
 operation mask
 name Merge37
 xpos 9042
 ypos 9822
}
Dot {
 name Dot159
 xpos 9076
 ypos 10350
}
set N8e523000 [stack 0]
Dot {
 name Dot160
 xpos 8747
 ypos 10350
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 {lgt_pers_rim.red lgt_pers_rim.green lgt_pers_rim.blue none}
 fromInput2 {{0} B}
 mappings "4 lgt_pers_rim.red 0 0 rgba.red 0 0 lgt_pers_rim.green 0 1 rgba.green 0 1 lgt_pers_rim.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle57
 label "\[ value in1 ]"
 xpos 8713
 ypos 10385
}
Merge2 {
 inputs 2
 operation mask
 name Merge42
 label "Mix: \[ value mix ]"
 xpos 8713
 ypos 10445
}
Group {
 name Glow_Exponential5
 help "Exponential Glow node, with options to recolor and adjust falloff."
 knobChanged "\nk = nuke.thisKnob()\nif k.name()=='crop':\n    if k.value():\n        nuke.thisNode().knob('overscan').setEnabled(True)\n    else:\n        nuke.thisNode().knob('overscan').setEnabled(False)\n"
 tile_color 0xc97200ff
 xpos 8713
 ypos 10534
 addUserKnob {20 ge l Glow}
 addUserKnob {26 glow_ctrls l "@b;Glow:"}
 addUserKnob {7 size t "Size of the glow" R 0 100}
 size 8
 addUserKnob {7 intensity t "Brightness of the Glow" R 0 10}
 intensity 2
 addUserKnob {7 falloff t "Adjust the light falloff of the glow. Higher values will have a longer falloff, resulting in visually bigger glows."}
 falloff 0.75
 addUserKnob {26 glow_highlights l "@b;Highlights:"}
 addUserKnob {41 range t "Luma key to define which parts of the image will glow." T Keyer1.range}
 addUserKnob {26 glow_colors l "@b;Glow Colors:"}
 addUserKnob {7 saturation l "color from img" t "By default the glow takes on the colors of the plate. By using this knob you can desaturate the color of the glow."}
 saturation 1
 addUserKnob {18 core_color l "core re-color" t "Re-color the core of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 core_color {1 1 1}
 addUserKnob {6 core_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {18 falloff_color l "falloff re-color" t "Re-color the falloff of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 falloff_color {1 1 1}
 addUserKnob {6 falloff_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 threshold l "core threshold" t "Define which parts of the glow are core or falloff."}
 threshold 1
 addUserKnob {26 glow_options l "@b;Options:"}
 addUserKnob {14 aspect l "aspect ratio" t "Set the aspect ratio for your glow. Streaky results can be obtained by changing the ratio here." R 0 100}
 aspect {1 1}
 addUserKnob {6 glow_only l "Glow only" t "By default the glow is added onto the plate. Checking this box will output the glow only. " +STARTLINE}
 glow_only true
 addUserKnob {6 crop l "Crop to Format" t "This glow can expand the bounding box to massive values, checking this box can prevent your bbox from getting unmanageable." +STARTLINE}
 crop true
 addUserKnob {7 overscan l "overscan (%)" t "If you are cropping to format but originally had some values outside the format, you can add some overscan here to preserve these. The values are a percentage of the format size." R 0 100}
 overscan 10
 addUserKnob {7 mix t "Mix back with the original plate (or black, if glow only is enabled)"}
 mix 1
 addUserKnob {26 ""}
 addUserKnob {26 spin_copyright l "" t " <b>SPIN<span style=\"color:#b32026\">VFX</span></b>\nGlow_Exponential\nVersion 1.0\n2017" +STARTLINE T "<span style=\"color:#aaa;font-family:sans-serif;font-size:8pt\"><b>SPIN<span style=\"color:#b32026\">VFX</span></b> - Version 1.0 - 2017 - <a href=\"https://github.com/SpinVFX/spin_nuke_gizmos/\" style=\"color:#aaa\">Github Page</a></span>"}
}
 Input {
  inputs 0
  name img
  xpos 0
  ypos -59
 }
 Dot {
  name Dot1
  tile_color 0xcccccc00
  xpos 34
  ypos 50
 }
set N8e523c00 [stack 0]
 Dot {
  name Dot24
  tile_color 0xcccccc00
  xpos 34
  ypos 1274
 }
set N8c86fc00 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 136
  ypos 158
  number 1
 }
push $N8e523c00
 NoOp {
  name CTRL
  xpos 304
  ypos 46
  addUserKnob {20 User}
  addUserKnob {7 falloff R 0 2}
  falloff {{"max(parent.falloff/2+0.5, 0.0001)"}}
  addUserKnob {7 falloff_intensity}
  falloff_intensity {{falloff+pow(falloff,2)+pow(falloff,3)+pow(falloff,4)+pow(falloff,5)+pow(falloff,6)+pow(falloff,7)+pow(falloff,8)+pow(falloff,9)+pow(falloff,10)}}
  addUserKnob {14 size R 0 100}
  size {{parent.size/20*parent.aspect.w} {parent.size/20*parent.aspect.h}}
  addUserKnob {7 intensity}
  intensity {{parent.intensity/falloff_intensity}}
  addUserKnob {7 core R 0 2}
  core {{threshold}}
  addUserKnob {7 core_length}
  core_length {{sqrt(pow(core_color.r,2)+pow(core_color.g,2)+pow(core_color.b,2))/sqrt(3)}}
  addUserKnob {7 falloff_length}
  falloff_length {{sqrt(pow(falloff_color.r,2)+pow(falloff_color.g,2)+pow(falloff_color.b,2))/sqrt(3)}}
 }
 Keyer {
  operation "luminance key"
  range {0 0.2525188758 1 1}
  name Keyer1
  xpos 304
  ypos 98
 }
 ChannelMerge {
  inputs 2
  operation in
  name ChannelMerge1
  xpos 304
  ypos 146
  disable {{"!\[exists parent.input1] "}}
 }
 Premult {
  name Premult1
  xpos 304
  ypos 202
 }
 Remove {
  operation keep
  channels rgb
  name Remove1
  xpos 304
  ypos 228
 }
 Multiply {
  value {{parent.CTRL.intensity}}
  name Multiplyer
  xpos 304
  ypos 263
 }
 Saturation {
  saturation {{parent.saturation}}
  name Saturation1
  xpos 304
  ypos 325
 }
 Dot {
  name Dot3
  tile_color 0x7aa9ff00
  xpos 338
  ypos 372
 }
set N8b326c00 [stack 0]
 Dot {
  name Dot2
  tile_color 0x7aa9ff00
  xpos 604
  ypos 372
 }
set N8b327000 [stack 0]
 Dot {
  name Dot4
  tile_color 0x7aa9ff00
  xpos 870
  ypos 372
 }
set N8b326800 [stack 0]
 Dot {
  name Dot5
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 372
 }
set N8b327c00 [stack 0]
 Dot {
  name Dot6
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 372
 }
set N8b327400 [stack 0]
 Dot {
  name Dot7
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 372
 }
set N8503a400 [stack 0]
 Dot {
  name Dot8
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 372
 }
set N8503a000 [stack 0]
 Dot {
  name Dot9
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 372
 }
set N85061000 [stack 0]
 Dot {
  name Dot10
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 372
 }
set N825d5800 [stack 0]
 Dot {
  name Dot11
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 372
 }
 Blur {
  size {{Blur9.size*2} {Blur9.size*2}}
  crop false
  name Blur10
  xpos 2698
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,10)}}
  name Multiply10
  xpos 2698
  ypos 543
 }
 Dot {
  name Dot20
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 796
 }
push $N825d5800
 Blur {
  size {{Blur8.size*2} {Blur8.size*2}}
  crop false
  name Blur9
  xpos 2432
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,9)}}
  name Multiply9
  xpos 2432
  ypos 542
 }
 Dot {
  name Dot19
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 770
 }
push $N85061000
 Blur {
  size {{Blur7.size*2} {Blur7.size*2}}
  crop false
  name Blur8
  xpos 2166
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,8)}}
  name Multiply8
  xpos 2166
  ypos 536
 }
 Dot {
  name Dot18
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 744
 }
push $N8503a000
 Blur {
  size {{Blur6.size*2} {Blur6.size*2}}
  crop false
  name Blur7
  xpos 1900
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,7)}}
  name Multiply7
  xpos 1900
  ypos 528
 }
 Dot {
  name Dot17
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 718
 }
push $N8503a400
 Blur {
  size {{Blur5.size*2} {Blur5.size*2}}
  crop false
  name Blur6
  xpos 1634
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,6)}}
  name Multiply6
  xpos 1634
  ypos 528
 }
 Dot {
  name Dot16
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 692
 }
push $N8b327400
 Blur {
  size {{Blur4.size*2} {Blur4.size*2}}
  crop false
  name Blur5
  xpos 1368
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,5)}}
  name Multiply5
  xpos 1368
  ypos 524
 }
 Dot {
  name Dot15
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 666
 }
push $N8b327c00
 Blur {
  size {{Blur3.size*2} {Blur3.size*2}}
  crop false
  name Blur4
  xpos 1102
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,4)}}
  name Multiply4
  xpos 1102
  ypos 518
 }
 Dot {
  name Dot14
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 640
 }
push $N8b326800
 Blur {
  size {{Blur2.size*2} {Blur2.size*2}}
  crop false
  name Blur3
  xpos 836
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,3)}}
  name Multiply3
  xpos 836
  ypos 509
 }
 Dot {
  name Dot13
  tile_color 0x7aa9ff00
  xpos 870
  ypos 614
 }
push $N8b327000
 Blur {
  size {{Blur1.size*2} {Blur1.size*2}}
  crop false
  name Blur2
  xpos 570
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,2)}}
  name Multiply2
  xpos 570
  ypos 508
 }
 Dot {
  name Dot12
  tile_color 0x7aa9ff00
  xpos 604
  ypos 588
 }
push $N8b326c00
 Blur {
  size {{CTRL.size*2} {CTRL.size*2}}
  crop false
  name Blur1
  xpos 304
  ypos 440
 }
 Multiply {
  value {{CTRL.falloff}}
  name Multiply1
  xpos 304
  ypos 512
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge1
  xpos 304
  ypos 584
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos 304
  ypos 610
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge3
  xpos 304
  ypos 636
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge4
  xpos 304
  ypos 662
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge5
  xpos 304
  ypos 688
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge6
  xpos 304
  ypos 714
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge7
  xpos 304
  ypos 740
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge8
  xpos 304
  ypos 766
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge9
  xpos 304
  ypos 792
 }
 Dot {
  name Dot21
  tile_color 0x4b5ec600
  xpos 338
  ypos 928
 }
set N64e71000 [stack 0]
 Dot {
  name Dot22
  tile_color 0x4b5ec600
  xpos 498
  ypos 928
 }
 Grade {
  whitepoint {{CTRL.core}}
  white_clamp true
  name Grade2
  xpos 464
  ypos 977
 }
 Gamma {
  channels rgb
  value {{parent.falloff_color.r/CTRL.falloff_length} {parent.falloff_color.g/CTRL.falloff_length} {parent.falloff_color.b/CTRL.falloff_length} {curve}}
  name Gamma1
  xpos 464
  ypos 1037
 }
 Grade {
  whitepoint {{CTRL.core}}
  reverse true
  name Grade3
  xpos 464
  ypos 1082
 }
push $N64e71000
 Clamp {
  minimum {{CTRL.core}}
  maximum_enable false
  name Clamp1
  xpos 304
  ypos 972
 }
 Grade {
  add {{1-CTRL.core}}
  name Grade4
  xpos 304
  ypos 1020
 }
 Gamma {
  channels rgb
  value {{1+(1-parent.core_color.r)/CTRL.core_length} {1+(1-parent.core_color.g)/CTRL.core_length} {1+(1-parent.core_color.b)/CTRL.core_length} {curve}}
  name Gamma2
  xpos 304
  ypos 1061
 }
 Add {
  channels rgb
  value -1
  name Add1
  xpos 304
  ypos 1087
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge10
  xpos 304
  ypos 1157
 }
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 304
  ypos 1183
 }
 Multiply {
  value {{parent.mix}}
  name mix
  xpos 304
  ypos 1217
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge11
  xpos 304
  ypos 1270
  disable {{parent.glow_only}}
 }
 Dot {
  name Dot23
  tile_color 0x4b5ec600
  xpos 338
  ypos 1436
 }
push $N8c86fc00
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  name Copy1
  xpos 0
  ypos 1414
 }
 Crop {
  box {{-width*(parent.overscan/100)/2} {-height*(parent.overscan/100)/2} {width+(width*(parent.overscan/100)/2)} {height+(height*(parent.overscan/100)/2)}}
  crop false
  name Crop2
  xpos 0
  ypos 1495
  disable {{!parent.crop}}
 }
 Output {
  name Output1
  xpos 0
  ypos 1543
 }
end_group
Dot {
 name Dot161
 xpos 8747
 ypos 10584
}
push $N8e523000
Merge2 {
 inputs 2
 operation plus
 bbox B
 mix 0.15
 name Merge33
 xpos 9042
 ypos 10581
}
Dot {
 name Dot162
 xpos 9076
 ypos 10754
}
set N64ed5c00 [stack 0]
Dot {
 name Dot163
 xpos 8754
 ypos 10754
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_pers_key
 fromInput2 {{0} B}
 mappings "4 lgt_pers_key.red 0 0 rgba.red 0 0 lgt_pers_key.green 0 1 rgba.green 0 1 lgt_pers_key.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle58
 label "\[ value in1 ]"
 xpos 8720
 ypos 10801
}
Merge2 {
 inputs 2
 operation mask
 name Merge43
 label "Mix: \[ value mix ]"
 xpos 8720
 ypos 10864
}
Group {
 name Glow_Exponential6
 help "Exponential Glow node, with options to recolor and adjust falloff."
 knobChanged "\nk = nuke.thisKnob()\nif k.name()=='crop':\n    if k.value():\n        nuke.thisNode().knob('overscan').setEnabled(True)\n    else:\n        nuke.thisNode().knob('overscan').setEnabled(False)\n"
 tile_color 0xc97200ff
 xpos 8720
 ypos 10931
 addUserKnob {20 ge l Glow}
 addUserKnob {26 glow_ctrls l "@b;Glow:"}
 addUserKnob {7 size t "Size of the glow" R 0 100}
 size 6
 addUserKnob {7 intensity t "Brightness of the Glow" R 0 10}
 intensity 1
 addUserKnob {7 falloff t "Adjust the light falloff of the glow. Higher values will have a longer falloff, resulting in visually bigger glows."}
 falloff 0.75
 addUserKnob {26 glow_highlights l "@b;Highlights:"}
 addUserKnob {41 range t "Luma key to define which parts of the image will glow." T Keyer1.range}
 addUserKnob {26 glow_colors l "@b;Glow Colors:"}
 addUserKnob {7 saturation l "color from img" t "By default the glow takes on the colors of the plate. By using this knob you can desaturate the color of the glow."}
 saturation 1
 addUserKnob {18 core_color l "core re-color" t "Re-color the core of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 core_color {1 1 1}
 addUserKnob {6 core_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {18 falloff_color l "falloff re-color" t "Re-color the falloff of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 falloff_color {1 1 1}
 addUserKnob {6 falloff_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 threshold l "core threshold" t "Define which parts of the glow are core or falloff."}
 threshold 1
 addUserKnob {26 glow_options l "@b;Options:"}
 addUserKnob {14 aspect l "aspect ratio" t "Set the aspect ratio for your glow. Streaky results can be obtained by changing the ratio here." R 0 100}
 aspect {1 1}
 addUserKnob {6 glow_only l "Glow only" t "By default the glow is added onto the plate. Checking this box will output the glow only. " +STARTLINE}
 glow_only true
 addUserKnob {6 crop l "Crop to Format" t "This glow can expand the bounding box to massive values, checking this box can prevent your bbox from getting unmanageable." +STARTLINE}
 crop true
 addUserKnob {7 overscan l "overscan (%)" t "If you are cropping to format but originally had some values outside the format, you can add some overscan here to preserve these. The values are a percentage of the format size." R 0 100}
 overscan 10
 addUserKnob {7 mix t "Mix back with the original plate (or black, if glow only is enabled)"}
 mix 1
 addUserKnob {26 ""}
 addUserKnob {26 spin_copyright l "" t " <b>SPIN<span style=\"color:#b32026\">VFX</span></b>\nGlow_Exponential\nVersion 1.0\n2017" +STARTLINE T "<span style=\"color:#aaa;font-family:sans-serif;font-size:8pt\"><b>SPIN<span style=\"color:#b32026\">VFX</span></b> - Version 1.0 - 2017 - <a href=\"https://github.com/SpinVFX/spin_nuke_gizmos/\" style=\"color:#aaa\">Github Page</a></span>"}
}
 Input {
  inputs 0
  name img
  xpos 0
  ypos -59
 }
 Dot {
  name Dot1
  tile_color 0xcccccc00
  xpos 34
  ypos 50
 }
set N85fcd800 [stack 0]
 Dot {
  name Dot24
  tile_color 0xcccccc00
  xpos 34
  ypos 1274
 }
set N85ffa000 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 136
  ypos 158
  number 1
 }
push $N85fcd800
 NoOp {
  name CTRL
  xpos 304
  ypos 46
  addUserKnob {20 User}
  addUserKnob {7 falloff R 0 2}
  falloff {{"max(parent.falloff/2+0.5, 0.0001)"}}
  addUserKnob {7 falloff_intensity}
  falloff_intensity {{falloff+pow(falloff,2)+pow(falloff,3)+pow(falloff,4)+pow(falloff,5)+pow(falloff,6)+pow(falloff,7)+pow(falloff,8)+pow(falloff,9)+pow(falloff,10)}}
  addUserKnob {14 size R 0 100}
  size {{parent.size/20*parent.aspect.w} {parent.size/20*parent.aspect.h}}
  addUserKnob {7 intensity}
  intensity {{parent.intensity/falloff_intensity}}
  addUserKnob {7 core R 0 2}
  core {{threshold}}
  addUserKnob {7 core_length}
  core_length {{sqrt(pow(core_color.r,2)+pow(core_color.g,2)+pow(core_color.b,2))/sqrt(3)}}
  addUserKnob {7 falloff_length}
  falloff_length {{sqrt(pow(falloff_color.r,2)+pow(falloff_color.g,2)+pow(falloff_color.b,2))/sqrt(3)}}
 }
 Keyer {
  operation "luminance key"
  range {0 0.5091790611 1 1}
  name Keyer1
  xpos 304
  ypos 98
 }
 ChannelMerge {
  inputs 2
  operation in
  name ChannelMerge1
  xpos 304
  ypos 146
  disable {{"!\[exists parent.input1] "}}
 }
 Premult {
  name Premult1
  xpos 304
  ypos 202
 }
 Remove {
  operation keep
  channels rgb
  name Remove1
  xpos 304
  ypos 228
 }
 Multiply {
  value {{parent.CTRL.intensity}}
  name Multiplyer
  xpos 304
  ypos 263
 }
 Saturation {
  saturation {{parent.saturation}}
  name Saturation1
  xpos 304
  ypos 325
 }
 Dot {
  name Dot3
  tile_color 0x7aa9ff00
  xpos 338
  ypos 372
 }
set N68588000 [stack 0]
 Dot {
  name Dot2
  tile_color 0x7aa9ff00
  xpos 604
  ypos 372
 }
set N68588400 [stack 0]
 Dot {
  name Dot4
  tile_color 0x7aa9ff00
  xpos 870
  ypos 372
 }
set N68588800 [stack 0]
 Dot {
  name Dot5
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 372
 }
set N68588c00 [stack 0]
 Dot {
  name Dot6
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 372
 }
set N68589000 [stack 0]
 Dot {
  name Dot7
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 372
 }
set N68589400 [stack 0]
 Dot {
  name Dot8
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 372
 }
set N68589800 [stack 0]
 Dot {
  name Dot9
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 372
 }
set N68589c00 [stack 0]
 Dot {
  name Dot10
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 372
 }
set N685b0000 [stack 0]
 Dot {
  name Dot11
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 372
 }
 Blur {
  size {{Blur9.size*2} {Blur9.size*2}}
  crop false
  name Blur10
  xpos 2698
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,10)}}
  name Multiply10
  xpos 2698
  ypos 543
 }
 Dot {
  name Dot20
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 796
 }
push $N685b0000
 Blur {
  size {{Blur8.size*2} {Blur8.size*2}}
  crop false
  name Blur9
  xpos 2432
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,9)}}
  name Multiply9
  xpos 2432
  ypos 542
 }
 Dot {
  name Dot19
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 770
 }
push $N68589c00
 Blur {
  size {{Blur7.size*2} {Blur7.size*2}}
  crop false
  name Blur8
  xpos 2166
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,8)}}
  name Multiply8
  xpos 2166
  ypos 536
 }
 Dot {
  name Dot18
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 744
 }
push $N68589800
 Blur {
  size {{Blur6.size*2} {Blur6.size*2}}
  crop false
  name Blur7
  xpos 1900
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,7)}}
  name Multiply7
  xpos 1900
  ypos 528
 }
 Dot {
  name Dot17
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 718
 }
push $N68589400
 Blur {
  size {{Blur5.size*2} {Blur5.size*2}}
  crop false
  name Blur6
  xpos 1634
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,6)}}
  name Multiply6
  xpos 1634
  ypos 528
 }
 Dot {
  name Dot16
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 692
 }
push $N68589000
 Blur {
  size {{Blur4.size*2} {Blur4.size*2}}
  crop false
  name Blur5
  xpos 1368
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,5)}}
  name Multiply5
  xpos 1368
  ypos 524
 }
 Dot {
  name Dot15
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 666
 }
push $N68588c00
 Blur {
  size {{Blur3.size*2} {Blur3.size*2}}
  crop false
  name Blur4
  xpos 1102
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,4)}}
  name Multiply4
  xpos 1102
  ypos 518
 }
 Dot {
  name Dot14
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 640
 }
push $N68588800
 Blur {
  size {{Blur2.size*2} {Blur2.size*2}}
  crop false
  name Blur3
  xpos 836
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,3)}}
  name Multiply3
  xpos 836
  ypos 509
 }
 Dot {
  name Dot13
  tile_color 0x7aa9ff00
  xpos 870
  ypos 614
 }
push $N68588400
 Blur {
  size {{Blur1.size*2} {Blur1.size*2}}
  crop false
  name Blur2
  xpos 570
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,2)}}
  name Multiply2
  xpos 570
  ypos 508
 }
 Dot {
  name Dot12
  tile_color 0x7aa9ff00
  xpos 604
  ypos 588
 }
push $N68588000
 Blur {
  size {{CTRL.size*2} {CTRL.size*2}}
  crop false
  name Blur1
  xpos 304
  ypos 440
 }
 Multiply {
  value {{CTRL.falloff}}
  name Multiply1
  xpos 304
  ypos 512
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge1
  xpos 304
  ypos 584
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos 304
  ypos 610
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge3
  xpos 304
  ypos 636
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge4
  xpos 304
  ypos 662
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge5
  xpos 304
  ypos 688
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge6
  xpos 304
  ypos 714
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge7
  xpos 304
  ypos 740
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge8
  xpos 304
  ypos 766
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge9
  xpos 304
  ypos 792
 }
 Dot {
  name Dot21
  tile_color 0x4b5ec600
  xpos 338
  ypos 928
 }
set N85fcc400 [stack 0]
 Dot {
  name Dot22
  tile_color 0x4b5ec600
  xpos 498
  ypos 928
 }
 Grade {
  whitepoint {{CTRL.core}}
  white_clamp true
  name Grade2
  xpos 464
  ypos 977
 }
 Gamma {
  channels rgb
  value {{parent.falloff_color.r/CTRL.falloff_length} {parent.falloff_color.g/CTRL.falloff_length} {parent.falloff_color.b/CTRL.falloff_length} {curve}}
  name Gamma1
  xpos 464
  ypos 1037
 }
 Grade {
  whitepoint {{CTRL.core}}
  reverse true
  name Grade3
  xpos 464
  ypos 1082
 }
push $N85fcc400
 Clamp {
  minimum {{CTRL.core}}
  maximum_enable false
  name Clamp1
  xpos 304
  ypos 972
 }
 Grade {
  add {{1-CTRL.core}}
  name Grade4
  xpos 304
  ypos 1020
 }
 Gamma {
  channels rgb
  value {{1+(1-parent.core_color.r)/CTRL.core_length} {1+(1-parent.core_color.g)/CTRL.core_length} {1+(1-parent.core_color.b)/CTRL.core_length} {curve}}
  name Gamma2
  xpos 304
  ypos 1061
 }
 Add {
  channels rgb
  value -1
  name Add1
  xpos 304
  ypos 1087
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge10
  xpos 304
  ypos 1157
 }
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 304
  ypos 1183
 }
 Multiply {
  value {{parent.mix}}
  name mix
  xpos 304
  ypos 1217
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge11
  xpos 304
  ypos 1270
  disable {{parent.glow_only}}
 }
 Dot {
  name Dot23
  tile_color 0x4b5ec600
  xpos 338
  ypos 1436
 }
push $N85ffa000
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  name Copy1
  xpos 0
  ypos 1414
 }
 Crop {
  box {{-width*(parent.overscan/100)/2} {-height*(parent.overscan/100)/2} {width+(width*(parent.overscan/100)/2)} {height+(height*(parent.overscan/100)/2)}}
  crop false
  name Crop2
  xpos 0
  ypos 1495
  disable {{!parent.crop}}
 }
 Output {
  name Output1
  xpos 0
  ypos 1543
 }
end_group
Dot {
 name Dot164
 xpos 8754
 ypos 10988
}
push $N64ed5c00
Merge2 {
 inputs 2
 operation plus
 bbox B
 mix 0.1
 name Merge34
 xpos 9042
 ypos 10985
}
Dot {
 name Dot165
 xpos 9076
 ypos 11198
}
set N6b708400 [stack 0]
Dot {
 name Dot166
 xpos 8754
 ypos 11198
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_pers_fill
 fromInput2 {{0} B}
 mappings "4 lgt_pers_fill.red 0 0 rgba.red 0 0 lgt_pers_fill.green 0 1 rgba.green 0 1 lgt_pers_fill.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle59
 label "\[ value in1 ]"
 xpos 8720
 ypos 11245
}
Merge2 {
 inputs 2
 operation mask
 name Merge45
 label "Mix: \[ value mix ]"
 xpos 8720
 ypos 11311
}
Group {
 name Glow_Exponential7
 help "Exponential Glow node, with options to recolor and adjust falloff."
 knobChanged "\nk = nuke.thisKnob()\nif k.name()=='crop':\n    if k.value():\n        nuke.thisNode().knob('overscan').setEnabled(True)\n    else:\n        nuke.thisNode().knob('overscan').setEnabled(False)\n"
 tile_color 0xc97200ff
 xpos 8720
 ypos 11375
 addUserKnob {20 ge l Glow}
 addUserKnob {26 glow_ctrls l "@b;Glow:"}
 addUserKnob {7 size t "Size of the glow" R 0 100}
 size 8
 addUserKnob {7 intensity t "Brightness of the Glow" R 0 10}
 intensity 1
 addUserKnob {7 falloff t "Adjust the light falloff of the glow. Higher values will have a longer falloff, resulting in visually bigger glows."}
 falloff 0.75
 addUserKnob {26 glow_highlights l "@b;Highlights:"}
 addUserKnob {41 range t "Luma key to define which parts of the image will glow." T Keyer1.range}
 addUserKnob {26 glow_colors l "@b;Glow Colors:"}
 addUserKnob {7 saturation l "color from img" t "By default the glow takes on the colors of the plate. By using this knob you can desaturate the color of the glow."}
 saturation 1
 addUserKnob {18 core_color l "core re-color" t "Re-color the core of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 core_color {1 1 1}
 addUserKnob {6 core_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {18 falloff_color l "falloff re-color" t "Re-color the falloff of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 falloff_color {1 1 1}
 addUserKnob {6 falloff_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 threshold l "core threshold" t "Define which parts of the glow are core or falloff."}
 threshold 1
 addUserKnob {26 glow_options l "@b;Options:"}
 addUserKnob {14 aspect l "aspect ratio" t "Set the aspect ratio for your glow. Streaky results can be obtained by changing the ratio here." R 0 100}
 aspect {1 1}
 addUserKnob {6 glow_only l "Glow only" t "By default the glow is added onto the plate. Checking this box will output the glow only. " +STARTLINE}
 glow_only true
 addUserKnob {6 crop l "Crop to Format" t "This glow can expand the bounding box to massive values, checking this box can prevent your bbox from getting unmanageable." +STARTLINE}
 crop true
 addUserKnob {7 overscan l "overscan (%)" t "If you are cropping to format but originally had some values outside the format, you can add some overscan here to preserve these. The values are a percentage of the format size." R 0 100}
 overscan 10
 addUserKnob {7 mix t "Mix back with the original plate (or black, if glow only is enabled)"}
 mix 1
 addUserKnob {26 ""}
 addUserKnob {26 spin_copyright l "" t " <b>SPIN<span style=\"color:#b32026\">VFX</span></b>\nGlow_Exponential\nVersion 1.0\n2017" +STARTLINE T "<span style=\"color:#aaa;font-family:sans-serif;font-size:8pt\"><b>SPIN<span style=\"color:#b32026\">VFX</span></b> - Version 1.0 - 2017 - <a href=\"https://github.com/SpinVFX/spin_nuke_gizmos/\" style=\"color:#aaa\">Github Page</a></span>"}
}
 Input {
  inputs 0
  name img
  xpos 0
  ypos -59
 }
 Dot {
  name Dot1
  tile_color 0xcccccc00
  xpos 34
  ypos 50
 }
set N6b709000 [stack 0]
 Dot {
  name Dot24
  tile_color 0xcccccc00
  xpos 34
  ypos 1274
 }
set N6b709c00 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 136
  ypos 158
  number 1
 }
push $N6b709000
 NoOp {
  name CTRL
  xpos 304
  ypos 46
  addUserKnob {20 User}
  addUserKnob {7 falloff R 0 2}
  falloff {{"max(parent.falloff/2+0.5, 0.0001)"}}
  addUserKnob {7 falloff_intensity}
  falloff_intensity {{falloff+pow(falloff,2)+pow(falloff,3)+pow(falloff,4)+pow(falloff,5)+pow(falloff,6)+pow(falloff,7)+pow(falloff,8)+pow(falloff,9)+pow(falloff,10)}}
  addUserKnob {14 size R 0 100}
  size {{parent.size/20*parent.aspect.w} {parent.size/20*parent.aspect.h}}
  addUserKnob {7 intensity}
  intensity {{parent.intensity/falloff_intensity}}
  addUserKnob {7 core R 0 2}
  core {{threshold}}
  addUserKnob {7 core_length}
  core_length {{sqrt(pow(core_color.r,2)+pow(core_color.g,2)+pow(core_color.b,2))/sqrt(3)}}
  addUserKnob {7 falloff_length}
  falloff_length {{sqrt(pow(falloff_color.r,2)+pow(falloff_color.g,2)+pow(falloff_color.b,2))/sqrt(3)}}
 }
 Keyer {
  operation "luminance key"
  name Keyer1
  xpos 304
  ypos 98
 }
 ChannelMerge {
  inputs 2
  operation in
  name ChannelMerge1
  xpos 304
  ypos 146
  disable {{"!\[exists parent.input1] "}}
 }
 Premult {
  name Premult1
  xpos 304
  ypos 202
 }
 Remove {
  operation keep
  channels rgb
  name Remove1
  xpos 304
  ypos 228
 }
 Multiply {
  value {{parent.CTRL.intensity}}
  name Multiplyer
  xpos 304
  ypos 263
 }
 Saturation {
  saturation {{parent.saturation}}
  name Saturation1
  xpos 304
  ypos 325
 }
 Dot {
  name Dot3
  tile_color 0x7aa9ff00
  xpos 338
  ypos 372
 }
set N86086400 [stack 0]
 Dot {
  name Dot2
  tile_color 0x7aa9ff00
  xpos 604
  ypos 372
 }
set N86086800 [stack 0]
 Dot {
  name Dot4
  tile_color 0x7aa9ff00
  xpos 870
  ypos 372
 }
set N86086c00 [stack 0]
 Dot {
  name Dot5
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 372
 }
set N86087000 [stack 0]
 Dot {
  name Dot6
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 372
 }
set N6cc9fc00 [stack 0]
 Dot {
  name Dot7
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 372
 }
set N6ccc2400 [stack 0]
 Dot {
  name Dot8
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 372
 }
set N6ccc2000 [stack 0]
 Dot {
  name Dot9
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 372
 }
set N6ccc2800 [stack 0]
 Dot {
  name Dot10
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 372
 }
set N6ccc2c00 [stack 0]
 Dot {
  name Dot11
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 372
 }
 Blur {
  size {{Blur9.size*2} {Blur9.size*2}}
  crop false
  name Blur10
  xpos 2698
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,10)}}
  name Multiply10
  xpos 2698
  ypos 543
 }
 Dot {
  name Dot20
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 796
 }
push $N6ccc2c00
 Blur {
  size {{Blur8.size*2} {Blur8.size*2}}
  crop false
  name Blur9
  xpos 2432
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,9)}}
  name Multiply9
  xpos 2432
  ypos 542
 }
 Dot {
  name Dot19
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 770
 }
push $N6ccc2800
 Blur {
  size {{Blur7.size*2} {Blur7.size*2}}
  crop false
  name Blur8
  xpos 2166
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,8)}}
  name Multiply8
  xpos 2166
  ypos 536
 }
 Dot {
  name Dot18
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 744
 }
push $N6ccc2000
 Blur {
  size {{Blur6.size*2} {Blur6.size*2}}
  crop false
  name Blur7
  xpos 1900
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,7)}}
  name Multiply7
  xpos 1900
  ypos 528
 }
 Dot {
  name Dot17
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 718
 }
push $N6ccc2400
 Blur {
  size {{Blur5.size*2} {Blur5.size*2}}
  crop false
  name Blur6
  xpos 1634
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,6)}}
  name Multiply6
  xpos 1634
  ypos 528
 }
 Dot {
  name Dot16
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 692
 }
push $N6cc9fc00
 Blur {
  size {{Blur4.size*2} {Blur4.size*2}}
  crop false
  name Blur5
  xpos 1368
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,5)}}
  name Multiply5
  xpos 1368
  ypos 524
 }
 Dot {
  name Dot15
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 666
 }
push $N86087000
 Blur {
  size {{Blur3.size*2} {Blur3.size*2}}
  crop false
  name Blur4
  xpos 1102
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,4)}}
  name Multiply4
  xpos 1102
  ypos 518
 }
 Dot {
  name Dot14
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 640
 }
push $N86086c00
 Blur {
  size {{Blur2.size*2} {Blur2.size*2}}
  crop false
  name Blur3
  xpos 836
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,3)}}
  name Multiply3
  xpos 836
  ypos 509
 }
 Dot {
  name Dot13
  tile_color 0x7aa9ff00
  xpos 870
  ypos 614
 }
push $N86086800
 Blur {
  size {{Blur1.size*2} {Blur1.size*2}}
  crop false
  name Blur2
  xpos 570
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,2)}}
  name Multiply2
  xpos 570
  ypos 508
 }
 Dot {
  name Dot12
  tile_color 0x7aa9ff00
  xpos 604
  ypos 588
 }
push $N86086400
 Blur {
  size {{CTRL.size*2} {CTRL.size*2}}
  crop false
  name Blur1
  xpos 304
  ypos 440
 }
 Multiply {
  value {{CTRL.falloff}}
  name Multiply1
  xpos 304
  ypos 512
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge1
  xpos 304
  ypos 584
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos 304
  ypos 610
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge3
  xpos 304
  ypos 636
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge4
  xpos 304
  ypos 662
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge5
  xpos 304
  ypos 688
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge6
  xpos 304
  ypos 714
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge7
  xpos 304
  ypos 740
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge8
  xpos 304
  ypos 766
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge9
  xpos 304
  ypos 792
 }
 Dot {
  name Dot21
  tile_color 0x4b5ec600
  xpos 338
  ypos 928
 }
set N6cf13400 [stack 0]
 Dot {
  name Dot22
  tile_color 0x4b5ec600
  xpos 498
  ypos 928
 }
 Grade {
  whitepoint {{CTRL.core}}
  white_clamp true
  name Grade2
  xpos 464
  ypos 977
 }
 Gamma {
  channels rgb
  value {{parent.falloff_color.r/CTRL.falloff_length} {parent.falloff_color.g/CTRL.falloff_length} {parent.falloff_color.b/CTRL.falloff_length} {curve}}
  name Gamma1
  xpos 464
  ypos 1037
 }
 Grade {
  whitepoint {{CTRL.core}}
  reverse true
  name Grade3
  xpos 464
  ypos 1082
 }
push $N6cf13400
 Clamp {
  minimum {{CTRL.core}}
  maximum_enable false
  name Clamp1
  xpos 304
  ypos 972
 }
 Grade {
  add {{1-CTRL.core}}
  name Grade4
  xpos 304
  ypos 1020
 }
 Gamma {
  channels rgb
  value {{1+(1-parent.core_color.r)/CTRL.core_length} {1+(1-parent.core_color.g)/CTRL.core_length} {1+(1-parent.core_color.b)/CTRL.core_length} {curve}}
  name Gamma2
  xpos 304
  ypos 1061
 }
 Add {
  channels rgb
  value -1
  name Add1
  xpos 304
  ypos 1087
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge10
  xpos 304
  ypos 1157
 }
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 304
  ypos 1183
 }
 Multiply {
  value {{parent.mix}}
  name mix
  xpos 304
  ypos 1217
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge11
  xpos 304
  ypos 1270
  disable {{parent.glow_only}}
 }
 Dot {
  name Dot23
  tile_color 0x4b5ec600
  xpos 338
  ypos 1436
 }
push $N6b709c00
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  name Copy1
  xpos 0
  ypos 1414
 }
 Crop {
  box {{-width*(parent.overscan/100)/2} {-height*(parent.overscan/100)/2} {width+(width*(parent.overscan/100)/2)} {height+(height*(parent.overscan/100)/2)}}
  crop false
  name Crop2
  xpos 0
  ypos 1495
  disable {{!parent.crop}}
 }
 Output {
  name Output1
  xpos 0
  ypos 1543
 }
end_group
Dot {
 name Dot167
 xpos 8754
 ypos 11432
}
push $N6b708400
Merge2 {
 inputs 2
 operation plus
 bbox B
 mix 0.25
 name Merge35
 xpos 9042
 ypos 11429
}
Copy {
 inputs 2
 from0 depth.Z
 to0 depth.Z
 name Copy2
 xpos 9042
 ypos 12070
}
Merge2 {
 inputs 2
 operation plus
 mix 0.01
 name Merge40
 xpos 9042
 ypos 12467
}
Grade {
 gamma 0.5
 black_clamp false
 name Grade57
 xpos 9042
 ypos 12823
}
ZDefocus2 {
 math depth
 focal_point {790 408}
 size 2
 max_size 5
 name ZDefocus1
 label "Size: \[ value size ]"
 xpos 9042
 ypos 12871
 disable true
}
Grade {
 gamma {{parent.Grade57.gamma}}
 reverse true
 name Grade58
 xpos 9042
 ypos 12943
}
EdgeBlur {
 channels rgba
 controlchannel mask.a
 size 1.5
 name EdgeBlur2
 xpos 9042
 ypos 13458
}
Dot {
 name Dot102
 xpos 9076
 ypos 14850
}
push $N8a668400
Shuffle2 {
 fromInput1 {{0} B}
 in1 alpha
 out1 alpha
 fromInput2 {{0} B}
 mappings "1 rgba.alpha 0 0 rgba.alpha 0 0"
 name Shuffle9
 label "\[ value in1 ]"
 xpos 4717
 ypos -6100
}
Remove {
 operation keep
 channels alpha
 name Remove8
 xpos 4717
 ypos -6053
}
Dot {
 name _bg_alpha
 label "\[value name]"
 note_font_size 33
 xpos 4751
 ypos -5904
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N6870a400 [stack 0]
Dot {
 name Dot16
 label _bg_alpha
 note_font " Italic"
 note_font_size 22
 xpos 4532
 ypos 13208
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Invert {
 name Invert2
 xpos 4498
 ypos 13226
 disable true
}
Roto {
 inputs 0
 output alpha
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x43d68000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Ellipse1 512 bezier
     {{cc
       {f 8192}
       {p
        {xc2e9e480}
        {x44f44a23 xc39937c4}
        {x42e9e450}
        {0 xc30a7c44}
        {x450feddd x418283f1}
        {0 x430a7c44}
        {x42e9e450}
        {x44f44a23 x43431088}
        {xc2e9e480}
        {0 x430a7c44}
        {x44c2b88a x418283f2}
        {0 xc30a7c44}}}
      {cc
       {f 8192}
       {p
        {xc2e9e480}
        {0 xc28c0000}
        {x42e9e450}
        {0 xc30a7c44}
        {x43346660 x41c00009}
        {0 x430a7c44}
        {x42e9e450}
        {0 x42cf3330}
        {xc2e9e480}
        {0 x430a7c44}
        {xc2e73340 x42100001}
        {0 xc30a7c44}}}}
     {tx 1 x44db0800 x4400d000}
     {a osw x41200000 osf 0 str 1 spx x44800000 spy x43d68000 sb 1 tt x40e00000}}}}}}
 toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 tt 7 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 429}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_shutter_offset_type centred
 source_black_outside true
 name Roto1
 xpos 5062
 ypos 828
}
Blur {
 size 240
 name Blur1
 label "Size: \[ value size ]"
 xpos 5062
 ypos 880
}
Constant {
 inputs 0
 channels rgb
 color {0.4691718519 0.8131474853 4.787468433 0}
 name Constant2
 xpos 4848
 ypos 690
}
Grade {
 multiply 0.7
 name Grade4
 xpos 4848
 ypos 762
}
Grade {
 inputs 1+1
 white 4
 multiply {1.333333373 1.333333373 0.3333333731 1}
 name Grade19
 xpos 4848
 ypos 892
}
Dot {
 name Dot181
 xpos 4882
 ypos 2735
}
set N68744400 [stack 0]
Defocus {
 defocus 2
 name Defocus1
 label "Size: \[ value defocus ]"
 xpos 4848
 ypos 2911
}
Dot {
 name Dot69
 xpos 4882
 ypos 11390
}
set N6ce9a800 [stack 0]
Dot {
 name Dot72
 xpos 4718
 ypos 11390
}
Dot {
 name Dot74
 xpos 4718
 ypos 11631
}
push $N4be3bc00
Dot {
 name Dot21
 xpos 5724
 ypos -6207
}
set N4be3b800 [stack 0]
Dot {
 name Dot28
 xpos 6023
 ypos -6207
}
set N4be3b400 [stack 0]
Shuffle2 {
 fromInput1 {{0} B}
 in1 lighting
 out1 rgb
 fromInput2 {{0} B}
 mappings "3 lighting.green 0 1 rgba.green 0 1 lighting.red 0 0 rgba.red 0 0 lighting.blue 0 2 rgba.blue 0 2"
 name Shuffle25
 label "\[ value in1 ]"
 xpos 5989
 ypos -6155
}
push $N4be3b400
Dot {
 name Dot31
 xpos 6165
 ypos -6207
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 albedo
 out1 rgb
 fromInput2 {{0} B}
 mappings "3 albedo.red 0 0 rgba.red 0 0 albedo.green 0 1 rgba.green 0 1 albedo.blue 0 2 rgba.blue 0 2"
 name Shuffle26
 label "\[ value in1 ]"
 xpos 6131
 ypos -6146
}
Dot {
 name Dot36
 xpos 6165
 ypos -6064
}
Merge2 {
 inputs 2
 operation divide
 name Merge17
 xpos 5989
 ypos -6067
}
Shuffle2 {
 fromInput1 {{0} B}
 fromInput2 {{0} B}
 mappings "4 rgba.red 0 0 rgba.red 0 0 rgba.red 0 0 rgba.green 0 1 rgba.red 0 0 rgba.blue 0 2 rgba.red 0 0 rgba.alpha 0 3"
 name Shuffle27
 label "\[ value in1 ]"
 xpos 5989
 ypos -6043
}
Remove {
 operation keep
 channels rgba
 name Remove10
 xpos 5989
 ypos -5998
}
Clamp {
 name Clamp5
 xpos 5989
 ypos -5974
}
Invert {
 name Invert1
 xpos 5989
 ypos -5938
}
Grade {
 channels alpha
 blackpoint 0.6
 whitepoint 0.9
 white_clamp true
 name Grade30
 xpos 5989
 ypos -5887
}
Dot {
 name _bg_shadows
 label "\[value name]"
 note_font_size 33
 xpos 6023
 ypos -5794
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N61fae800 [stack 0]
Dot {
 name Dot80
 label _bg_shadows
 note_font " Italic"
 note_font_size 22
 xpos -245
 ypos 9690
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Grade {
 channels alpha
 white_clamp true
 name Grade70
 label "Mix: \[ value mix ]"
 xpos -279
 ypos 9802
}
Dot {
 name Dot81
 xpos -245
 ypos 9971
}
push $N4be3b800
Shuffle2 {
 fromInput1 {{0} B}
 in1 other
 out1 depth
 fromInput2 {{0} B}
 mappings "1 other.depth 0 0 depth.Z 0 0"
 name Shuffle4
 label "\[ value in1 ]"
 xpos 5690
 ypos -6145
 disable true
}
Remove {
 operation keep
 channels depth
 name Remove3
 xpos 5690
 ypos -6094
}
Dot {
 name _bg_depth
 label "\[value name]"
 note_font_size 33
 xpos 5724
 ypos -5963
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Dot {
 name Dot71
 label _bg_depth
 note_font " Italic"
 note_font_size 22
 xpos -120
 ypos 9523
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot8
 xpos -120
 ypos 9662
}
set N854e0800 [stack 0]
Shuffle2 {
 fromInput1 {{0} B}
 in1 depth
 fromInput2 {{0} B}
 mappings "4 depth.Z 0 0 rgba.red 0 0 depth.Z 0 0 rgba.green 0 1 depth.Z 0 0 rgba.blue 0 2 depth.Z 0 0 rgba.alpha 0 3"
 name Shuffle24
 label "\[ value in1 ]"
 xpos -154
 ypos 9696
}
Grade {
 name Grade7
 label "Mix: \[ value mix ]"
 xpos -154
 ypos 9776
}
ChannelMerge {
 inputs 2
 operation multiply
 name ChannelMerge1
 xpos -154
 ypos 9956
}
Dot {
 name Dot17
 xpos -120
 ypos 10042
}
Constant {
 inputs 0
 channels rgb
 color {0.6221666932 0.5466666818 0.7271667123 0.7827928066}
 name Constant1
 xpos -18
 ypos 9883
}
Merge2 {
 inputs 2
 operation mask
 name Merge14
 xpos -18
 ypos 10039
}
Dot {
 name Dot27
 xpos 16
 ypos 10126
}
push $N6870a400
Dot {
 name Dot106
 label _bg_alpha
 note_font " Italic"
 note_font_size 22
 xpos 97
 ypos 9586
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Constant {
 inputs 0
 channels {rgba.red -rgba.green -rgba.blue none}
 color {57 0 0 0}
 name Constant5
 xpos -23
 ypos 9540
}
push $N854e0800
Merge2 {
 inputs 2+1
 operation under
 Achannels rgb
 Bchannels depth
 output depth
 invert_mask true
 name Merge38
 xpos -23
 ypos 9653
 disable true
}
push $N61fae800
Dot {
 name Dot7
 label _bg_shadows
 note_font " Italic"
 note_font_size 22
 xpos -121
 ypos 6961
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot77
 xpos -121
 ypos 7037
}
Dot {
 name Dot78
 xpos -34
 ypos 7037
}
Grade {
 channels alpha
 blackpoint 0.8
 white_clamp true
 mix 0.5
 name Grade26
 xpos -68
 ypos 7110
}
Blur {
 channels alpha
 size 2
 name Blur4
 label "Size: \[ value size ]"
 xpos -68
 ypos 7183
}
push $N6ce9bc00
Dot {
 name Dot46
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos -529
 ypos -474
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.1285684854 0.0570955351 0.2283821404 0 254 271 255 272}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte6
 xpos -563
 ypos -406
}
push $N8a668800
Dot {
 name _bg_beauty
 label "\[value name]"
 note_font_size 33
 xpos 4495
 ypos -5931
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N85b94400 [stack 0]
Dot {
 name Dot44
 label _bg_beauty
 note_font " Italic"
 note_font_size 22
 xpos -348
 ypos -736
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 albedo
 fromInput2 {{0} B}
 mappings "4 albedo.red 0 0 rgba.red 0 0 albedo.green 0 1 rgba.green 0 1 albedo.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle10
 label "\[ value in1 ]"
 xpos -382
 ypos -670
}
Clamp {
 minimum 0.0001
 name Clamp1
 xpos -382
 ypos -613
}
Dot {
 name Dot58
 xpos -348
 ypos -552
}
set N85b95400 [stack 0]
Grade {
 inputs 1+1
 name Grade2
 label "Mix: \[ value mix ]"
 xpos -382
 ypos -412
}
Dot {
 name _bg_albedo
 label "\[value name]"
 note_font_size 33
 xpos -348
 ypos -237
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N85b95c00 [stack 0]
Dot {
 name Dot12
 label _bg_albedo
 note_font " Italic"
 note_font_size 22
 xpos 354
 ypos 7026
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot87
 xpos 354
 ypos 7198
}
push $N8a668000
Shuffle2 {
 fromInput1 {{0} B}
 in1 position
 out1 {P.red P.green P.blue P.alpha P.X P.Y P.Z}
 fromInput2 {{0} B}
 mappings "7 position.red 0 0 P.red 0 0 position.green 0 1 P.green 0 1 position.blue 0 2 P.blue 0 2 black -1 -1 P.alpha 0 3 black -1 -1 P.X 0 4 black -1 -1 P.Y 0 5 black -1 -1 P.Z 0 6"
 name Shuffle1
 label "\[ value in1 ]"
 xpos 4950
 ypos -6105
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 bumpNormals
 out1 N
 fromInput2 {{0} B}
 mappings "3 bumpNormals.X 0 0 N.X 0 0 bumpNormals.Y 0 1 N.Y 0 1 bumpNormals.Z 0 2 N.Z 0 2"
 name Shuffle16
 label "\[ value in1 ]"
 xpos 4950
 ypos -6069
}
Remove {
 operation keep
 channels P
 channels2 N
 name Remove1
 xpos 4950
 ypos -6032
}
Dot {
 name _bg_position
 label "\[value name]"
 note_font_size 33
 xpos 4984
 ypos -5905
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N68524c00 [stack 0]
Dot {
 name Dot70
 label _bg_position
 note_font " Italic"
 note_font_size 22
 xpos -145
 ypos 5332
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
xyzKey_v01 {
 name xyzKey_v01_6
 xpos -179
 ypos 5383
 in_1 P
 rot_sk 0
 sm 0
 lut {master {}
   red {}
   green {}
   blue {}
   alpha {curve C k 0 s0 L 1 s0}}
 in N
 sm_norm 0
 lut_1 {master {}
   red {}
   green {}
   blue {}
   alpha {curve L 0 1}}
}
push $N6ce9bc00
Dot {
 name Dot9
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos -213
 ypos 3582
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0 0 0 0 0 0 0 0}
 name Cryptomatte4
 xpos -247
 ypos 3628
}
push $N68744400
push $N6870a400
Dot {
 name Dot183
 label _bg_alpha
 note_font " Italic"
 note_font_size 22
 xpos 2465
 ypos 2506
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Invert {
 name Invert4
 xpos 2431
 ypos 2561
}
Camera2 {
 inputs 0
 read_from_file true
 translate {{curve x-30 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357 57.27162357} {curve x-30 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649 9.046010649} {curve x-30 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125 40.86970125}}
 rotate {{curve x-30 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.035971051 3.038098969 3.043708936 3.051640267 3.060732282 3.069824296 3.077755628 3.083365594 3.085493512 3.085459423 3.085384427 3.085309431 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342 3.085275342} {curve x-30 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.24542237 64.21368244 64.13000442 64.01170102 63.87608492 63.74046883 63.62216542 63.53848741 63.50674747 63.52103912 63.55248077 63.58392241 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406 63.59821406} {curve x-30 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -1.731924765e-16 -0 -0 1.753054039e-16 3.5230502e-16 -3.537813691e-16 -0 -0 -0 -1.773256411e-16 1.771299812e-16 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0}}
 scaling {{curve x-30 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1} {curve x-30 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1} {curve x-30 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1}}
 uniform_scale {{curve x-30 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1}}
 skew {{curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0} {curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0} {curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0}}
 pivot_translate {{curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0} {curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0} {curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0}}
 focal {{curve x-30 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45}}
 haperture {{curve x-30 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36 36}}
 vaperture {{curve x-30 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24}}
 near {{curve x-30 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15}}
 far {{curve x-30 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000}}
 win_translate {{curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0} {curve x-30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0}}
 win_scale {{curve x-30 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1} {curve x-30 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1}}
 focal_point {{curve x-30 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5}}
 fstop {{curve x-30 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905 5.599999905}}
 file //192.168.99.25/prj/cinderella/cache/ep04/sq18/sh030/src/shot_camera.abc
 suppress_dialog true
 name Camera3
 xpos 3987
 ypos -6577
}
Dot {
 name _camera
 label "\[value name]"
 note_font_size 33
 xpos 4011
 ypos -6417
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
set N650bd400 [stack 0]
Dot {
 name Dot182
 label _camera
 note_font " Italic"
 note_font_size 22
 xpos 2821
 ypos 2423
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
push $N650bd400
Dot {
 name Dot185
 label _camera
 note_font " Italic"
 note_font_size 22
 xpos 2235
 ypos 1747
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot186
 xpos 2235
 ypos 1819
}
set N68346000 [stack 0]
Dot {
 name Dot197
 xpos 3360
 ypos 2024
 hide_input true
}
Read {
 inputs 0
 file_type mov
 file O:/cinderella/tools/compositing/elements/Arctic_Frost_08.mp4
 format "4096 2160 0 0 4096 2160 1 4K_DCP"
 last 721
 origlast 721
 origset true
 colorspace color_picking
 in_colorspace scene_linear
 out_colorspace scene_linear
 name Read9
 xpos 10354
 ypos -6566
 disable true
}
Reformat {
 type scale
 scale 0.5
 name Reformat2
 xpos 10354
 ypos -6470
 disable true
}
Dot {
 name frost_2
 label "\[value name]"
 note_font_size 33
 xpos 10388
 ypos -6360
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Dot {
 name Dot187
 label frost_2
 note_font " Italic"
 note_font_size 22
 xpos 2560
 ypos 1572
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
FrameHold {
 firstFrame 132
 name FrameHold2
 xpos 2526
 ypos 1606
}
Transform {
 translate {799.5 -163}
 scale 0.45
 center {1024 540}
 name Transform3
 xpos 2526
 ypos 1642
}
Dot {
 name Dot195
 xpos 2560
 ypos 1686
}
set N62896000 [stack 0]
Dot {
 name Dot189
 xpos 2793
 ypos 1686
}
set N62896400 [stack 0]
Dot {
 name Dot191
 xpos 3032
 ypos 1686
}
set N62896800 [stack 0]
Dot {
 name Dot193
 xpos 3252
 ypos 1686
}
set N62896c00 [stack 0]
Dot {
 name Dot196
 xpos 3450
 ypos 1686
}
Transform {
 translate {-168 46}
 center {1024 429}
 name Transform4
 xpos 3419
 ypos 1884
}
Project3D2 {
 inputs 2
 name Project3D6
 xpos 3416
 ypos 2021
}
Card2 {
 image_aspect false
 translate {0.09999990463 11.26000023 -30.52000046}
 uniform_scale 4
 control_points {3 3 3 6 

1 {-0.5 -0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0 0 0} 
1 {0 -0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0.5 0 0} 
1 {0.5 -0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {1 0 0} 
1 {-0.5 0 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0 0.5 0} 
1 {0 0 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0.5 0.5 0} 
1 {0.5 0 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {1 0.5 0} 
1 {-0.5 0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0 1 0} 
1 {0 0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0.5 1 0} 
1 {0.5 0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {1 1 0} }
 name Card6
 xpos 3416
 ypos 2103
}
push $N68346000
push $N62896000
Dot {
 name Dot184
 xpos 2370
 ypos 1686
}
Project3D2 {
 inputs 2
 name Project3D1
 xpos 2336
 ypos 1816
}
Card2 {
 image_aspect false
 translate {-4.419999123 14.93999958 -30.52000046}
 uniform_scale 4
 control_points {3 3 3 6 

1 {-0.5 -0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0 0 0} 
1 {0 -0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0.5 0 0} 
1 {0.5 -0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {1 0 0} 
1 {-0.5 0 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0 0.5 0} 
1 {0 0 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0.5 0.5 0} 
1 {0.5 0 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {1 0.5 0} 
1 {-0.5 0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0 1 0} 
1 {0 0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0.5 1 0} 
1 {0.5 0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {1 1 0} }
 name Card2
 xpos 2336
 ypos 2088
}
push $N68346000
Dot {
 name Dot188
 xpos 2445
 ypos 1905
 hide_input true
}
push $N62896000
Project3D2 {
 inputs 2
 name Project3D2
 xpos 2526
 ypos 1902
}
Card2 {
 image_aspect false
 translate {-4.419999123 10.93999958 -30.52000046}
 uniform_scale 4
 control_points {3 3 3 6 

1 {-0.5 -0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0 0 0} 
1 {0 -0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0.5 0 0} 
1 {0.5 -0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {1 0 0} 
1 {-0.5 0 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0 0.5 0} 
1 {0 0 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0.5 0.5 0} 
1 {0.5 0 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {1 0.5 0} 
1 {-0.5 0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0 1 0} 
1 {0 0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0.5 1 0} 
1 {0.5 0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {1 1 0} }
 name Card3
 xpos 2526
 ypos 2096
}
push $N68346000
Dot {
 name Dot192
 xpos 2913
 ypos 2001
 hide_input true
}
push $N62896800
Transform {
 translate {33 -7.5}
 center {2019 387.5}
 name Transform2
 xpos 2998
 ypos 1795
}
Project3D2 {
 inputs 2
 name Project3D4
 xpos 2998
 ypos 1998
}
Card2 {
 image_aspect false
 translate {0.09999990463 18.68000031 -30.52000046}
 uniform_scale 4
 control_points {3 3 3 6 

1 {-0.5 -0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0 0 0} 
1 {0 -0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0.5 0 0} 
1 {0.5 -0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {1 0 0} 
1 {-0.5 0 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0 0.5 0} 
1 {0 0 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0.5 0.5 0} 
1 {0.5 0 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {1 0.5 0} 
1 {-0.5 0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0 1 0} 
1 {0 0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0.5 1 0} 
1 {0.5 0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {1 1 0} }
 name Card4
 xpos 2998
 ypos 2089
}
push $N68346000
Dot {
 name Dot194
 xpos 3145
 ypos 2018
 hide_input true
}
push $N62896c00
Project3D2 {
 inputs 2
 name Project3D5
 xpos 3218
 ypos 2015
}
Card2 {
 image_aspect false
 translate {0.09999990463 14.89999962 -30.52000046}
 uniform_scale 4
 control_points {3 3 3 6 

1 {-0.5 -0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0 0 0} 
1 {0 -0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0.5 0 0} 
1 {0.5 -0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {1 0 0} 
1 {-0.5 0 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0 0.5 0} 
1 {0 0 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0.5 0.5 0} 
1 {0.5 0 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {1 0.5 0} 
1 {-0.5 0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0 1 0} 
1 {0 0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0.5 1 0} 
1 {0.5 0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {1 1 0} }
 name Card5
 xpos 3218
 ypos 2103
}
set Neebc9000 [stack 0]
push $Neebc9000
push $N68346000
Dot {
 name Dot190
 xpos 2690
 ypos 1974
 hide_input true
}
push $N62896400
Project3D2 {
 inputs 2
 name Project3D3
 xpos 2759
 ypos 1971
}
Card2 {
 image_aspect false
 translate {-4.419999123 18.68000031 -30.52000046}
 uniform_scale 4
 control_points {3 3 3 6 

1 {-0.5 -0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0 0 0} 
1 {0 -0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {0.5 0 0} 
1 {0.5 -0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666865 0} 0 {0 0 0} 0 {1 0 0} 
1 {-0.5 0 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0 0.5 0} 
1 {0 0 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {0.5 0.5 0} 
1 {0.5 0 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0.1666666716 0} 0 {0 -0.1666666716 0} 0 {1 0.5 0} 
1 {-0.5 0.5 0} 0 {0.1666666865 0 0} 0 {0 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0 1 0} 
1 {0 0.5 0} 0 {0.1666666716 0 0} 0 {-0.1666666716 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {0.5 1 0} 
1 {0.5 0.5 0} 0 {0 0 0} 0 {-0.1666666865 0 0} 0 {0 0 0} 0 {0 -0.1666666865 0} 0 {1 1 0} }
 name Card1
 xpos 2759
 ypos 2092
}
Scene {
 inputs 7
 name Scene1
 xpos 2609
 ypos 2200
}
push 0
ScanlineRender {
 inputs 3
 conservative_shader_sampling false
 motion_vectors_type distance
 name ScanlineRender1
 xpos 2599
 ypos 2420
}
Keyer {
 operation "luminance key"
 name Keyer1
 xpos 2599
 ypos 2444
}
Merge2 {
 inputs 2
 operation mask
 bbox intersection
 name Merge44
 xpos 2599
 ypos 2567
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 name Merge46
 xpos 2599
 ypos 2732
}
Multiply {
 channels rgb
 name Multiply8
 label "Value: \[ value value ]"
 xpos 2599
 ypos 2801
}
Dot {
 name Dot198
 xpos 2633
 ypos 2949
}
push $N6870a400
Dot {
 name Dot42
 label _bg_alpha
 note_font " Italic"
 note_font_size 22
 xpos -16
 ypos 2657
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot43
 xpos -16
 ypos 2736
}
push $N6ce9bc00
Dot {
 name Dot53
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos -529
 ypos 2020
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.05553328618 0.07873702049 0.2400142252 0 1492 578 1493 579}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte9
 xpos -563
 ypos 2080
}
Dot {
 name Dot121
 xpos -529
 ypos 2169
}
push $N85b94400
Dot {
 name Dot54
 label _bg_beauty
 note_font " Italic"
 note_font_size 22
 xpos -357
 ypos 1796
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 refract
 fromInput2 {{0} B}
 mappings "4 refract.red 0 0 rgba.red 0 0 refract.green 0 1 rgba.green 0 1 refract.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle13
 label "\[ value in1 ]"
 xpos -391
 ypos 1836
}
Clamp {
 minimum 0.0001
 name Clamp4
 xpos -391
 ypos 1899
}
Dot {
 name Dot60
 xpos -357
 ypos 1987
}
set N63856000 [stack 0]
Multiply {
 inputs 1+1
 channels rgb
 name Multiply3
 label "Value: \[ value value ]"
 xpos -391
 ypos 2160
}
Dot {
 name Dot55
 xpos -359
 ypos 2428
}
push $N63856000
push $N6ce9bc00
Dot {
 name Dot50
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos -539
 ypos 1339
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.1637058258 0.1192932129 0.2271728516 0 224 603 225 604}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte8
 xpos -573
 ypos 1374
}
push $N85b94400
Dot {
 name Dot51
 label _bg_beauty
 note_font " Italic"
 note_font_size 22
 xpos -358
 ypos 1039
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 reflect
 fromInput2 {{0} B}
 mappings "4 reflect.red 0 0 rgba.red 0 0 reflect.green 0 1 rgba.green 0 1 reflect.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle12
 label "\[ value in1 ]"
 xpos -392
 ypos 1067
}
Clamp {
 minimum 0.0001
 name Clamp3
 xpos -392
 ypos 1103
}
Dot {
 name Dot59
 xpos -358
 ypos 1150
}
set N643ac400 [stack 0]
Multiply {
 inputs 1+1
 channels rgb
 name Multiply6
 label "Value: \[ value value ]"
 xpos -392
 ypos 1368
}
Dot {
 name Dot52
 xpos -358
 ypos 1584
}
push $N643ac400
push $N6ce9bc00
Dot {
 name Dot47
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos -533
 ypos 423
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 cryptoLayerChoice {{2} crypto_asset crypto_shape crypto_node crypto_mesh crypto_mat}
 pickerAdd {0.1347709894 0.1563358307 0.1253433228 0 232 42 233 43}
 pickerRemove {0.1872436553 0.08242664486 0.04010527208 1.000000119 71 235 72 236}
 matteList 47076
 lastSelectedCryptoLayerName crypto_node
 name Cryptomatte7
 xpos -567
 ypos 490
}
push $N85b94400
Dot {
 name Dot48
 label _bg_beauty
 note_font " Italic"
 note_font_size 22
 xpos -352
 ypos 154
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 specular
 fromInput2 {{0} B}
 mappings "4 specular.red 0 0 rgba.red 0 0 specular.green 0 1 rgba.green 0 1 specular.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle11
 label "\[ value in1 ]"
 xpos -386
 ypos 264
}
Clamp {
 minimum 0.0001
 maximum 35
 MaxClampTo_enable true
 name Clamp2
 xpos -386
 ypos 300
}
Dot {
 name Dot57
 xpos -352
 ypos 349
}
set N62895000 [stack 0]
Multiply {
 inputs 1+1
 channels rgb
 name Multiply2
 label "Value: \[ value value ]"
 xpos -386
 ypos 484
}
Dot {
 name Dot49
 xpos -352
 ypos 726
}
push $N62895000
push $N85b95c00
Dot {
 name Dot45
 xpos -348
 ypos -175
}
set N6c606000 [stack 0]
Dot {
 name Dot15
 xpos -348
 ypos -106
}
push $N6c606000
push $N85b95400
push $N68524c00
Dot {
 name Dot34
 label _bg_position
 note_font " Italic"
 note_font_size 22
 xpos 766
 ypos -3258
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
xyzKey_v01 {
 name xyzKey_v01_2
 xpos 732
 ypos -3186
 in_1 P
 rot_sk 0
 sm 0
 lut {master {}
   red {}
   green {}
   blue {}
   alpha {curve C k 0 s0 L 1 s0}}
 in N
 sm_norm 0
 lut_1 {master {}
   red {}
   green {}
   blue {}
   alpha {curve L 0 1}}
}
push $N6ce9bc00
Dot {
 name Dot35
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos 772
 ypos -3865
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.1771217138 0.113161616 0.115878053 0.08419210464 746 837 747 838}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte5
 xpos 738
 ypos -3823
}
push $N85b94400
Dot {
 name Dot20
 label _bg_beauty
 note_font " Italic"
 note_font_size 22
 xpos 186
 ypos -4590
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Dot {
 name Dot22
 xpos 186
 ypos -4491
}
set N82ea5800 [stack 0]
Dot {
 name Dot23
 xpos 1063
 ypos -4491
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_fill
 fromInput2 {{0} B}
 mappings "4 lgt_fill.red 0 0 rgba.red 0 0 lgt_fill.green 0 1 rgba.green 0 1 lgt_fill.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle6
 label "\[ value in1 ]"
 xpos 1029
 ypos -4279
}
Remove {
 operation keep
 channels rgb
 channels2 lgt_pers_fill
 name Remove5
 xpos 1029
 ypos -4243
}
Grade {
 name Grade17
 label "Mix: \[ value mix ]"
 xpos 1029
 ypos -4020
}
Grade {
 inputs 1+1
 name Grade10
 label "Mix: \[ value mix ]"
 xpos 1029
 ypos -3829
}
Grade {
 inputs 1+1
 name Grade3
 label "Mix: \[ value mix ]"
 xpos 1029
 ypos -3192
}
Shuffle2 {
 fromInput1 {{0} B}
 out1 lgt_pers_fill
 fromInput2 {{0} B}
 mappings "3 rgba.red 0 0 lgt_pers_fill.red 0 0 rgba.green 0 1 lgt_pers_fill.green 0 1 rgba.blue 0 2 lgt_pers_fill.blue 0 2"
 name Shuffle19
 label "\[ value in1 ]"
 xpos 1029
 ypos -2536
}
Dot {
 name Dot26
 xpos 1063
 ypos -2464
}
push $N68524c00
Dot {
 name Dot33
 label _bg_position
 note_font " Italic"
 note_font_size 22
 xpos -182
 ypos -3343
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
xyzKey_v01 {
 name xyzKey_v01_1
 xpos -216
 ypos -3191
 in_1 P
 rot_sk 0
 sm 0
 lut {master {}
   red {}
   green {}
   blue {}
   alpha {curve C k 0 s0 L 1 s0}}
 in N
 sm_norm 0
 lut_1 {master {}
   red {}
   green {}
   blue {}
   alpha {curve L 0 1}}
}
push $N6ce9bc00
Dot {
 name Dot32
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos 8
 ypos -3887
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.1771217138 0.113161616 0.115878053 0.08419210464 746 837 747 838}
 lastSelectedCryptoLayerName crypto_shape
 name Cryptomatte2
 xpos -26
 ypos -3824
}
push $N82ea5800
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_key
 fromInput2 {{0} B}
 mappings "4 lgt_key.red 0 0 rgba.red 0 0 lgt_key.green 0 1 rgba.green 0 1 lgt_key.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle5
 label "\[ value in1 ]"
 xpos 152
 ypos -4256
}
Remove {
 operation keep
 channels rgb
 name Remove4
 xpos 152
 ypos -4220
}
Grade {
 name Grade25
 label "Mix: \[ value mix ]"
 xpos 152
 ypos -4017
}
Grade {
 inputs 1+1
 name Grade83
 label "Mix: \[ value mix ]"
 xpos 152
 ypos -3830
}
Grade {
 inputs 1+1
 name Grade1
 label "Mix: \[ value mix ]"
 xpos 152
 ypos -3197
}
Shuffle2 {
 fromInput1 {{0} B}
 out1 lgt_pers_key
 fromInput2 {{0} B}
 mappings "3 rgba.red 0 0 lgt_pers_key.red 0 0 rgba.green 0 1 lgt_pers_key.green 0 1 rgba.blue 0 2 lgt_pers_key.blue 0 2"
 name Shuffle18
 label "\[ value in1 ]"
 xpos 152
 ypos -2522
}
Merge2 {
 inputs 2
 operation plus
 bbox B
 also_merge lgt_pers_fill
 name Merge3
 xpos 152
 ypos -2467
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide3
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 152
 ypos -561
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 also_merge albedo
 name Merge6
 xpos 152
 ypos -178
}
Shuffle2 {
 inputs 2
 fromInput1 {{1} B A}
 in1 rgb
 out1 albedo
 fromInput2 {{0} B A}
 mappings "3 rgba.red 0 0 albedo.red 0 0 rgba.green 0 1 albedo.green 0 1 rgba.blue 0 2 albedo.blue 0 2"
 name Shuffle23
 label "\[ value in1 ]"
 xpos 152
 ypos -115
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide1
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 152
 ypos 340
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 name Merge13
 xpos 152
 ypos 723
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide2
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 152
 ypos 1141
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 name Merge7
 xpos 152
 ypos 1581
}
MergeExpression {
 inputs 2
 expr0 "Ar == 0 ? Br : Br/Ar"
 expr1 "Ag == 0 ? Bg : Bg/Ag"
 expr2 "Ab == 0 ? Bb : Bb/Ab"
 expr3 "Aa == 0 ? Ba : Ba/Aa"
 name MergeDivide4
 label "( B / A )"
 note_font_color 0xffffffff
 xpos 152
 ypos 1978
}
Merge2 {
 inputs 2
 operation multiply
 bbox B
 name Merge8
 xpos 152
 ypos 2425
}
Copy {
 inputs 2
 from0 rgba.alpha
 to0 rgba.alpha
 name Copy6
 xpos 152
 ypos 2727
}
Premult {
 name Premult1
 xpos 152
 ypos 2781
 disable true
}
Merge2 {
 inputs 2
 bbox B
 name Merge47
 xpos 152
 ypos 2946
}
Unpremult {
 name Unpremult2
 xpos 152
 ypos 3011
}
Grade {
 white 1.05
 multiply {1.018333316 1.013333321 0.9683333039 1}
 name Grade9
 tile_color 0xff0000ff
 xpos 152
 ypos 3217
}
Saturation {
 saturation 0.95
 name Saturation1
 tile_color 0xff0000ff
 xpos 152
 ypos 3272
}
Grade {
 inputs 1+1
 name Grade6
 label "Mix: \[ value mix ]"
 xpos 152
 ypos 3622
}
Grade {
 inputs 1+1
 name Grade8
 label "Mix: \[ value mix ]"
 xpos 152
 ypos 5377
}
Merge2 {
 inputs 2+1
 operation screen
 Achannels albedo
 mix 0.05
 name Merge19
 xpos 152
 ypos 7195
}
Group {
 name BlacksMatch
 help "Choose a black point color or plug an image /constant you wish to be your blackpoint into BlackColor input.\n\nUse Mult Range to control how far above the blackpoint color to affect the lows\n\nUse the RollOff gamma to add fall off to the bottom of the curve\n\nTurn on the preview Plotscan and move the sampler over a region to see what your settings are doing to a linear 0-1 ramp.  This will help you see if you have weird curves, clamping or other funky problems as you adjust settings"
 knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\n\nif k.name() == \"inputChange\":\n    nsd = nuke.toNode(\"SwitchDefault\")\n    n\[\"defaultBlack\"].setEnabled(nsd\[\"which\"].getValue()==1)\n\nif k.name() == \"previewPlotScan\":\n    p = n.knob(\"previewPlotScan\").value()\n    if p == True:\n        n.knob(\"plotscanSampler\").setVisible(True)\n    else:\n        n.knob(\"plotscanSampler\").setVisible(False)"
 tile_color 0x1c1c1cff
 note_font "Helvetica Bold"
 xpos 152
 ypos 8005
 addUserKnob {20 BlacksMatch}
 addUserKnob {6 default_black_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 premultInput l "Premultiplied Input" +STARTLINE}
 premultInput true
 addUserKnob {4 mergeOp l Operation: t "Plus and Screen do the same thing with our operation, so I only included a hypot between plus/screen and hypot.  Hypot raises the mult by x2 because I thought that gave more pleasising results.  It will probably be a harsher curve (more towards clamp) than the plus/screen result)." M {Plus/Screen Hypot "" ""}}
 mergeOp Hypot
 addUserKnob {18 defaultBlack l "Default Black"}
 defaultBlack {0.02583334409 -0.01666665636 0.140833348}
 addUserKnob {6 defaultBlack_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 defaultBlack_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {26 ""}
 addUserKnob {7 multBase l "Mult Low Range" t "This is the Multiplier for the top of the \"toe\" curve.  It is multiplying the BlackPoint color by this number and setting it as the highest point weird the curve will influence the midtones and the highlights" R 1.5 10}
 multBase 2
 addUserKnob {7 rolloffGamma l "Rolloff Gamma" t "This controls the bottom of the curve, the falloff to where it is bending toward the \"cut off point\" which is out black color.  A lower value will act more like a clamp and a higher value will act more like a plus." R 0.1 1}
 rolloffGamma 0.15
 addUserKnob {4 minVal l "Min Value is:" M {"Toe Result" "Clamp Result" "" ""}}
 addUserKnob {6 previewPlotScan l "Preview PlotScan" t "Click to overlay a plotscan graph to show you how your black color is influenced by your settings." +STARTLINE}
 addUserKnob {12 plotscanSampler l "PlotScan Sampler" +HIDDEN}
 plotscanSampler {200 200}
 addUserKnob {6 color_rgb_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {41 maskChannelMask l mask -STARTLINE T MergeKeymix.maskChannelMask}
 addUserKnob {41 inject -STARTLINE T MergeKeymix.inject}
 addUserKnob {41 invert_mask l invert -STARTLINE T MergeKeymix.invert_mask}
 addUserKnob {41 fringe -STARTLINE T MergeKeymix.fringe}
 addUserKnob {41 mix T MergeKeymix.mix}
 addUserKnob {20 info l Info}
 addUserKnob {26 creator l Creator: T "<b><big>Tony Lyons"}
 addUserKnob {26 desc l Name: T BlacksMatch}
 addUserKnob {26 ver l Version: T v10}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0x556a5000
  label "This Creates a \nPer Channel Key\nBased on the Blackpoint"
  note_font_size 30
  note_font_color 0xffffffff
  xpos 991
  ypos -77
  bdwidth 314
  bdheight 421
 }
 StickyNote {
  inputs 0
  name StickyNote2
  tile_color 0xff
  label green
  note_font_size 41
  note_font_color 0xffffffff
  xpos 177
  ypos 466
 }
 StickyNote {
  inputs 0
  name StickyNote1
  tile_color 0xff
  label red
  note_font_size 41
  note_font_color 0xffffffff
  xpos 188
  ypos 350
 }
 StickyNote {
  inputs 0
  name StickyNote3
  tile_color 0xff
  label blue
  note_font_size 41
  note_font_color 0xffffffff
  xpos 186
  ypos 570
 }
 StickyNote {
  inputs 0
  name StickyNote4
  tile_color 0xff
  label "min will be \nblack color"
  note_font_size 31
  note_font_color 0xffffffff
  xpos 143
  ypos 733
 }
 Input {
  inputs 0
  name Inputimg
  xpos 322
  ypos -550
 }
 Dot {
  name Dot17
  xpos 356
  ypos -418
 }
set N49485800 [stack 0]
 AddChannels {
  channels rgba
  color 1
  name AddChannels1
  xpos 322
  ypos -365
 }
 Dot {
  name Dot5
  note_font_size 41
  xpos 356
  ypos -288
 }
set N8caee000 [stack 0]
 Grade {
  channels rgba
  white 0
  multiply 0
  add {{defaultBlack.r} {defaultBlack.g} {defaultBlack.b} 0}
  black_clamp false
  name Grade1
  label color
  xpos 922
  ypos -295
 }
 Input {
  inputs 0
  name InputBlackColor
  xpos 1138
  ypos -569
  number 1
 }
 Switch {
  inputs 2
  which {{"!\[exists parent.input1]"}}
  name SwitchDefault
  xpos 1138
  ypos -291
 }
 Dot {
  name Dot26
  label "Black Color"
  note_font_size 41
  xpos 1172
  ypos -212
 }
 Dot {
  name Dot4
  note_font_size 41
  xpos 1172
  ypos -151
 }
set N8caef400 [stack 0]
 Dot {
  name Dot36
  note_font_size 41
  xpos 1631
  ypos -151
 }
set N8caef800 [stack 0]
 Dot {
  name Dot16
  note_font_size 41
  xpos 2140
  ypos -151
 }
set N8caefc00 [stack 0]
 Crop {
  box {{plotscanSampler.x-2} {plotscanSampler.y-2} {plotscanSampler.x+2} {plotscanSampler.x+2}}
  reformat true
  crop false
  name Crop1
  xpos 2432
  ypos -154
  addUserKnob {20 User}
  addUserKnob {22 cropToBbox l "Crop to Bounding Box" -STARTLINE T codeBBox()}
  addUserKnob {22 cropToBbox_1 l "Crop to Bounding Box" -STARTLINE T codeBBox()}
 }
 Blur {
  channels rgb
  size 16
  name Blur1
  label "\[value size]"
  xpos 2432
  ypos -130
 }
 Reformat {
  format "512 512 0 0 512 512 1 square_512"
  name Reformat4
  xpos 2432
  ypos -92
 }
 Dot {
  name Dot12
  note_font_size 41
  xpos 2466
  ypos -43
 }
set N6b0b7000 [stack 0]
 Dot {
  name Dot47
  note_font_size 41
  xpos 2917
  ypos -43
 }
set N6b0b7400 [stack 0]
 Dot {
  name Dot42
  label "Black Color"
  note_font_size 41
  xpos 2917
  ypos 286
 }
 Dot {
  name Dot43
  note_font_size 41
  xpos 2917
  ypos 366
 }
set N6b0b7c00 [stack 0]
 Dot {
  name Dot44
  note_font_size 41
  xpos 2917
  ypos 480
 }
set N64684000 [stack 0]
 Dot {
  name Dot45
  note_font_size 41
  xpos 2917
  ypos 588
 }
set N64684400 [stack 0]
 Dot {
  name Dot31
  note_font_size 41
  xpos 2917
  ypos 656
 }
set N64684800 [stack 0]
push $N64684800
push $N6b0b7400
 Dot {
  name Dot11
  label "Black Color"
  note_font_size 41
  xpos 3426
  ypos -43
 }
 Multiply {
  channels rgb
  value 2
  name Multiply6
  label "mult black color"
  xpos 3392
  ypos 77
 }
 Reformat {
  inputs 0
  format "512 512 0 0 512 512 1 square_512"
  pbb true
  name Reformat1
  xpos 2711
  ypos 61
 }
 Ramp {
  p0 {0 0}
  p1 {512 0}
  name Ramp1
  xpos 2711
  ypos 93
 }
 Dot {
  name Dot1
  note_font_size 41
  xpos 2745
  ypos 154
 }
set N68388000 [stack 0]
 Dot {
  name Dot7
  note_font_size 41
  xpos 3138
  ypos 154
 }
set N68388400 [stack 0]
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide2
  xpos 3392
  ypos 151
 }
 Invert {
  channels rgb
  name Invert5
  xpos 3392
  ypos 175
 }
 Clamp {
  channels rgb
  name Clamp4
  xpos 3392
  ypos 199
 }
 Gamma {
  channels rgb
  value 0.5
  name Gamma4
  xpos 3392
  ypos 223
 }
 Dot {
  name Dot39
  xpos 3426
  ypos 366
 }
set N68389800 [stack 0]
 Dot {
  name Dot40
  xpos 3426
  ypos 480
 }
set N68389c00 [stack 0]
 Dot {
  name Dot41
  xpos 3426
  ypos 588
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle11
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 3277
  ypos 581
 }
push $N64684400
push $N68389c00
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle12
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 3276
  ypos 473
 }
push $N64684000
push $N68389800
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle13
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 3270
  ypos 359
 }
push $N6b0b7c00
push $N68388400
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge14
  label red
  xpos 3104
  ypos 359
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge15
  label green
  xpos 3104
  ypos 473
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge16
  label blue
  xpos 3104
  ypos 581
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge18
  label "Set Min Color\nto Blackpoint"
  xpos 3104
  ypos 644
 }
 Dot {
  name Dot46
  note_font_size 41
  xpos 3138
  ypos 742
 }
 Switch {
  inputs 2
  which {{minVal}}
  name SwitchMinColor1
  xpos 2883
  ypos 739
 }
push $N6b0b7000
 Multiply {
  channels rgb
  value {{multBase}}
  name Multiply3
  label "mult black color"
  xpos 2432
  ypos 63
 }
 Multiply {
  channels rgb
  value 2
  name Multiply4
  label "hypot Extra Mult\n"
  xpos 2432
  ypos 95
  disable {{"mergeOp == 1 ? 0 : 1"}}
 }
push $N68388000
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide1
  xpos 2432
  ypos 151
 }
 Invert {
  channels rgb
  name Invert2
  xpos 2432
  ypos 175
 }
 Clamp {
  channels rgb
  name Clamp2
  xpos 2432
  ypos 199
 }
 Gamma {
  channels rgb
  value {{rolloffGamma}}
  name Gamma2
  xpos 2432
  ypos 223
 }
 Dot {
  name Dot6
  xpos 2466
  ypos 366
 }
set N63b4c000 [stack 0]
 Dot {
  name Dot9
  xpos 2466
  ypos 480
 }
set N63b4c400 [stack 0]
 Dot {
  name Dot10
  xpos 2466
  ypos 588
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle4
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2511
  ypos 581
 }
push $N64684400
push $N63b4c400
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle5
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2511
  ypos 473
 }
push $N64684000
push $N63b4c000
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle6
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2517
  ypos 359
 }
push $N6b0b7c00
push $N68388000
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge2
  label red
  xpos 2711
  ypos 359
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge6
  label green
  xpos 2711
  ypos 473
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge7
  label blue
  xpos 2711
  ypos 581
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge8
  label "Set Min Color\nto Blackpoint"
  xpos 2711
  ypos 730
 }
 Group {
  name PlotScanline
  tile_color 0x9c0000ff
  xpos 2711
  ypos 805
  addUserKnob {20 Controls}
  addUserKnob {4 mode l "Sampling method" M {"Slice Per Pixel (faster)" "Slice Area (slower)" "Full Scanline" "" "" ""}}
  mode "Full Scanline"
  addUserKnob {6 add2image l "Add to original" +STARTLINE}
  addUserKnob {6 Normalize -STARTLINE}
  addUserKnob {6 tonemap l "Tone Map (HDRI)" -STARTLINE}
  addUserKnob {6 curve l "Plot as curve" +STARTLINE}
  curve true
  addUserKnob {3 curveFat l "Curve Thickness" -STARTLINE}
  addUserKnob {3 sa l "Sample Area" t "Disabled when using pr pixel method."}
  sa 1
  addUserKnob {7 lift l Lift R -1 1}
  addUserKnob {7 scale l Scale R 0 5}
  scale 1
  addUserKnob {26 ""}
  addUserKnob {12 p1 l "Start Point"}
  p1 {376 418}
  addUserKnob {12 p2 l "End Point" -STARTLINE}
  p2 {428.5 425.5}
  addUserKnob {26 ""}
  addUserKnob {26 "" l "About " T "Plot Scanline v0.4 | theo@euqahuba.com\nUse P1 to select your scanline and/or you start slice."}
 }
  Input {
   inputs 0
   name Input1
   xpos -480
   ypos 62
  }
set N621aa800 [stack 0]
  Expression {
   temp_name0 length
   temp_expr0 sqrt(r*r+g*g+b*b)
   expr0 r/length
   expr1 g/length
   expr2 b/length
   name Normalize
   xpos -480
   ypos 108
   disable {{1-parent.Normalize i}}
  }
  Expression {
   expr0 r/(r+1)
   expr1 g/(g+1)
   expr2 b/(b+1)
   name tonamap
   xpos -480
   ypos 134
   disable {{1-parent.tonemap i}}
  }
set N621ab000 [stack 0]
  Expression {
   temp_name0 rExpr
   temp_expr0 "min(max(0,\r\nceil(r(x,parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name1 gExpr
   temp_expr1 "min(max(0,\r\nceil(g(x,parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name2 bExpr
   temp_expr2 "min(max(0,\r\nceil(b(x,parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   expr0 rExpr
   expr1 gExpr
   expr2 bExpr
   expr3 0
   name scanline
   xpos -302
   ypos 193
   addUserKnob {20 User}
  }
push $N621ab000
  Expression {
   temp_name0 rExpr
   temp_expr0 "min(max(0,\r\nceil(r((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y,parent.sa,parent.sa)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name1 gExpr
   temp_expr1 "min(max(0,\r\nceil(g((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y,parent.sa,parent.sa)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name2 bExpr
   temp_expr2 "min(max(0,\r\nceil(b((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y,parent.sa,parent.sa)-((y/height+parent.lift)*parent.scale))),1)"
   expr0 rExpr
   expr1 gExpr
   expr2 bExpr
   expr3 0
   name Expression_highQuality
   xpos -515
   ypos 197
   addUserKnob {20 User}
  }
push $N621ab000
  Expression {
   temp_name0 rExpr
   temp_expr0 "min(max(0,\r\nceil(r((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name1 gExpr
   temp_expr1 "min(max(0,\r\nceil(g((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   temp_name2 bExpr
   temp_expr2 "min(max(0,\r\nceil(b((x/width)*(parent.p2.x-parent.p1.x)+parent.p1.x,(x/width)*(parent.p2.y-parent.p1.y)+parent.p1.y)-((y/height+parent.lift)*parent.scale))),1)"
   expr0 rExpr
   expr1 gExpr
   expr2 bExpr
   expr3 0
   name perPixel
   xpos -419
   ypos 201
   addUserKnob {20 User}
  }
  Switch {
   inputs 3
   which {{parent.mode i}}
   name Switch2
   xpos -480
   ypos 253
  }
  Matrix {
   matrix {
       {0 1 0}
       {1 -4 1}
       {0 1 0}
     }
   name Matrix2
   xpos -480
   ypos 284
   disable {{-1+parent.curve i x70 1}}
  }
  Dilate {
   size {{parent.curveFat}}
   name Dilate1
   xpos -480
   ypos 326
   disable {{-1+parent.curve.main}}
  }
  Clamp {
   name Clamp1
   xpos -480
   ypos 383
  }
set N850a2c00 [stack 0]
push $N621aa800
  Dot {
   name Dot1
   xpos -556
   ypos 66
  }
  Clamp {
   maximum 331
   name Clamp2
   xpos -590
   ypos 352
  }
  Merge2 {
   inputs 2
   operation plus
   bbox intersection
   name Merge1
   xpos -590
   ypos 394
  }
  Dot {
   name Dot2
   xpos -556
   ypos 433
  }
push $N850a2c00
  Switch {
   inputs 2
   which {{parent.add2image i}}
   name Switch1
   xpos -480
   ypos 430
  }
  Output {
   name Output1
   xpos -480
   ypos 470
  }
 end_group
 Dot {
  name Dot15
  note_font_size 41
  xpos 2745
  ypos 857
 }
set N6af00800 [stack 0]
 Shuffle {
  red white
  green white
  blue white
  alpha white
  name Shuffle7
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 2821
  ypos 850
 }
 BlackOutside {
  name BlackOutside1
  xpos 2821
  ypos 882
 }
 Dilate {
  channels rgba
  size -2
  name Dilate1
  xpos 2821
  ypos 910
 }
 Invert {
  name Invert3
  xpos 2821
  ypos 934
 }
push $N6af00800
 Merge2 {
  inputs 2
  name Merge9
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 2711
  ypos 938
 }
 Group {
  name BinaryAlpha
  tile_color 0x2a2a2aff
  label "(\[value an] --> \[value output1])"
  note_font Verdana
  note_font_color 0xfffff9ff
  xpos 2711
  ypos 983
  addUserKnob {20 BinaryAlpha}
  addUserKnob {4 an l Analyze: M {rgb rgba alpha "" "" ""}}
  addUserKnob {4 output1 l Output: M {rgba alpha "" "" "" ""}}
  output1 alpha
  addUserKnob {20 info l Info}
  addUserKnob {26 creator l Creator: T "<b><big>Tony Lyons"}
  addUserKnob {26 desc l Description: t "Analyzes channel input and creates a binary result 0 or 1 and outputs it into output channel" T BinaryAlpha}
  addUserKnob {26 ver l Version: T v03}
 }
  Input {
   inputs 0
   name Input
   xpos -398
   ypos 275
  }
  Expression {
   temp_name0 rgb_an
   temp_expr0 "r !=0 || g!=0 || b!=0?1:0"
   temp_name1 rgba_an
   temp_expr1 "r!=0 || g!=0 || b!=0 || a!=0?1:0"
   temp_name2 alpha_an
   temp_expr2 a!=0?1:0
   expr3 "parent.an == 0 ? rgb_an : parent.an == 1 ? rgba_an : alpha_an"
   name Expression
   xpos -398
   ypos 341
  }
  Shuffle {
   red alpha
   green alpha
   blue alpha
   name Shuffle
   label "\[value in]"
   xpos -398
   ypos 367
   disable {{parent.output1}}
  }
  Output {
   name Output1
   xpos -398
   ypos 456
  }
 end_group
 Reformat {
  type "to box"
  box_height {{"\[exists parent.input0] ? parent.input.height : root.format.height"}}
  resize height
  filter impulse
  pbb true
  name Reformat2
  xpos 2711
  ypos 1041
 }
 Reformat {
  type "to box"
  box_width {{"\[exists parent.input0] ? parent.input.width : root.format.width"}}
  box_height {{input.height}}
  resize none
  filter impulse
  black_outside true
  pbb true
  name Reformat3
  xpos 2711
  ypos 1081
 }
 Dilate {
  channels rgba
  size 1
  name Dilate2
  xpos 2711
  ypos 1121
 }
 Dot {
  name Dot14
  note_font_size 41
  xpos 2745
  ypos 1192
 }
 Input {
  inputs 0
  name Inputmask
  xpos 864
  ypos 878
  number 2
 }
 Dot {
  name Dot29
  xpos 898
  ypos 1015
 }
push $N8caef800
 Dot {
  name Dot33
  label "Black Color"
  note_font_size 41
  xpos 1631
  ypos 295
 }
 Dot {
  name Dot37
  note_font_size 41
  xpos 1631
  ypos 360
 }
set Neebed400 [stack 0]
 Dot {
  name Dot34
  note_font_size 41
  xpos 1631
  ypos 474
 }
set Neebed800 [stack 0]
 Dot {
  name Dot35
  note_font_size 41
  xpos 1631
  ypos 582
 }
set Neebedc00 [stack 0]
 Dot {
  name Dot13
  note_font_size 41
  xpos 1631
  ypos 674
 }
set N8ae16000 [stack 0]
push $N8ae16000
push $N8caefc00
 Multiply {
  channels rgb
  value 2
  name Multiply7
  label "mult black color"
  xpos 2106
  ypos 87
 }
push $N8caee000
 Unpremult {
  name Unpremult1
  xpos 322
  ypos -16
  disable {{"! premultInput"}}
 }
 Dot {
  name Dot18
  xpos 356
  ypos 145
 }
set N8ae16c00 [stack 0]
 Dot {
  name Dot22
  note_font_size 41
  xpos 1028
  ypos 145
 }
set N8ae17000 [stack 0]
 Dot {
  name Dot32
  note_font_size 41
  xpos 1852
  ypos 145
 }
set N8ae17400 [stack 0]
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide3
  xpos 2106
  ypos 142
 }
 Invert {
  channels rgb
  name Invert4
  xpos 2106
  ypos 166
 }
 Clamp {
  channels rgb
  name Clamp3
  xpos 2106
  ypos 190
 }
 Gamma {
  channels rgb
  value 0.51
  name Gamma3
  xpos 2106
  ypos 214
 }
 Dot {
  name Dot24
  xpos 2140
  ypos 360
 }
set N6508a800 [stack 0]
 Dot {
  name Dot25
  xpos 2140
  ypos 474
 }
set N6508ac00 [stack 0]
 Dot {
  name Dot27
  xpos 2140
  ypos 582
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle8
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1990
  ypos 575
 }
push $Neebedc00
push $N6508ac00
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle9
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1990
  ypos 467
 }
push $Neebed800
push $N6508a800
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle10
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1984
  ypos 353
 }
push $Neebed400
push $N8ae17400
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge11
  label red
  xpos 1818
  ypos 353
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge12
  label green
  xpos 1818
  ypos 467
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge13
  label blue
  xpos 1818
  ypos 575
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge17
  label "Set Min Color\nto Blackpoint"
  xpos 1818
  ypos 662
 }
 Dot {
  name Dot38
  note_font_size 41
  xpos 1852
  ypos 760
 }
 Switch {
  inputs 2
  which {{minVal}}
  name SwitchMinColor
  xpos 1597
  ypos 757
 }
push $N8caef400
 Multiply {
  channels rgb
  value {{multBase}}
  name Multiply1
  label "mult black color"
  xpos 1138
  ypos 52
 }
 Multiply {
  channels rgb
  value 2
  name Multiply2
  label "hypot Extra Mult\n"
  xpos 1138
  ypos 84
  disable {{"mergeOp == 1 ? 0 : 1"}}
 }
push $N8ae17000
 MergeExpression {
  inputs 2
  expr0 Br/Ar
  expr1 Bg/Ag
  expr2 Bb/Ab
  name MergeDivide
  xpos 1138
  ypos 194
 }
 Invert {
  channels rgb
  name Invert1
  xpos 1138
  ypos 239
 }
 Clamp {
  channels rgb
  name Clamp1
  xpos 1138
  ypos 263
 }
 Gamma {
  channels rgb
  value {{rolloffGamma}}
  name Gamma1
  xpos 1138
  ypos 287
 }
 Dot {
  name Dot19
  xpos 1172
  ypos 364
 }
set N8575b000 [stack 0]
 Dot {
  name Dot20
  xpos 1172
  ypos 478
 }
set N8575b400 [stack 0]
 Dot {
  name Dot21
  xpos 1172
  ypos 586
 }
 Shuffle {
  red blue
  green blue
  alpha blue
  name Shuffle3
  tile_color 0x3fbfff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1022
  ypos 579
 }
push $N8caef400
 Dot {
  name Dot23
  xpos 706
  ypos -151
 }
 Dot {
  name Dot8
  label "Black Color"
  note_font_size 41
  xpos 706
  ypos 293
 }
set N8d590400 [stack 0]
 Dot {
  name Dot2
  note_font_size 41
  xpos 706
  ypos 404
 }
set N8d590800 [stack 0]
 Dot {
  name Dot3
  note_font_size 41
  xpos 706
  ypos 523
 }
push $N8575b400
 Shuffle {
  red green
  blue green
  alpha green
  name Shuffle2
  tile_color 0xbf00ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1022
  ypos 471
 }
push $N8d590800
push $N8575b000
 Shuffle {
  green red
  blue red
  alpha red
  name Shuffle1
  tile_color 0xbf0000ff
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat --> \[value out2]] \}]"
  xpos 1016
  ypos 357
 }
push $N8d590400
push $N8ae16c00
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge3
  label red
  xpos 322
  ypos 357
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge4
  label green
  xpos 322
  ypos 471
 }
 Merge2 {
  inputs 2+1
  operation {{parent.Settings.mergeOpNum}}
  bbox B
  Achannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  Bchannels {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  maskChannelInput -rgba.red
  name Merge5
  label blue
  xpos 322
  ypos 579
 }
 Merge2 {
  inputs 2
  operation max
  bbox B
  Achannels rgb
  Bchannels rgb
  output rgb
  name Merge1
  label "Set Min Color\nto Blackpoint"
  xpos 322
  ypos 748
 }
 Premult {
  name Premult4
  xpos 322
  ypos 881
  disable {{"! premultInput"}}
 }
push $N49485800
 Dot {
  name Dot28
  xpos -146
  ypos -418
 }
 Dot {
  name Dot30
  xpos -146
  ypos 1015
 }
 Merge2 {
  inputs 2+1
  operation copy
  bbox B
  Achannels {rgba.red rgba.green rgba.blue -rgba.alpha}
  Bchannels {rgba.red rgba.green rgba.blue -rgba.alpha}
  output {rgba.red rgba.green rgba.blue -rgba.alpha}
  mix 0.05
  name MergeKeymix
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 322
  ypos 1012
 }
 Merge2 {
  inputs 2
  name Merge10
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 322
  ypos 1189
  disable {{!previewPlotScan}}
 }
 Output {
  name Output1
  xpos 322
  ypos 1395
 }
 NoOp {
  inputs 0
  name Settings
  note_font_size 51
  xpos 2494
  ypos -414
  addUserKnob {20 User}
  addUserKnob {7 mergeOpNum l "Merge Op Num"}
  mergeOpNum {{"mergeOp == 0 ? 24 : 13"}}
 }
end_group
Premult {
 name Premult3
 xpos 152
 ypos 8095
}
Dot {
 name Dot64
 xpos 186
 ypos 8441
}
set N918a4c00 [stack 0]
Dot {
 name Dot67
 xpos -136
 ypos 8441
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_pers_key
 fromInput2 {{0} B}
 mappings "4 lgt_pers_key.red 0 0 rgba.red 0 0 lgt_pers_key.green 0 1 rgba.green 0 1 lgt_pers_key.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle15
 label "\[ value in1 ]"
 xpos -170
 ypos 8488
}
Group {
 name Glow_Exponential
 help "Exponential Glow node, with options to recolor and adjust falloff."
 knobChanged "\nk = nuke.thisKnob()\nif k.name()=='crop':\n    if k.value():\n        nuke.thisNode().knob('overscan').setEnabled(True)\n    else:\n        nuke.thisNode().knob('overscan').setEnabled(False)\n"
 tile_color 0xc97200ff
 xpos -170
 ypos 8571
 addUserKnob {20 ge l Glow}
 addUserKnob {26 glow_ctrls l "@b;Glow:"}
 addUserKnob {7 size t "Size of the glow" R 0 100}
 size 6
 addUserKnob {7 intensity t "Brightness of the Glow" R 0 10}
 intensity 1
 addUserKnob {7 falloff t "Adjust the light falloff of the glow. Higher values will have a longer falloff, resulting in visually bigger glows."}
 falloff 0.75
 addUserKnob {26 glow_highlights l "@b;Highlights:"}
 addUserKnob {41 range t "Luma key to define which parts of the image will glow." T Keyer1.range}
 addUserKnob {26 glow_colors l "@b;Glow Colors:"}
 addUserKnob {7 saturation l "color from img" t "By default the glow takes on the colors of the plate. By using this knob you can desaturate the color of the glow."}
 saturation 1
 addUserKnob {18 core_color l "core re-color" t "Re-color the core of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 core_color {1 1 1}
 addUserKnob {6 core_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {18 falloff_color l "falloff re-color" t "Re-color the falloff of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 falloff_color {1 1 1}
 addUserKnob {6 falloff_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 threshold l "core threshold" t "Define which parts of the glow are core or falloff."}
 threshold 1
 addUserKnob {26 glow_options l "@b;Options:"}
 addUserKnob {14 aspect l "aspect ratio" t "Set the aspect ratio for your glow. Streaky results can be obtained by changing the ratio here." R 0 100}
 aspect {1 1}
 addUserKnob {6 glow_only l "Glow only" t "By default the glow is added onto the plate. Checking this box will output the glow only. " +STARTLINE}
 glow_only true
 addUserKnob {6 crop l "Crop to Format" t "This glow can expand the bounding box to massive values, checking this box can prevent your bbox from getting unmanageable." +STARTLINE}
 crop true
 addUserKnob {7 overscan l "overscan (%)" t "If you are cropping to format but originally had some values outside the format, you can add some overscan here to preserve these. The values are a percentage of the format size." R 0 100}
 overscan 10
 addUserKnob {7 mix t "Mix back with the original plate (or black, if glow only is enabled)"}
 mix 1
 addUserKnob {26 ""}
 addUserKnob {26 spin_copyright l "" t " <b>SPIN<span style=\"color:#b32026\">VFX</span></b>\nGlow_Exponential\nVersion 1.0\n2017" +STARTLINE T "<span style=\"color:#aaa;font-family:sans-serif;font-size:8pt\"><b>SPIN<span style=\"color:#b32026\">VFX</span></b> - Version 1.0 - 2017 - <a href=\"https://github.com/SpinVFX/spin_nuke_gizmos/\" style=\"color:#aaa\">Github Page</a></span>"}
}
 Input {
  inputs 0
  name img
  xpos 0
  ypos -59
 }
 Dot {
  name Dot1
  tile_color 0xcccccc00
  xpos 34
  ypos 50
 }
set N918a5c00 [stack 0]
 Dot {
  name Dot24
  tile_color 0xcccccc00
  xpos 34
  ypos 1274
 }
set N8d798000 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 136
  ypos 158
  number 1
 }
push $N918a5c00
 NoOp {
  name CTRL
  xpos 304
  ypos 46
  addUserKnob {20 User}
  addUserKnob {7 falloff R 0 2}
  falloff {{"max(parent.falloff/2+0.5, 0.0001)"}}
  addUserKnob {7 falloff_intensity}
  falloff_intensity {{falloff+pow(falloff,2)+pow(falloff,3)+pow(falloff,4)+pow(falloff,5)+pow(falloff,6)+pow(falloff,7)+pow(falloff,8)+pow(falloff,9)+pow(falloff,10)}}
  addUserKnob {14 size R 0 100}
  size {{parent.size/20*parent.aspect.w} {parent.size/20*parent.aspect.h}}
  addUserKnob {7 intensity}
  intensity {{parent.intensity/falloff_intensity}}
  addUserKnob {7 core R 0 2}
  core {{threshold}}
  addUserKnob {7 core_length}
  core_length {{sqrt(pow(core_color.r,2)+pow(core_color.g,2)+pow(core_color.b,2))/sqrt(3)}}
  addUserKnob {7 falloff_length}
  falloff_length {{sqrt(pow(falloff_color.r,2)+pow(falloff_color.g,2)+pow(falloff_color.b,2))/sqrt(3)}}
 }
 Keyer {
  operation "luminance key"
  range {0 0.5091790611 1 1}
  name Keyer1
  xpos 304
  ypos 98
 }
 ChannelMerge {
  inputs 2
  operation in
  name ChannelMerge1
  xpos 304
  ypos 146
  disable {{"!\[exists parent.input1] "}}
 }
 Premult {
  name Premult1
  xpos 304
  ypos 202
 }
 Remove {
  operation keep
  channels rgb
  name Remove1
  xpos 304
  ypos 228
 }
 Multiply {
  value {{parent.CTRL.intensity}}
  name Multiplyer
  xpos 304
  ypos 263
 }
 Saturation {
  saturation {{parent.saturation}}
  name Saturation1
  xpos 304
  ypos 325
 }
 Dot {
  name Dot3
  tile_color 0x7aa9ff00
  xpos 338
  ypos 372
 }
set N8ed04400 [stack 0]
 Dot {
  name Dot2
  tile_color 0x7aa9ff00
  xpos 604
  ypos 372
 }
set N8ed04800 [stack 0]
 Dot {
  name Dot4
  tile_color 0x7aa9ff00
  xpos 870
  ypos 372
 }
set N8ed04c00 [stack 0]
 Dot {
  name Dot5
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 372
 }
set N8ed05000 [stack 0]
 Dot {
  name Dot6
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 372
 }
set N8ed05400 [stack 0]
 Dot {
  name Dot7
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 372
 }
set N8ed05800 [stack 0]
 Dot {
  name Dot8
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 372
 }
set N8ed05c00 [stack 0]
 Dot {
  name Dot9
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 372
 }
set N33674000 [stack 0]
 Dot {
  name Dot10
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 372
 }
set N33674400 [stack 0]
 Dot {
  name Dot11
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 372
 }
 Blur {
  size {{Blur9.size*2} {Blur9.size*2}}
  crop false
  name Blur10
  xpos 2698
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,10)}}
  name Multiply10
  xpos 2698
  ypos 543
 }
 Dot {
  name Dot20
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 796
 }
push $N33674400
 Blur {
  size {{Blur8.size*2} {Blur8.size*2}}
  crop false
  name Blur9
  xpos 2432
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,9)}}
  name Multiply9
  xpos 2432
  ypos 542
 }
 Dot {
  name Dot19
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 770
 }
push $N33674000
 Blur {
  size {{Blur7.size*2} {Blur7.size*2}}
  crop false
  name Blur8
  xpos 2166
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,8)}}
  name Multiply8
  xpos 2166
  ypos 536
 }
 Dot {
  name Dot18
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 744
 }
push $N8ed05c00
 Blur {
  size {{Blur6.size*2} {Blur6.size*2}}
  crop false
  name Blur7
  xpos 1900
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,7)}}
  name Multiply7
  xpos 1900
  ypos 528
 }
 Dot {
  name Dot17
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 718
 }
push $N8ed05800
 Blur {
  size {{Blur5.size*2} {Blur5.size*2}}
  crop false
  name Blur6
  xpos 1634
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,6)}}
  name Multiply6
  xpos 1634
  ypos 528
 }
 Dot {
  name Dot16
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 692
 }
push $N8ed05400
 Blur {
  size {{Blur4.size*2} {Blur4.size*2}}
  crop false
  name Blur5
  xpos 1368
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,5)}}
  name Multiply5
  xpos 1368
  ypos 524
 }
 Dot {
  name Dot15
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 666
 }
push $N8ed05000
 Blur {
  size {{Blur3.size*2} {Blur3.size*2}}
  crop false
  name Blur4
  xpos 1102
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,4)}}
  name Multiply4
  xpos 1102
  ypos 518
 }
 Dot {
  name Dot14
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 640
 }
push $N8ed04c00
 Blur {
  size {{Blur2.size*2} {Blur2.size*2}}
  crop false
  name Blur3
  xpos 836
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,3)}}
  name Multiply3
  xpos 836
  ypos 509
 }
 Dot {
  name Dot13
  tile_color 0x7aa9ff00
  xpos 870
  ypos 614
 }
push $N8ed04800
 Blur {
  size {{Blur1.size*2} {Blur1.size*2}}
  crop false
  name Blur2
  xpos 570
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,2)}}
  name Multiply2
  xpos 570
  ypos 508
 }
 Dot {
  name Dot12
  tile_color 0x7aa9ff00
  xpos 604
  ypos 588
 }
push $N8ed04400
 Blur {
  size {{CTRL.size*2} {CTRL.size*2}}
  crop false
  name Blur1
  xpos 304
  ypos 440
 }
 Multiply {
  value {{CTRL.falloff}}
  name Multiply1
  xpos 304
  ypos 512
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge1
  xpos 304
  ypos 584
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos 304
  ypos 610
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge3
  xpos 304
  ypos 636
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge4
  xpos 304
  ypos 662
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge5
  xpos 304
  ypos 688
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge6
  xpos 304
  ypos 714
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge7
  xpos 304
  ypos 740
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge8
  xpos 304
  ypos 766
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge9
  xpos 304
  ypos 792
 }
 Dot {
  name Dot21
  tile_color 0x4b5ec600
  xpos 338
  ypos 928
 }
set Nd488c400 [stack 0]
 Dot {
  name Dot22
  tile_color 0x4b5ec600
  xpos 498
  ypos 928
 }
 Grade {
  whitepoint {{CTRL.core}}
  white_clamp true
  name Grade2
  xpos 464
  ypos 977
 }
 Gamma {
  channels rgb
  value {{parent.falloff_color.r/CTRL.falloff_length} {parent.falloff_color.g/CTRL.falloff_length} {parent.falloff_color.b/CTRL.falloff_length} {curve}}
  name Gamma1
  xpos 464
  ypos 1037
 }
 Grade {
  whitepoint {{CTRL.core}}
  reverse true
  name Grade3
  xpos 464
  ypos 1082
 }
push $Nd488c400
 Clamp {
  minimum {{CTRL.core}}
  maximum_enable false
  name Clamp1
  xpos 304
  ypos 972
 }
 Grade {
  add {{1-CTRL.core}}
  name Grade4
  xpos 304
  ypos 1020
 }
 Gamma {
  channels rgb
  value {{1+(1-parent.core_color.r)/CTRL.core_length} {1+(1-parent.core_color.g)/CTRL.core_length} {1+(1-parent.core_color.b)/CTRL.core_length} {curve}}
  name Gamma2
  xpos 304
  ypos 1061
 }
 Add {
  channels rgb
  value -1
  name Add1
  xpos 304
  ypos 1087
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge10
  xpos 304
  ypos 1157
 }
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 304
  ypos 1183
 }
 Multiply {
  value {{parent.mix}}
  name mix
  xpos 304
  ypos 1217
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge11
  xpos 304
  ypos 1270
  disable {{parent.glow_only}}
 }
 Dot {
  name Dot23
  tile_color 0x4b5ec600
  xpos 338
  ypos 1436
 }
push $N8d798000
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  name Copy1
  xpos 0
  ypos 1414
 }
 Crop {
  box {{-width*(parent.overscan/100)/2} {-height*(parent.overscan/100)/2} {width+(width*(parent.overscan/100)/2)} {height+(height*(parent.overscan/100)/2)}}
  crop false
  name Crop2
  xpos 0
  ypos 1495
  disable {{!parent.crop}}
 }
 Output {
  name Output1
  xpos 0
  ypos 1543
 }
end_group
Dot {
 name Dot68
 xpos -136
 ypos 8675
}
push $N918a4c00
Merge2 {
 inputs 2
 operation plus
 bbox B
 mix 0.2
 name Merge10
 xpos 152
 ypos 8672
}
Dot {
 name Dot1
 xpos 186
 ypos 8885
}
set Nee3b5000 [stack 0]
Dot {
 name Dot2
 xpos -136
 ypos 8885
}
Shuffle2 {
 fromInput1 {{0} B}
 in1 lgt_pers_fill
 fromInput2 {{0} B}
 mappings "4 lgt_pers_fill.red 0 0 rgba.red 0 0 lgt_pers_fill.green 0 1 rgba.green 0 1 lgt_pers_fill.blue 0 2 rgba.blue 0 2 black -1 -1 rgba.alpha 0 3"
 name Shuffle2
 label "\[ value in1 ]"
 xpos -170
 ypos 8932
}
Group {
 name Glow_Exponential2
 help "Exponential Glow node, with options to recolor and adjust falloff."
 knobChanged "\nk = nuke.thisKnob()\nif k.name()=='crop':\n    if k.value():\n        nuke.thisNode().knob('overscan').setEnabled(True)\n    else:\n        nuke.thisNode().knob('overscan').setEnabled(False)\n"
 tile_color 0xc97200ff
 xpos -170
 ypos 9033
 addUserKnob {20 ge l Glow}
 addUserKnob {26 glow_ctrls l "@b;Glow:"}
 addUserKnob {7 size t "Size of the glow" R 0 100}
 size 8
 addUserKnob {7 intensity t "Brightness of the Glow" R 0 10}
 intensity 1
 addUserKnob {7 falloff t "Adjust the light falloff of the glow. Higher values will have a longer falloff, resulting in visually bigger glows."}
 falloff 0.75
 addUserKnob {26 glow_highlights l "@b;Highlights:"}
 addUserKnob {41 range t "Luma key to define which parts of the image will glow." T Keyer1.range}
 addUserKnob {26 glow_colors l "@b;Glow Colors:"}
 addUserKnob {7 saturation l "color from img" t "By default the glow takes on the colors of the plate. By using this knob you can desaturate the color of the glow."}
 saturation 1
 addUserKnob {18 core_color l "core re-color" t "Re-color the core of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 core_color {1 1 1}
 addUserKnob {6 core_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {18 falloff_color l "falloff re-color" t "Re-color the falloff of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 falloff_color {1 1 1}
 addUserKnob {6 falloff_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 threshold l "core threshold" t "Define which parts of the glow are core or falloff."}
 threshold 1
 addUserKnob {26 glow_options l "@b;Options:"}
 addUserKnob {14 aspect l "aspect ratio" t "Set the aspect ratio for your glow. Streaky results can be obtained by changing the ratio here." R 0 100}
 aspect {1 1}
 addUserKnob {6 glow_only l "Glow only" t "By default the glow is added onto the plate. Checking this box will output the glow only. " +STARTLINE}
 glow_only true
 addUserKnob {6 crop l "Crop to Format" t "This glow can expand the bounding box to massive values, checking this box can prevent your bbox from getting unmanageable." +STARTLINE}
 crop true
 addUserKnob {7 overscan l "overscan (%)" t "If you are cropping to format but originally had some values outside the format, you can add some overscan here to preserve these. The values are a percentage of the format size." R 0 100}
 overscan 10
 addUserKnob {7 mix t "Mix back with the original plate (or black, if glow only is enabled)"}
 mix 1
 addUserKnob {26 ""}
 addUserKnob {26 spin_copyright l "" t " <b>SPIN<span style=\"color:#b32026\">VFX</span></b>\nGlow_Exponential\nVersion 1.0\n2017" +STARTLINE T "<span style=\"color:#aaa;font-family:sans-serif;font-size:8pt\"><b>SPIN<span style=\"color:#b32026\">VFX</span></b> - Version 1.0 - 2017 - <a href=\"https://github.com/SpinVFX/spin_nuke_gizmos/\" style=\"color:#aaa\">Github Page</a></span>"}
}
 Input {
  inputs 0
  name img
  xpos 0
  ypos -59
 }
 Dot {
  name Dot1
  tile_color 0xcccccc00
  xpos 34
  ypos 50
 }
set N63b88000 [stack 0]
 Dot {
  name Dot24
  tile_color 0xcccccc00
  xpos 34
  ypos 1274
 }
set N63b88400 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 136
  ypos 158
  number 1
 }
push $N63b88000
 NoOp {
  name CTRL
  xpos 304
  ypos 46
  addUserKnob {20 User}
  addUserKnob {7 falloff R 0 2}
  falloff {{"max(parent.falloff/2+0.5, 0.0001)"}}
  addUserKnob {7 falloff_intensity}
  falloff_intensity {{falloff+pow(falloff,2)+pow(falloff,3)+pow(falloff,4)+pow(falloff,5)+pow(falloff,6)+pow(falloff,7)+pow(falloff,8)+pow(falloff,9)+pow(falloff,10)}}
  addUserKnob {14 size R 0 100}
  size {{parent.size/20*parent.aspect.w} {parent.size/20*parent.aspect.h}}
  addUserKnob {7 intensity}
  intensity {{parent.intensity/falloff_intensity}}
  addUserKnob {7 core R 0 2}
  core {{threshold}}
  addUserKnob {7 core_length}
  core_length {{sqrt(pow(core_color.r,2)+pow(core_color.g,2)+pow(core_color.b,2))/sqrt(3)}}
  addUserKnob {7 falloff_length}
  falloff_length {{sqrt(pow(falloff_color.r,2)+pow(falloff_color.g,2)+pow(falloff_color.b,2))/sqrt(3)}}
 }
 Keyer {
  operation "luminance key"
  name Keyer1
  xpos 304
  ypos 98
 }
 ChannelMerge {
  inputs 2
  operation in
  name ChannelMerge1
  xpos 304
  ypos 146
  disable {{"!\[exists parent.input1] "}}
 }
 Premult {
  name Premult1
  xpos 304
  ypos 202
 }
 Remove {
  operation keep
  channels rgb
  name Remove1
  xpos 304
  ypos 228
 }
 Multiply {
  value {{parent.CTRL.intensity}}
  name Multiplyer
  xpos 304
  ypos 263
 }
 Saturation {
  saturation {{parent.saturation}}
  name Saturation1
  xpos 304
  ypos 325
 }
 Dot {
  name Dot3
  tile_color 0x7aa9ff00
  xpos 338
  ypos 372
 }
set N21a08800 [stack 0]
 Dot {
  name Dot2
  tile_color 0x7aa9ff00
  xpos 604
  ypos 372
 }
set N21a08c00 [stack 0]
 Dot {
  name Dot4
  tile_color 0x7aa9ff00
  xpos 870
  ypos 372
 }
set N21a09000 [stack 0]
 Dot {
  name Dot5
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 372
 }
set N21a09400 [stack 0]
 Dot {
  name Dot6
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 372
 }
set N21a09800 [stack 0]
 Dot {
  name Dot7
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 372
 }
set N21a09c00 [stack 0]
 Dot {
  name Dot8
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 372
 }
set N23d18000 [stack 0]
 Dot {
  name Dot9
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 372
 }
set N23d18400 [stack 0]
 Dot {
  name Dot10
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 372
 }
set N23d18800 [stack 0]
 Dot {
  name Dot11
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 372
 }
 Blur {
  size {{Blur9.size*2} {Blur9.size*2}}
  crop false
  name Blur10
  xpos 2698
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,10)}}
  name Multiply10
  xpos 2698
  ypos 543
 }
 Dot {
  name Dot20
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 796
 }
push $N23d18800
 Blur {
  size {{Blur8.size*2} {Blur8.size*2}}
  crop false
  name Blur9
  xpos 2432
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,9)}}
  name Multiply9
  xpos 2432
  ypos 542
 }
 Dot {
  name Dot19
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 770
 }
push $N23d18400
 Blur {
  size {{Blur7.size*2} {Blur7.size*2}}
  crop false
  name Blur8
  xpos 2166
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,8)}}
  name Multiply8
  xpos 2166
  ypos 536
 }
 Dot {
  name Dot18
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 744
 }
push $N23d18000
 Blur {
  size {{Blur6.size*2} {Blur6.size*2}}
  crop false
  name Blur7
  xpos 1900
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,7)}}
  name Multiply7
  xpos 1900
  ypos 528
 }
 Dot {
  name Dot17
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 718
 }
push $N21a09c00
 Blur {
  size {{Blur5.size*2} {Blur5.size*2}}
  crop false
  name Blur6
  xpos 1634
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,6)}}
  name Multiply6
  xpos 1634
  ypos 528
 }
 Dot {
  name Dot16
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 692
 }
push $N21a09800
 Blur {
  size {{Blur4.size*2} {Blur4.size*2}}
  crop false
  name Blur5
  xpos 1368
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,5)}}
  name Multiply5
  xpos 1368
  ypos 524
 }
 Dot {
  name Dot15
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 666
 }
push $N21a09400
 Blur {
  size {{Blur3.size*2} {Blur3.size*2}}
  crop false
  name Blur4
  xpos 1102
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,4)}}
  name Multiply4
  xpos 1102
  ypos 518
 }
 Dot {
  name Dot14
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 640
 }
push $N21a09000
 Blur {
  size {{Blur2.size*2} {Blur2.size*2}}
  crop false
  name Blur3
  xpos 836
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,3)}}
  name Multiply3
  xpos 836
  ypos 509
 }
 Dot {
  name Dot13
  tile_color 0x7aa9ff00
  xpos 870
  ypos 614
 }
push $N21a08c00
 Blur {
  size {{Blur1.size*2} {Blur1.size*2}}
  crop false
  name Blur2
  xpos 570
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,2)}}
  name Multiply2
  xpos 570
  ypos 508
 }
 Dot {
  name Dot12
  tile_color 0x7aa9ff00
  xpos 604
  ypos 588
 }
push $N21a08800
 Blur {
  size {{CTRL.size*2} {CTRL.size*2}}
  crop false
  name Blur1
  xpos 304
  ypos 440
 }
 Multiply {
  value {{CTRL.falloff}}
  name Multiply1
  xpos 304
  ypos 512
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge1
  xpos 304
  ypos 584
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos 304
  ypos 610
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge3
  xpos 304
  ypos 636
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge4
  xpos 304
  ypos 662
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge5
  xpos 304
  ypos 688
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge6
  xpos 304
  ypos 714
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge7
  xpos 304
  ypos 740
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge8
  xpos 304
  ypos 766
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge9
  xpos 304
  ypos 792
 }
 Dot {
  name Dot21
  tile_color 0x4b5ec600
  xpos 338
  ypos 928
 }
set N8200c800 [stack 0]
 Dot {
  name Dot22
  tile_color 0x4b5ec600
  xpos 498
  ypos 928
 }
 Grade {
  whitepoint {{CTRL.core}}
  white_clamp true
  name Grade2
  xpos 464
  ypos 977
 }
 Gamma {
  channels rgb
  value {{parent.falloff_color.r/CTRL.falloff_length} {parent.falloff_color.g/CTRL.falloff_length} {parent.falloff_color.b/CTRL.falloff_length} {curve}}
  name Gamma1
  xpos 464
  ypos 1037
 }
 Grade {
  whitepoint {{CTRL.core}}
  reverse true
  name Grade3
  xpos 464
  ypos 1082
 }
push $N8200c800
 Clamp {
  minimum {{CTRL.core}}
  maximum_enable false
  name Clamp1
  xpos 304
  ypos 972
 }
 Grade {
  add {{1-CTRL.core}}
  name Grade4
  xpos 304
  ypos 1020
 }
 Gamma {
  channels rgb
  value {{1+(1-parent.core_color.r)/CTRL.core_length} {1+(1-parent.core_color.g)/CTRL.core_length} {1+(1-parent.core_color.b)/CTRL.core_length} {curve}}
  name Gamma2
  xpos 304
  ypos 1061
 }
 Add {
  channels rgb
  value -1
  name Add1
  xpos 304
  ypos 1087
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge10
  xpos 304
  ypos 1157
 }
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 304
  ypos 1183
 }
 Multiply {
  value {{parent.mix}}
  name mix
  xpos 304
  ypos 1217
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge11
  xpos 304
  ypos 1270
  disable {{parent.glow_only}}
 }
 Dot {
  name Dot23
  tile_color 0x4b5ec600
  xpos 338
  ypos 1436
 }
push $N63b88400
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  name Copy1
  xpos 0
  ypos 1414
 }
 Crop {
  box {{-width*(parent.overscan/100)/2} {-height*(parent.overscan/100)/2} {width+(width*(parent.overscan/100)/2)} {height+(height*(parent.overscan/100)/2)}}
  crop false
  name Crop2
  xpos 0
  ypos 1495
  disable {{!parent.crop}}
 }
 Output {
  name Output1
  xpos 0
  ypos 1543
 }
end_group
Dot {
 name Dot3
 xpos -136
 ypos 9119
}
push $Nee3b5000
Merge2 {
 inputs 2
 operation plus
 bbox B
 mix 0.2
 name Merge1
 xpos 152
 ypos 9116
}
Copy {
 inputs 2
 from0 depth.Z
 to0 depth.Z
 name Copy7
 xpos 152
 ypos 9653
}
Merge2 {
 inputs 2
 operation screen
 mix 0.03
 name Merge15
 xpos 152
 ypos 10123
}
FilterErode {
 channels depth
 name FilterErode1
 label "Size: \[ value size ]"
 xpos 152
 ypos 10427
 disable true
}
Grade {
 gamma 0.8
 black_clamp false
 name Grade12
 xpos 152
 ypos 10486
}
ZDefocus2 {
 math depth
 center {{parent.ZDefocus1.center}}
 size 3
 max_size 5
 invert_mask true
 name ZDefocus2
 label "Size: \[ value size ]"
 xpos 152
 ypos 10519
}
Grade {
 gamma {{parent.Grade12.gamma}}
 reverse true
 name Grade13
 xpos 152
 ypos 10577
}
EdgeBlur {
 channels rgba
 controlchannel mask.a
 size 1.5
 name EdgeBlur1
 xpos 152
 ypos 11030
}
Dot {
 name Dot109
 xpos 186
 ypos 11539
}
Dot {
 name Dot65
 xpos 4571
 ypos 11539
}
set N64d3d800 [stack 0]
Group {
 inputs 2
 name LightWrapPro
 help "Adds exponentially blurred lightwrap\n\nAdds a bright highlight wrap and an overall wrap"
 tile_color 0x1e252eff
 label "(\[value outputView])"
 note_font "DejaVu Sans Bold"
 note_font_color 0xb7e6ffff
 xpos 4537
 ypos 11621
 mapsize {0.15 0.15}
 addUserKnob {20 LightWrapPro}
 addUserKnob {4 outputView l "Output View" t "Chose one to view while adjusting" M {"Final Output" "Highlight Key" "Highlight Wrap" "OverAll Wrap" "Effect Only" "" "" "" "" "" "" "" "" ""}}
 outputView "Effect Only"
 addUserKnob {6 premultiplied l "FG premultiplied" -STARTLINE}
 premultiplied true
 addUserKnob {26 highlightKeyTitle l "<b><font color = skyblue>HighLight Key"}
 addUserKnob {7 blackPt l Black R 0 4}
 blackPt 1
 addUserKnob {7 whitePt l White R 0 4}
 whitePt 2
 addUserKnob {26 wrapHighlightsTitle l "<b><font color = skyblue>HighLight Wrap"}
 addUserKnob {6 Mult_Flare_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
 addUserKnob {41 steps l " Steps" T ExponGlowWrapHighlight.steps}
 addUserKnob {41 falloffType l Falloff -STARTLINE T ExponGlowWrapHighlight.falloffType}
 addUserKnob {41 size l Size T ExponGlowWrapHighlight.size}
 addUserKnob {7 wrapHighlightAmount l Amount R 0 4}
 wrapHighlightAmount 1
 addUserKnob {26 WrapAllTitle l "<b><font color=skyblue>Overall Wrap "}
 addUserKnob {6 WrapAllMult_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
 addUserKnob {41 steps_1 l " Steps" T ExponGlowWrapAll.steps}
 addUserKnob {41 falloffType_1 l Falloff -STARTLINE T ExponGlowWrapAll.falloffType}
 addUserKnob {41 size_1 l Size T ExponGlowWrapAll.size}
 addUserKnob {7 wrapAllAmount l Amount R 0 4}
 wrapAllAmount 1
 addUserKnob {6 removeHighlights l "Dim Highlights" +STARTLINE}
 removeHighlights true
 addUserKnob {7 dimHighlightsAmount l "" -STARTLINE R 0 3}
 dimHighlightsAmount 1
 addUserKnob {26 blendEdgesTitle l "<b><font color=skyblue>Blend Edges"}
 addUserKnob {7 blendEdgesAmount l Amount}
 addUserKnob {6 ColorBleedMult_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
 addUserKnob {26 bleedColorTitle l "<b><font color=skyblue>Bleed Color"}
 addUserKnob {7 bleedColorAmount l Amount}
 addUserKnob {7 bleedColorSize l Size R 0.1 4}
 bleedColorSize 1
 addUserKnob {7 bleedColorFalloff_2 l Falloff R 0.2 2}
 bleedColorFalloff_2 0.5
 addUserKnob {26 ""}
 addUserKnob {7 globalAmount l "<b><font color=skyblue>Global Amount"}
 globalAmount 0.5
 addUserKnob {26 _1 l mask T ""}
 addUserKnob {41 maskChannelInput l "" -STARTLINE T MergeCopyLightWrapPro.maskChannelInput}
 addUserKnob {41 inject -STARTLINE T MergeCopyLightWrapPro.inject}
 addUserKnob {41 invert_mask l invert -STARTLINE T MergeCopyLightWrapPro.invert_mask}
 addUserKnob {41 fringe -STARTLINE T MergeCopyLightWrapPro.fringe}
 addUserKnob {41 mix T MergeCopyLightWrapPro.mix}
 addUserKnob {20 info l Info}
 addUserKnob {26 creator l Creator: T "<b><big>Tony Lyons"}
 addUserKnob {26 desc l Description: t "\n\n" T LightWrapPro}
 addUserKnob {26 ver l Version: T v06}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0x402f27ff
  label "Bleed Color"
  note_font_size 60
  note_font_color 0xffffffff
  xpos -683
  ypos 2273
  bdwidth 1316
  bdheight 787
 }
 BackdropNode {
  inputs 0
  name BackdropNode2
  tile_color 0x39464200
  label "highlight key"
  note_font_size 40
  note_font_color 0xffffffff
  xpos 1630
  ypos 113
  bdwidth 272
  bdheight 393
 }
 Input {
  inputs 0
  name Inputmask
  xpos 1887
  ypos 3580
  number 2
 }
 Input {
  inputs 0
  name FG
  xpos -413
  ypos -318
 }
 AddChannels {
  channels rgba
  name AddChannels1
  xpos -413
  ypos -150
 }
 Dot {
  name Dot1
  xpos -379
  ypos 375
 }
set N684db000 [stack 0]
 Dot {
  name Dot7
  xpos -825
  ypos 375
 }
 Dot {
  name Dot46
  xpos -825
  ypos 3104
 }
set N684db800 [stack 0]
 Dot {
  name Dot15
  xpos 915
  ypos 3107
 }
set N684dbc00 [stack 0]
 Dot {
  name Dot26
  note_font_size 41
  xpos 915
  ypos 3224
 }
set Nd2cf6000 [stack 0]
 Dot {
  name Dot32
  note_font_size 41
  xpos 915
  ypos 3277
 }
push $N684db000
 Dot {
  name Dot8
  note_font_size 41
  xpos 717
  ypos 378
 }
set Nd2cf6800 [stack 0]
 Dot {
  name Dot11
  note_font_size 41
  xpos 717
  ypos 550
 }
 Input {
  inputs 0
  name BG
  label "\n"
  xpos 1702
  ypos -276
  number 1
 }
 AddChannels {
  channels rgba
  name AddChannels2
  xpos 1702
  ypos -145
 }
 Remove {
  operation keep
  channels rgba
  name Remove2
  xpos 1702
  ypos -68
 }
 Dot {
  name Dot3
  xpos 1736
  ypos 177
 }
set Nd2cf7c00 [stack 0]
 Keyer {
  operation "luminance key"
  range {{parent.blackPt} {parent.whitePt} {range.B} {range.B}}
  name Keyer2
  xpos 1702
  ypos 303
 }
 Dot {
  name Dot4
  note_font_size 41
  xpos 1736
  ypos 397
 }
set N7d092400 [stack 0]
 Premult {
  name Premult1
  xpos 1702
  ypos 452
 }
 Multiply {
  inputs 1+1
  channels rgba
  value 0
  name Multiply1
  label "\[value value]"
  xpos 1702
  ypos 543
 }
 Dot {
  name Dot30
  note_font_size 41
  xpos 1734
  ypos 746
 }
 Group {
  name ExponGlowWrapHighlight
  onCreate "n = nuke.thisNode()\nn.knob('size').setRange(0, 50)\n#n.knob('exp').setRange(1, 4)\nnuke.thisNode().knob('steps').setFlag(0x02000000)"
  knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\n\nif k.name() == \"includeOriginal\":\n    if n.knob('includeOriginal').getValue() == 1:\n        merge = nuke.toNode(\"Merge1\")\n        original = nuke.toNode('Original')\n        AvgMult = nuke.toNode(\"AverageMult\")\n        steps = int(n.knob('steps').getValue())\n        merge.setInput(steps+1, original)\n        AvgMult\['whitepoint'].setValue(2 if steps<2 else steps+1)\n\n    else:\n        merge.setInput(steps+1, None)\n        AvgMult\['whitepoint'].setValue(2 if steps<2 else steps)\n\nelif k.name() == \"steps\":\n\n    s = int(k.value())\n    if s<1:\n        k.setValue(1)\n    else:\n        start = nuke.toNode(\"Start\")\n        end   = nuke.toNode(\"End\")\n        b1    = nuke.toNode(\"Blur1\")\n        m1    = nuke.toNode(\"Multiply1\")\n        merge = nuke.toNode(\"Merge1\")\n        AvgMult = nuke.toNode(\"AverageMult\")\n\n        b1x   = b1.xpos()\n        b1y   = b1.ypos()\n        b1n   = b1.name()\n\n        m1x   = m1.xpos()\n        m1y   = m1.ypos()\n        m1n   = m1.name()\n\n        steps = int(n.knob('steps').getValue())\n        size  = n.knob('size').getValue()\n        mult  = n.knob('exp').getValue()\n\n        #b1.setInput(0, start)\n        for i in range(1,merge.inputs()):\n            merge.setInput(i,None)\n        merge.setInput(0, m1)\n        \[nuke.delete(i) for i in nuke.allNodes() if i.xpos()>start.xpos()]\n        for i in range(1,steps):\n            # Blur\n            b = nuke.nodes.Blur()\n            m = nuke.nodes.Multiply()\n            b.setXYpos(b1x+i*100,b1y)\n            b.setInput(0,start)\n            b\[\"channels\"].setValue(\"all\")\n            b\[\"crop\"].setValue(0)\n            b\[\"size\"].setValue(0, 1)\n            b\[\"size\"].setExpression( \"((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(\{\}**2))\".format(str(i+1)), 0 )\n            b\[\"size\"].setExpression( \"((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(\{\}**2))\".format(str(i+1)), 1 )\n            b\[\"label\"].setValue('')\n            blurAbove = b.name()\n\n            m.setXYpos(m1x+i*100,m1y)\n            m.setInput(0, nuke.toNode(blurAbove))\n            m\[\"channels\"].setValue(\"all\")\n            m\[\"value\"].setValue(1,1,1,1)\n            j = 1-(i/steps)\n            m\[\"value\"].setExpression('falloffType == 0 ? \{\} :falloffType == 1 ? pow(\{\}, 3) : falloffType == 2 ? \{\}*\{\}*(3-2*\{\}) : falloffType == 3 ? \{\}*\{\}*(2 - \{\}) : falloffType == 4 ? \{\}*(1 + \{\}*(1 - \{\})) : 0'.format(j,j,j,j,j,j,j,j,j,j,j))\n            m\[\"mix\"].setExpression(\"falloff\")\n            m\[\"label\"].setValue('')\n\n            merge.setInput(i if i<2 else i+1, m)\n            AvgMult\['whitepoint'].setValue(i if i<2 else i+1)\n\n        if n.knob('includeOriginal').getValue() == 1:\n            merge = nuke.toNode(\"Merge1\")\n            original = nuke.toNode('Original')\n            AvgMult = nuke.toNode(\"AverageMult\")\n            steps = int(n.knob('steps').getValue())\n            merge.setInput(steps+1, original)\n            AvgMult\['whitepoint'].setValue(2 if steps<2 else steps+1)\n\nelif k.name() == \"output2\":\n    if n.knob(\"output2\").getValue() == 4:\n        n.knob('AvgMaxOriginal').setVisible(True)\n    else:\n        n.knob('AvgMaxOriginal').setVisible(False)\n\n"
  tile_color 0xcc804eff
  label "(\[value output2])"
  note_font "Verdana Bold"
  note_font_color 0xffffffff
  xpos 1700
  ypos 1012
  addUserKnob {20 ExponBlurSimple}
  addUserKnob {41 channels T Remove1.channels}
  addUserKnob {26 ""}
  addUserKnob {4 output2 l Operation: M {Screen Plus Over Hypot Average Max Min "" "" "" "" ""}}
  output2 Over
  addUserKnob {3 steps l "  Steps" -STARTLINE}
  steps 6
  addUserKnob {26 text l " " T " "}
  addUserKnob {6 includeOriginal l "Include Original?" -STARTLINE}
  addUserKnob {6 AvgMaxOriginal l "Use Max of Average and Original" +HIDDEN +STARTLINE}
  AvgMaxOriginal true
  addUserKnob {14 size l Size R 0 50}
  size 4
  addUserKnob {14 exp l Exponent +INVISIBLE R 1 4}
  exp 3
  addUserKnob {6 color_rgba_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
  addUserKnob {7 falloff l Falloff}
  falloff 1
  addUserKnob {4 falloffType l "Falloff Type" M {Linear pLinear smooth smooth0 smooth1 ""}}
  falloffType smooth1
  addUserKnob {14 postBlur l "Post Blur" R 0 100}
  addUserKnob {26 ""}
  addUserKnob {41 maskChannelMask l mask T MergeKeymix.maskChannelMask}
  addUserKnob {41 inject -STARTLINE T MergeKeymix.inject}
  addUserKnob {41 invert_mask l invert -STARTLINE T MergeKeymix.invert_mask}
  addUserKnob {41 fringe -STARTLINE T MergeKeymix.fringe}
  addUserKnob {41 mix T MergeKeymix.mix}
  addUserKnob {14 safeBBoxPixels l "" +STARTLINE +HIDDEN R 0 400}
  safeBBoxPixels 100
  addUserKnob {14 adjustBBoxPercent l "" -STARTLINE +HIDDEN R 1 2}
  adjustBBoxPercent 1
  addUserKnob {20 info l Info}
  addUserKnob {26 creator l Creator: T "Tony Lyons"}
  addUserKnob {26 desc l Description: t "Add description and tooltip for gizmo" T ExponBlurSimple}
  addUserKnob {26 ver l Version: T v02}
 }
  Input {
   inputs 0
   name Inputmask
   xpos 346
   ypos 596
   number 1
  }
  Dot {
   name Dot19
   label Mask
   note_font_size 41
   xpos 380
   ypos 662
  }
  Dot {
   name Dot10
   note_font_size 41
   xpos 380
   ypos 899
  }
  Input {
   inputs 0
   name Inputimg
   xpos -221
   ypos -1229
  }
  Dot {
   name Dot16
   note_font_size 41
   xpos -187
   ypos -1062
  }
set N63bf6400 [stack 0]
  Dot {
   name Dot1
   note_font_size 41
   xpos 461
   ypos -1058
  }
  Remove {
   operation keep
   channels rgba
   name Remove1
   xpos 427
   ypos -980
  }
  NoOp {
   name aspectCalc
   xpos 427
   ypos -939
   addUserKnob {20 User}
   addUserKnob {14 aspect R 0 100}
   aspect {{parent.size.w} {parent.size.h/format.pixel_aspect/height*width}}
  }
  Dot {
   name Dot21
   note_font_size 41
   xpos 461
   ypos -853
  }
set N63bf7400 [stack 0]
  Invert {
   name Invert1
   xpos 864
   ypos -860
   disable {{"parent.size < 0 ? 0 : 1"}}
  }
set N63bf7800 [stack 0]
  Dot {
   name Dot4
   note_font_size 41
   xpos 540
   ypos -604
  }
  NoOp {
   name Original
   xpos 506
   ypos -327
  }
  Dot {
   name Dot5
   note_font_size 41
   xpos 540
   ypos 100
  }
push $N63bf7800
  NoOp {
   name Start
   xpos 864
   ypos -706
  }
set N6ac7a800 [stack 0]
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(6**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(6**2))}}
   crop false
   name Blur6
   xpos 1364
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.166666666667 :falloffType == 1 ? pow(0.166666666667, 3) : falloffType == 2 ? 0.166666666667*0.166666666667*(3-2*0.166666666667) : falloffType == 3 ? 0.166666666667*0.166666666667*(2 - 0.166666666667) : falloffType == 4 ? 0.166666666667*(1 + 0.166666666667*(1 - 0.166666666667)) : 0"} {"falloffType == 0 ? 0.166666666667 :falloffType == 1 ? pow(0.166666666667, 3) : falloffType == 2 ? 0.166666666667*0.166666666667*(3-2*0.166666666667) : falloffType == 3 ? 0.166666666667*0.166666666667*(2 - 0.166666666667) : falloffType == 4 ? 0.166666666667*(1 + 0.166666666667*(1 - 0.166666666667)) : 0"} {"falloffType == 0 ? 0.166666666667 :falloffType == 1 ? pow(0.166666666667, 3) : falloffType == 2 ? 0.166666666667*0.166666666667*(3-2*0.166666666667) : falloffType == 3 ? 0.166666666667*0.166666666667*(2 - 0.166666666667) : falloffType == 4 ? 0.166666666667*(1 + 0.166666666667*(1 - 0.166666666667)) : 0"} {"falloffType == 0 ? 0.166666666667 :falloffType == 1 ? pow(0.166666666667, 3) : falloffType == 2 ? 0.166666666667*0.166666666667*(3-2*0.166666666667) : falloffType == 3 ? 0.166666666667*0.166666666667*(2 - 0.166666666667) : falloffType == 4 ? 0.166666666667*(1 + 0.166666666667*(1 - 0.166666666667)) : 0"}}
   mix {{falloff}}
   name Multiply6
   xpos 1364
   ypos -477
  }
push $N6ac7a800
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(5**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(5**2))}}
   crop false
   name Blur5
   xpos 1264
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.333333333333 :falloffType == 1 ? pow(0.333333333333, 3) : falloffType == 2 ? 0.333333333333*0.333333333333*(3-2*0.333333333333) : falloffType == 3 ? 0.333333333333*0.333333333333*(2 - 0.333333333333) : falloffType == 4 ? 0.333333333333*(1 + 0.333333333333*(1 - 0.333333333333)) : 0"} {"falloffType == 0 ? 0.333333333333 :falloffType == 1 ? pow(0.333333333333, 3) : falloffType == 2 ? 0.333333333333*0.333333333333*(3-2*0.333333333333) : falloffType == 3 ? 0.333333333333*0.333333333333*(2 - 0.333333333333) : falloffType == 4 ? 0.333333333333*(1 + 0.333333333333*(1 - 0.333333333333)) : 0"} {"falloffType == 0 ? 0.333333333333 :falloffType == 1 ? pow(0.333333333333, 3) : falloffType == 2 ? 0.333333333333*0.333333333333*(3-2*0.333333333333) : falloffType == 3 ? 0.333333333333*0.333333333333*(2 - 0.333333333333) : falloffType == 4 ? 0.333333333333*(1 + 0.333333333333*(1 - 0.333333333333)) : 0"} {"falloffType == 0 ? 0.333333333333 :falloffType == 1 ? pow(0.333333333333, 3) : falloffType == 2 ? 0.333333333333*0.333333333333*(3-2*0.333333333333) : falloffType == 3 ? 0.333333333333*0.333333333333*(2 - 0.333333333333) : falloffType == 4 ? 0.333333333333*(1 + 0.333333333333*(1 - 0.333333333333)) : 0"}}
   mix {{falloff}}
   name Multiply5
   xpos 1264
   ypos -477
  }
push $N6ac7a800
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(4**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(4**2))}}
   crop false
   name Blur4
   xpos 1164
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"} {"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"} {"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"} {"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"}}
   mix {{falloff}}
   name Multiply4
   xpos 1164
   ypos -477
  }
push $N6ac7a800
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(3**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(3**2))}}
   crop false
   name Blur3
   xpos 1064
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.666666666667 :falloffType == 1 ? pow(0.666666666667, 3) : falloffType == 2 ? 0.666666666667*0.666666666667*(3-2*0.666666666667) : falloffType == 3 ? 0.666666666667*0.666666666667*(2 - 0.666666666667) : falloffType == 4 ? 0.666666666667*(1 + 0.666666666667*(1 - 0.666666666667)) : 0"} {"falloffType == 0 ? 0.666666666667 :falloffType == 1 ? pow(0.666666666667, 3) : falloffType == 2 ? 0.666666666667*0.666666666667*(3-2*0.666666666667) : falloffType == 3 ? 0.666666666667*0.666666666667*(2 - 0.666666666667) : falloffType == 4 ? 0.666666666667*(1 + 0.666666666667*(1 - 0.666666666667)) : 0"} {"falloffType == 0 ? 0.666666666667 :falloffType == 1 ? pow(0.666666666667, 3) : falloffType == 2 ? 0.666666666667*0.666666666667*(3-2*0.666666666667) : falloffType == 3 ? 0.666666666667*0.666666666667*(2 - 0.666666666667) : falloffType == 4 ? 0.666666666667*(1 + 0.666666666667*(1 - 0.666666666667)) : 0"} {"falloffType == 0 ? 0.666666666667 :falloffType == 1 ? pow(0.666666666667, 3) : falloffType == 2 ? 0.666666666667*0.666666666667*(3-2*0.666666666667) : falloffType == 3 ? 0.666666666667*0.666666666667*(2 - 0.666666666667) : falloffType == 4 ? 0.666666666667*(1 + 0.666666666667*(1 - 0.666666666667)) : 0"}}
   mix {{falloff}}
   name Multiply3
   xpos 1064
   ypos -477
  }
push 0
push $N6ac7a800
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(2**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(2**2))}}
   crop false
   name Blur2
   xpos 964
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.833333333333 :falloffType == 1 ? pow(0.833333333333, 3) : falloffType == 2 ? 0.833333333333*0.833333333333*(3-2*0.833333333333) : falloffType == 3 ? 0.833333333333*0.833333333333*(2 - 0.833333333333) : falloffType == 4 ? 0.833333333333*(1 + 0.833333333333*(1 - 0.833333333333)) : 0"} {"falloffType == 0 ? 0.833333333333 :falloffType == 1 ? pow(0.833333333333, 3) : falloffType == 2 ? 0.833333333333*0.833333333333*(3-2*0.833333333333) : falloffType == 3 ? 0.833333333333*0.833333333333*(2 - 0.833333333333) : falloffType == 4 ? 0.833333333333*(1 + 0.833333333333*(1 - 0.833333333333)) : 0"} {"falloffType == 0 ? 0.833333333333 :falloffType == 1 ? pow(0.833333333333, 3) : falloffType == 2 ? 0.833333333333*0.833333333333*(3-2*0.833333333333) : falloffType == 3 ? 0.833333333333*0.833333333333*(2 - 0.833333333333) : falloffType == 4 ? 0.833333333333*(1 + 0.833333333333*(1 - 0.833333333333)) : 0"} {"falloffType == 0 ? 0.833333333333 :falloffType == 1 ? pow(0.833333333333, 3) : falloffType == 2 ? 0.833333333333*0.833333333333*(3-2*0.833333333333) : falloffType == 3 ? 0.833333333333*0.833333333333*(2 - 0.833333333333) : falloffType == 4 ? 0.833333333333*(1 + 0.833333333333*(1 - 0.833333333333)) : 0"}}
   mix {{falloff}}
   name Multiply2
   xpos 964
   ypos -477
  }
push $N6ac7a800
  Blur {
   size {{(width/100*parent.size*(aspectCalc.aspect.w/100))} {(height/100*parent.size*(aspectCalc.aspect.h/100))}}
   crop false
   name Blur1
   selected true
   xpos 864
   ypos -554
  }
  Multiply {
   value {1 1 1 1}
   mix {{falloff}}
   name Multiply1
   xpos 864
   ypos -477
  }
  Merge2 {
   inputs 6+1
   operation {{MergeNumber.mergeNumber}}
   also_merge all
   name Merge1
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos 864
   ypos -327
  }
  NoOp {
   name End
   xpos 864
   ypos -279
  }
  Grade {
   channels all
   whitepoint 6
   black_clamp false
   name AverageMult
   xpos 864
   ypos 49
   disable {{"output2 == 4 ? 0 : 1"}}
  }
  Merge2 {
   inputs 2
   operation max
   also_merge all
   name Merge2
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos 864
   ypos 96
   disable {{"output2 == 4 && includeOriginal == 1 && AvgMaxOriginal == 1 ? 0 : 1"}}
  }
  Blur {
   size {{postBlur} {postBlur}}
   name BlurOriginal
   xpos 864
   ypos 155
  }
  Invert {
   name Invert2
   xpos 864
   ypos 283
   disable {{"parent.size < 0 ? 0 : 1"}}
  }
push $N63bf7400
  Switch {
   inputs 2
   which {{"parent.size == 0 ? 0 : 1"}}
   name Switch1
   label "\[value which]"
   xpos 427
   ypos 283
  }
  Crop {
   inputs 0
   box {{input.format.x} {input.format.y} {input.format.r} {input.format.t}}
   reformat true
   crop false
   name Crop1
   xpos 96
   ypos -931
   addUserKnob {20 User}
   addUserKnob {22 cropToBbox l "Crop to Bounding Box" -STARTLINE T codeBBox()}
  }
  AddChannels {
   channels rgba
   name AddChannels2
   xpos 96
   ypos -891
  }
push $N63bf6400
  Merge2 {
   inputs 2
   name Merge3
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos -60
   ypos -891
  }
set N6aa98000 [stack 0]
  Group {
   name BBoxToFormat
   onCreate "n = nuke.thisNode()\ninputFormat = n.knob(\"inputFormat\")\ninputBBox = n.knob(\"inputBBox\")\ncrop = nuke.toNode(\"Crop6\")\ncropb = crop.knob('box')\noutputBBox = n.knob('outputBBox')\noutputBBoxCenter = n.knob(\"outputBBoxCenter\")\n\ninputFormat.setFlag(0x0000000000008000)\ninputBBox.setFlag(0x0000000000008000)\ncropb.setFlag(0x0000000000008000)\noutputBBox.setFlag(0x0000000000008000)\noutputBBoxCenter.setFlag(0x0000000000008000)\n\nn = nuke.thisNode()\nn.knob(\"overscan\").setRange(0,400)\nn.knob(\"overscanPercent\").setRange(1,4)"
   knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\nif k.name() == \"overscanType\":\n    if n.knob(\"overscanType\").getValue() == 1:\n        n.knob(\"overscanPercent\").setVisible(True)\n        n.knob(\"overscan\").setVisible(False)\n    else:\n        n.knob(\"overscanPercent\").setVisible(False)\n        n.knob(\"overscan\").setVisible(True)"
   tile_color 0xa57aaaff
   note_font "Verdana Bold"
   note_font_color 0xffffffff
   xpos 29
   ypos -812
   addUserKnob {20 CropBBox}
   addUserKnob {4 type l Type +INVISIBLE M {"To Format" "To BBox"}}
   addUserKnob {41 intersect T Crop6.intersect}
   addUserKnob {6 blackOutside l "Black Outside" -STARTLINE}
   addUserKnob {4 overscanType l "Overscan Type:" M {Pixels Percentage}}
   overscanType Percentage
   addUserKnob {14 overscan l Overscan +HIDDEN R 0 400}
   addUserKnob {14 overscanPercent l "Overscan Percent" R 1 4}
   overscanPercent 1.2
   addUserKnob {20 inputBbox l "BBox Data" n 1}
   addUserKnob {15 inputFormat l "Input Format"}
   inputFormat {0 0 {input.width} {input.height}}
   addUserKnob {15 inputBBox l "Input BBox"}
   inputBBox {{input.bbox.x} {input.bbox.y} {input.bbox.r} {input.bbox.t}}
   addUserKnob {12 outputBBoxCenter l OutputBBoxCenter}
   outputBBoxCenter {{OutputBBox1.outputBBoxCenter.w} {OutputBBox1.outputBBoxCenter.h}}
   addUserKnob {15 outputBBox l "Output BBox"}
   outputBBox {{OutputBBox1.OutputBBox} {OutputBBox1.OutputBBox} {OutputBBox1.OutputBBox} {OutputBBox1.OutputBBox}}
   addUserKnob {20 endGroup n -1}
   addUserKnob {20 info_1 l Info}
   addUserKnob {26 creator l Creator: T "<b><big>Tony Lyons"}
   addUserKnob {26 desc l Description: t "crop to inputformat\n\ndisplays values of input bbox" T CropBBox}
   addUserKnob {26 ver l Version: T v02}
  }
   Input {
    inputs 0
    name Input
    xpos 261
    ypos 394
   }
   Dot {
    name Dot2
    note_font_size 41
    xpos 295
    ypos 462
   }
set N6aa98800 [stack 0]
   Dot {
    name Dot1
    note_font_size 41
    xpos -160
    ypos 462
   }
set N6aa98c00 [stack 0]
push $N6aa98800
   Crop {
    box {{curve} {curve} {input.width} {input.height}}
    crop {{parent.blackOutside}}
    name Crop6
    xpos 261
    ypos 510
    addUserKnob {20 User}
    addUserKnob {22 cropToBbox l "Crop to Bounding Box" -STARTLINE T codeBBox()}
   }
set N6aa99000 [stack 0]
   Remove {
    operation keep
    channels none
    name Remove1
    xpos 120
    ypos 504
   }
set N6aa99400 [stack 0]
   Transform {
    scale {{parent.overscanPercent} {parent.overscanPercent}}
    center {{input.bbox.r/2} {input.bbox.t/2}}
    shutteroffset centred
    name Transform1
    xpos 120
    ypos 555
   }
push $N6aa99400
   AdjBBox {
    numpixels {{parent.overscan} {parent.overscan}}
    name AdjBBox1
    xpos -5
    ypos 510
   }
   Switch {
    inputs 2
    which {{overscanType}}
    name Switch2
    label "\[value which]"
    xpos -5
    ypos 549
   }
   Merge2 {
    inputs 2
    bbox intersection
    Achannels {-rgba.red -rgba.green -rgba.blue rgba.alpha}
    Bchannels {-rgba.red -rgba.green -rgba.blue rgba.alpha}
    output {-rgba.red -rgba.green -rgba.blue rgba.alpha}
    name Merge1
    xpos -5
    ypos 647
    disable {{!parent.Crop6.intersect}}
   }
push $N6aa98c00
   CopyBBox {
    inputs 2
    name CopyBBox1
    xpos -194
    ypos 653
   }
   BlackOutside {
    name BlackOutside1
    xpos -194
    ypos 692
    disable {{!parent.blackOutside}}
   }
   Dot {
    name Dot4
    note_font_size 41
    xpos -160
    ypos 769
   }
push $N6aa99000
   Switch {
    inputs 2
    which {{"overscanType == 0 ? overscan.w != 0 || overscan.h != 0 : overscanPercent.w != 1 || overscanPercent.h != 1 ? 1 : 0"}}
    name Switch1
    label "\[value which]"
    xpos 261
    ypos 759
   }
set N684bb400 [stack 0]
   Output {
    name Output1
    xpos 261
    ypos 921
   }
push $N684bb400
   NoOp {
    name OutputBBox1
    selected true
    xpos 378
    ypos 821
    addUserKnob {20 User}
    addUserKnob {15 OutputBBox l "Output BBox"}
    OutputBBox {{input.bbox.x} {input.bbox.y} {input.bbox.r} {input.bbox.t}}
    addUserKnob {14 outputBBoxCenter l "Output BBox Center" R 0 100}
    outputBBoxCenter {{OutputBBox.x+(OutputBBox.r-OutputBBox.x)/2} {OutputBBox.y+(OutputBBox.t-OutputBBox.y)/2}}
   }
  end_group
push $N6aa98000
  Merge2 {
   inputs 2
   name Merge4
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos -60
   ypos -748
  }
push $N63bf6400
  CopyBBox {
   inputs 2
   name CopyBBox1
   xpos -221
   ypos -748
  }
  Dot {
   name Dot22
   note_font_size 41
   xpos -187
   ypos 198
  }
  Merge2 {
   inputs 2
   operation copy
   bbox B
   Achannels none
   Bchannels none
   output none
   name Merge5
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos -221
   ypos 283
  }
  Dot {
   name Dot17
   label A
   note_font_size 41
   xpos -187
   ypos 675
  }
  Dot {
   name Dot7
   note_font_size 41
   xpos -187
   ypos 805
  }
push $N63bf6400
  Dot {
   name Dot2
   note_font_size 41
   xpos -588
   ypos -1062
  }
  Dot {
   name Dot18
   label B
   note_font_size 41
   xpos -588
   ypos 654
  }
  Dot {
   name Dot3
   note_font_size 41
   xpos -588
   ypos 895
  }
  Merge2 {
   inputs 2+1
   operation copy
   Achannels none
   Bchannels none
   output none
   also_merge all
   name MergeKeymix
   xpos -221
   ypos 888
  }
  Output {
   name Output1
   xpos -221
   ypos 1202
  }
  NoOp {
   inputs 0
   name MergeNumber
   xpos 202
   ypos -1145
   addUserKnob {20 User}
   addUserKnob {3 mergeNumber}
   mergeNumber {{"output2 == 0 ? 25 : output2 == 1 ? 24 : output2 == 2 ? 22 : output2 == 3 ? 13 : output2 == 4 ? 24 : output2 == 5 ? 17 : 18"}}
  }
 end_group
 Grade {
  channels all
  white {{wrapHighlightAmount/10}}
  name FlareAmount
  xpos 1702
  ypos 1393
 }
 Multiply {
  channels rgba
  value {{globalAmount}}
  name MultiplyGlobal3
  label "\[value value]"
  xpos 1702
  ypos 1577
 }
 Dot {
  name Dot25
  label "LIGHT FLARE"
  note_font_size 61
  xpos 1736
  ypos 1801
 }
set N478df800 [stack 0]
 Dot {
  name Dot31
  note_font_size 41
  xpos 1738
  ypos 2915
 }
set N478dfc00 [stack 0]
push $Nd2cf6800
push $Nd2cf7c00
 Dot {
  name Dot20
  xpos 1059
  ypos 179
 }
 Shuffle {
  alpha white
  name Shuffle1
  label "\[value in] \[ expr \{ \[value out2] == \"none\" ? \" \" : \[concat -> \[value out2]] \}]"
  note_font_size 21
  note_font_color 0xffffffff
  xpos 1025
  ypos 238
 }
 Multiply {
  inputs 1+1
  channels rgba
  value 0
  name Multiply2
  label "\[value value]"
  xpos 1025
  ypos 366
 }
 Dot {
  name Dot9
  xpos 1059
  ypos 725
 }
set N2183cc00 [stack 0]
 Dot {
  name Dot28
  note_font_size 41
  xpos 1343
  ypos 725
 }
 Keyer {
  operation "luminance key"
  name Keyer1
  xpos 1309
  ypos 823
 }
push $N2183cc00
 Colorspace {
  colorspace_out CIE-Yxy
  name Colorspace4
  xpos 1188
  ypos 786
 }
 Expression {
  inputs 1+1
  expr0 "(r*(1+(r/((parent.dimHighlightsAmount+1)**2))) ) / (1+r)"
  channel1 {-rgba.red -rgba.green -rgba.blue none}
  expr1 "(g*(1+(g/((parent.dimHighlightsAmount+1)**2))) ) / (1+g)"
  channel2 {-rgba.red -rgba.green -rgba.blue none}
  expr2 "(b*(1+(b/((parent.dimHighlightsAmount+1)**2))) ) / (1+b)"
  expr3 a
  name Tonemap_whitepoint
  xpos 1188
  ypos 827
 }
 Colorspace {
  colorspace_in CIE-Yxy
  name Colorspace3
  xpos 1188
  ypos 867
 }
push $N2183cc00
 Switch {
  inputs 2
  which {{removeHighlights}}
  name Switch4
  xpos 1025
  ypos 867
 }
 Group {
  name ExponGlowWrapAll
  onCreate "n = nuke.thisNode()\nn.knob('size').setRange(0, 50)\n#n.knob('exp').setRange(1, 4)\nnuke.thisNode().knob('steps').setFlag(0x02000000)"
  knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\n\nif k.name() == \"includeOriginal\":\n    if n.knob('includeOriginal').getValue() == 1:\n        merge = nuke.toNode(\"Merge1\")\n        original = nuke.toNode('Original')\n        AvgMult = nuke.toNode(\"AverageMult\")\n        steps = int(n.knob('steps').getValue())\n        merge.setInput(steps+1, original)\n        AvgMult\['whitepoint'].setValue(2 if steps<2 else steps+1)\n\n    else:\n        merge.setInput(steps+1, None)\n        AvgMult\['whitepoint'].setValue(2 if steps<2 else steps)\n\nelif k.name() == \"steps\":\n\n    s = int(k.value())\n    if s<1:\n        k.setValue(1)\n    else:\n        start = nuke.toNode(\"Start\")\n        end   = nuke.toNode(\"End\")\n        b1    = nuke.toNode(\"Blur1\")\n        m1    = nuke.toNode(\"Multiply1\")\n        merge = nuke.toNode(\"Merge1\")\n        AvgMult = nuke.toNode(\"AverageMult\")\n\n        b1x   = b1.xpos()\n        b1y   = b1.ypos()\n        b1n   = b1.name()\n\n        m1x   = m1.xpos()\n        m1y   = m1.ypos()\n        m1n   = m1.name()\n\n        steps = int(n.knob('steps').getValue())\n        size  = n.knob('size').getValue()\n        mult  = n.knob('exp').getValue()\n\n        #b1.setInput(0, start)\n        for i in range(1,merge.inputs()):\n            merge.setInput(i,None)\n        merge.setInput(0, m1)\n        \[nuke.delete(i) for i in nuke.allNodes() if i.xpos()>start.xpos()]\n        for i in range(1,steps):\n            # Blur\n            b = nuke.nodes.Blur()\n            m = nuke.nodes.Multiply()\n            b.setXYpos(b1x+i*100,b1y)\n            b.setInput(0,start)\n            b\[\"channels\"].setValue(\"all\")\n            b\[\"crop\"].setValue(0)\n            b\[\"size\"].setValue(0, 1)\n            b\[\"size\"].setExpression( \"((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(\{\}**2))\".format(str(i+1)), 0 )\n            b\[\"size\"].setExpression( \"((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(\{\}**2))\".format(str(i+1)), 1 )\n            b\[\"label\"].setValue('')\n            blurAbove = b.name()\n\n            m.setXYpos(m1x+i*100,m1y)\n            m.setInput(0, nuke.toNode(blurAbove))\n            m\[\"channels\"].setValue(\"all\")\n            m\[\"value\"].setValue(1,1,1,1)\n            j = 1-(i/steps)\n            m\[\"value\"].setExpression('falloffType == 0 ? \{\} :falloffType == 1 ? pow(\{\}, 3) : falloffType == 2 ? \{\}*\{\}*(3-2*\{\}) : falloffType == 3 ? \{\}*\{\}*(2 - \{\}) : falloffType == 4 ? \{\}*(1 + \{\}*(1 - \{\})) : 0'.format(j,j,j,j,j,j,j,j,j,j,j))\n            m\[\"mix\"].setExpression(\"falloff\")\n            m\[\"label\"].setValue('')\n\n            merge.setInput(i if i<2 else i+1, m)\n            AvgMult\['whitepoint'].setValue(i if i<2 else i+1)\n\n        if n.knob('includeOriginal').getValue() == 1:\n            merge = nuke.toNode(\"Merge1\")\n            original = nuke.toNode('Original')\n            AvgMult = nuke.toNode(\"AverageMult\")\n            steps = int(n.knob('steps').getValue())\n            merge.setInput(steps+1, original)\n            AvgMult\['whitepoint'].setValue(2 if steps<2 else steps+1)\n\nelif k.name() == \"output2\":\n    if n.knob(\"output2\").getValue() == 4:\n        n.knob('AvgMaxOriginal').setVisible(True)\n    else:\n        n.knob('AvgMaxOriginal').setVisible(False)\n\n"
  tile_color 0xcc804eff
  label "(\[value output2])"
  note_font "Verdana Bold"
  note_font_color 0xffffffff
  xpos 1025
  ypos 995
  addUserKnob {20 ExponBlurSimple}
  addUserKnob {41 channels T Remove1.channels}
  addUserKnob {26 ""}
  addUserKnob {4 output2 l Operation: M {Screen Plus Over Hypot Average Max Min "" "" "" "" ""}}
  output2 Over
  addUserKnob {3 steps l "  Steps" -STARTLINE}
  steps 8
  addUserKnob {26 text l " " T " "}
  addUserKnob {6 includeOriginal l "Include Original?" -STARTLINE}
  addUserKnob {6 AvgMaxOriginal l "Use Max of Average and Original" +HIDDEN +STARTLINE}
  AvgMaxOriginal true
  addUserKnob {14 size l Size R 0 50}
  size 10
  addUserKnob {14 exp l Exponent +INVISIBLE R 1 4}
  exp 3
  addUserKnob {6 color_rgba_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
  addUserKnob {7 falloff l Falloff}
  falloff 1
  addUserKnob {4 falloffType l "Falloff Type" M {Linear pLinear smooth smooth0 smooth1 ""}}
  falloffType pLinear
  addUserKnob {14 postBlur l "Post Blur" R 0 100}
  addUserKnob {26 ""}
  addUserKnob {41 maskChannelMask l mask T MergeKeymix.maskChannelMask}
  addUserKnob {41 inject -STARTLINE T MergeKeymix.inject}
  addUserKnob {41 invert_mask l invert -STARTLINE T MergeKeymix.invert_mask}
  addUserKnob {41 fringe -STARTLINE T MergeKeymix.fringe}
  addUserKnob {41 mix T MergeKeymix.mix}
  addUserKnob {14 safeBBoxPixels l "" +STARTLINE +HIDDEN R 0 400}
  safeBBoxPixels 100
  addUserKnob {14 adjustBBoxPercent l "" -STARTLINE +HIDDEN R 1 2}
  adjustBBoxPercent 1
  addUserKnob {20 info l Info}
  addUserKnob {26 creator l Creator: T "Tony Lyons"}
  addUserKnob {26 desc l Description: t "Add description and tooltip for gizmo" T ExponBlurSimple}
  addUserKnob {26 ver l Version: T v02}
 }
  Input {
   inputs 0
   name Inputmask
   xpos 346
   ypos 596
   number 1
  }
  Dot {
   name Dot19
   label Mask
   note_font_size 41
   xpos 380
   ypos 662
  }
  Dot {
   name Dot10
   note_font_size 41
   xpos 380
   ypos 899
  }
  Input {
   inputs 0
   name Inputimg
   xpos -221
   ypos -1229
  }
  Dot {
   name Dot16
   note_font_size 41
   xpos -187
   ypos -1062
  }
set N456af800 [stack 0]
  Dot {
   name Dot1
   note_font_size 41
   xpos 461
   ypos -1058
  }
  Remove {
   operation keep
   channels rgba
   name Remove1
   xpos 427
   ypos -980
  }
  NoOp {
   name aspectCalc
   xpos 427
   ypos -939
   addUserKnob {20 User}
   addUserKnob {14 aspect R 0 100}
   aspect {{parent.size.w} {parent.size.h/format.pixel_aspect/height*width}}
  }
  Dot {
   name Dot21
   note_font_size 41
   xpos 461
   ypos -853
  }
set N1c8d4800 [stack 0]
  Invert {
   name Invert1
   xpos 864
   ypos -860
   disable {{"parent.size < 0 ? 0 : 1"}}
  }
set N1c8d4c00 [stack 0]
  Dot {
   name Dot4
   note_font_size 41
   xpos 540
   ypos -604
  }
  NoOp {
   name Original
   xpos 506
   ypos -327
  }
  Dot {
   name Dot5
   note_font_size 41
   xpos 540
   ypos 100
  }
push $N1c8d4c00
  NoOp {
   name Start
   xpos 864
   ypos -706
  }
set N1c8d5c00 [stack 0]
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(8**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(8**2))}}
   crop false
   name Blur8
   xpos 1564
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.125 :falloffType == 1 ? pow(0.125, 3) : falloffType == 2 ? 0.125*0.125*(3-2*0.125) : falloffType == 3 ? 0.125*0.125*(2 - 0.125) : falloffType == 4 ? 0.125*(1 + 0.125*(1 - 0.125)) : 0"} {"falloffType == 0 ? 0.125 :falloffType == 1 ? pow(0.125, 3) : falloffType == 2 ? 0.125*0.125*(3-2*0.125) : falloffType == 3 ? 0.125*0.125*(2 - 0.125) : falloffType == 4 ? 0.125*(1 + 0.125*(1 - 0.125)) : 0"} {"falloffType == 0 ? 0.125 :falloffType == 1 ? pow(0.125, 3) : falloffType == 2 ? 0.125*0.125*(3-2*0.125) : falloffType == 3 ? 0.125*0.125*(2 - 0.125) : falloffType == 4 ? 0.125*(1 + 0.125*(1 - 0.125)) : 0"} {"falloffType == 0 ? 0.125 :falloffType == 1 ? pow(0.125, 3) : falloffType == 2 ? 0.125*0.125*(3-2*0.125) : falloffType == 3 ? 0.125*0.125*(2 - 0.125) : falloffType == 4 ? 0.125*(1 + 0.125*(1 - 0.125)) : 0"}}
   mix {{falloff}}
   name Multiply8
   xpos 1564
   ypos -477
  }
push $N1c8d5c00
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(7**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(7**2))}}
   crop false
   name Blur7
   xpos 1464
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.25 :falloffType == 1 ? pow(0.25, 3) : falloffType == 2 ? 0.25*0.25*(3-2*0.25) : falloffType == 3 ? 0.25*0.25*(2 - 0.25) : falloffType == 4 ? 0.25*(1 + 0.25*(1 - 0.25)) : 0"} {"falloffType == 0 ? 0.25 :falloffType == 1 ? pow(0.25, 3) : falloffType == 2 ? 0.25*0.25*(3-2*0.25) : falloffType == 3 ? 0.25*0.25*(2 - 0.25) : falloffType == 4 ? 0.25*(1 + 0.25*(1 - 0.25)) : 0"} {"falloffType == 0 ? 0.25 :falloffType == 1 ? pow(0.25, 3) : falloffType == 2 ? 0.25*0.25*(3-2*0.25) : falloffType == 3 ? 0.25*0.25*(2 - 0.25) : falloffType == 4 ? 0.25*(1 + 0.25*(1 - 0.25)) : 0"} {"falloffType == 0 ? 0.25 :falloffType == 1 ? pow(0.25, 3) : falloffType == 2 ? 0.25*0.25*(3-2*0.25) : falloffType == 3 ? 0.25*0.25*(2 - 0.25) : falloffType == 4 ? 0.25*(1 + 0.25*(1 - 0.25)) : 0"}}
   mix {{falloff}}
   name Multiply7
   xpos 1464
   ypos -477
  }
push $N1c8d5c00
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(6**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(6**2))}}
   crop false
   name Blur6
   xpos 1364
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.375 :falloffType == 1 ? pow(0.375, 3) : falloffType == 2 ? 0.375*0.375*(3-2*0.375) : falloffType == 3 ? 0.375*0.375*(2 - 0.375) : falloffType == 4 ? 0.375*(1 + 0.375*(1 - 0.375)) : 0"} {"falloffType == 0 ? 0.375 :falloffType == 1 ? pow(0.375, 3) : falloffType == 2 ? 0.375*0.375*(3-2*0.375) : falloffType == 3 ? 0.375*0.375*(2 - 0.375) : falloffType == 4 ? 0.375*(1 + 0.375*(1 - 0.375)) : 0"} {"falloffType == 0 ? 0.375 :falloffType == 1 ? pow(0.375, 3) : falloffType == 2 ? 0.375*0.375*(3-2*0.375) : falloffType == 3 ? 0.375*0.375*(2 - 0.375) : falloffType == 4 ? 0.375*(1 + 0.375*(1 - 0.375)) : 0"} {"falloffType == 0 ? 0.375 :falloffType == 1 ? pow(0.375, 3) : falloffType == 2 ? 0.375*0.375*(3-2*0.375) : falloffType == 3 ? 0.375*0.375*(2 - 0.375) : falloffType == 4 ? 0.375*(1 + 0.375*(1 - 0.375)) : 0"}}
   mix {{falloff}}
   name Multiply6
   xpos 1364
   ypos -477
  }
push $N1c8d5c00
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(5**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(5**2))}}
   crop false
   name Blur5
   xpos 1264
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"} {"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"} {"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"} {"falloffType == 0 ? 0.5 :falloffType == 1 ? pow(0.5, 3) : falloffType == 2 ? 0.5*0.5*(3-2*0.5) : falloffType == 3 ? 0.5*0.5*(2 - 0.5) : falloffType == 4 ? 0.5*(1 + 0.5*(1 - 0.5)) : 0"}}
   mix {{falloff}}
   name Multiply5
   xpos 1264
   ypos -477
  }
push $N1c8d5c00
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(4**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(4**2))}}
   crop false
   name Blur4
   xpos 1164
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.625 :falloffType == 1 ? pow(0.625, 3) : falloffType == 2 ? 0.625*0.625*(3-2*0.625) : falloffType == 3 ? 0.625*0.625*(2 - 0.625) : falloffType == 4 ? 0.625*(1 + 0.625*(1 - 0.625)) : 0"} {"falloffType == 0 ? 0.625 :falloffType == 1 ? pow(0.625, 3) : falloffType == 2 ? 0.625*0.625*(3-2*0.625) : falloffType == 3 ? 0.625*0.625*(2 - 0.625) : falloffType == 4 ? 0.625*(1 + 0.625*(1 - 0.625)) : 0"} {"falloffType == 0 ? 0.625 :falloffType == 1 ? pow(0.625, 3) : falloffType == 2 ? 0.625*0.625*(3-2*0.625) : falloffType == 3 ? 0.625*0.625*(2 - 0.625) : falloffType == 4 ? 0.625*(1 + 0.625*(1 - 0.625)) : 0"} {"falloffType == 0 ? 0.625 :falloffType == 1 ? pow(0.625, 3) : falloffType == 2 ? 0.625*0.625*(3-2*0.625) : falloffType == 3 ? 0.625*0.625*(2 - 0.625) : falloffType == 4 ? 0.625*(1 + 0.625*(1 - 0.625)) : 0"}}
   mix {{falloff}}
   name Multiply4
   xpos 1164
   ypos -477
  }
push $N1c8d5c00
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(3**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(3**2))}}
   crop false
   name Blur3
   xpos 1064
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.75 :falloffType == 1 ? pow(0.75, 3) : falloffType == 2 ? 0.75*0.75*(3-2*0.75) : falloffType == 3 ? 0.75*0.75*(2 - 0.75) : falloffType == 4 ? 0.75*(1 + 0.75*(1 - 0.75)) : 0"} {"falloffType == 0 ? 0.75 :falloffType == 1 ? pow(0.75, 3) : falloffType == 2 ? 0.75*0.75*(3-2*0.75) : falloffType == 3 ? 0.75*0.75*(2 - 0.75) : falloffType == 4 ? 0.75*(1 + 0.75*(1 - 0.75)) : 0"} {"falloffType == 0 ? 0.75 :falloffType == 1 ? pow(0.75, 3) : falloffType == 2 ? 0.75*0.75*(3-2*0.75) : falloffType == 3 ? 0.75*0.75*(2 - 0.75) : falloffType == 4 ? 0.75*(1 + 0.75*(1 - 0.75)) : 0"} {"falloffType == 0 ? 0.75 :falloffType == 1 ? pow(0.75, 3) : falloffType == 2 ? 0.75*0.75*(3-2*0.75) : falloffType == 3 ? 0.75*0.75*(2 - 0.75) : falloffType == 4 ? 0.75*(1 + 0.75*(1 - 0.75)) : 0"}}
   mix {{falloff}}
   name Multiply3
   xpos 1064
   ypos -477
  }
push 0
push $N1c8d5c00
  Blur {
   size {{((width/100*parent.size.w)*(aspectCalc.aspect.w/100)*(2**2))} {((height/100*parent.size.h)*(aspectCalc.aspect.h/100)*(2**2))}}
   crop false
   name Blur2
   xpos 964
   ypos -554
  }
  Multiply {
   value {{"falloffType == 0 ? 0.875 :falloffType == 1 ? pow(0.875, 3) : falloffType == 2 ? 0.875*0.875*(3-2*0.875) : falloffType == 3 ? 0.875*0.875*(2 - 0.875) : falloffType == 4 ? 0.875*(1 + 0.875*(1 - 0.875)) : 0"} {"falloffType == 0 ? 0.875 :falloffType == 1 ? pow(0.875, 3) : falloffType == 2 ? 0.875*0.875*(3-2*0.875) : falloffType == 3 ? 0.875*0.875*(2 - 0.875) : falloffType == 4 ? 0.875*(1 + 0.875*(1 - 0.875)) : 0"} {"falloffType == 0 ? 0.875 :falloffType == 1 ? pow(0.875, 3) : falloffType == 2 ? 0.875*0.875*(3-2*0.875) : falloffType == 3 ? 0.875*0.875*(2 - 0.875) : falloffType == 4 ? 0.875*(1 + 0.875*(1 - 0.875)) : 0"} {"falloffType == 0 ? 0.875 :falloffType == 1 ? pow(0.875, 3) : falloffType == 2 ? 0.875*0.875*(3-2*0.875) : falloffType == 3 ? 0.875*0.875*(2 - 0.875) : falloffType == 4 ? 0.875*(1 + 0.875*(1 - 0.875)) : 0"}}
   mix {{falloff}}
   name Multiply2
   xpos 964
   ypos -477
  }
push $N1c8d5c00
  Blur {
   size {{(width/100*parent.size*(aspectCalc.aspect.w/100))} {(height/100*parent.size*(aspectCalc.aspect.h/100))}}
   crop false
   name Blur1
   xpos 864
   ypos -554
  }
  Multiply {
   value {1 1 1 1}
   mix {{falloff}}
   name Multiply1
   xpos 864
   ypos -477
  }
  Merge2 {
   inputs 8+1
   operation {{MergeNumber.mergeNumber}}
   also_merge all
   name Merge1
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos 864
   ypos -327
  }
  NoOp {
   name End
   xpos 864
   ypos -279
  }
  Grade {
   channels all
   whitepoint 8
   black_clamp false
   name AverageMult
   xpos 864
   ypos 49
   disable {{"output2 == 4 ? 0 : 1"}}
  }
  Merge2 {
   inputs 2
   operation max
   also_merge all
   name Merge2
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos 864
   ypos 96
   disable {{"output2 == 4 && includeOriginal == 1 && AvgMaxOriginal == 1 ? 0 : 1"}}
  }
  Blur {
   size {{postBlur} {postBlur}}
   name BlurOriginal
   xpos 864
   ypos 155
  }
  Invert {
   name Invert2
   xpos 864
   ypos 283
   disable {{"parent.size < 0 ? 0 : 1"}}
  }
push $N1c8d4800
  Switch {
   inputs 2
   which {{"parent.size == 0 ? 0 : 1"}}
   name Switch1
   label "\[value which]"
   xpos 427
   ypos 283
  }
  Crop {
   inputs 0
   box {{input.format.x} {input.format.y} {input.format.r} {input.format.t}}
   reformat true
   crop false
   name Crop1
   xpos 96
   ypos -931
   addUserKnob {20 User}
   addUserKnob {22 cropToBbox l "Crop to Bounding Box" -STARTLINE T codeBBox()}
  }
  AddChannels {
   channels rgba
   name AddChannels2
   xpos 96
   ypos -891
  }
push $N456af800
  Merge2 {
   inputs 2
   name Merge3
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos -60
   ypos -891
  }
set N72732400 [stack 0]
  Group {
   name BBoxToFormat
   onCreate "n = nuke.thisNode()\ninputFormat = n.knob(\"inputFormat\")\ninputBBox = n.knob(\"inputBBox\")\ncrop = nuke.toNode(\"Crop6\")\ncropb = crop.knob('box')\noutputBBox = n.knob('outputBBox')\noutputBBoxCenter = n.knob(\"outputBBoxCenter\")\n\ninputFormat.setFlag(0x0000000000008000)\ninputBBox.setFlag(0x0000000000008000)\ncropb.setFlag(0x0000000000008000)\noutputBBox.setFlag(0x0000000000008000)\noutputBBoxCenter.setFlag(0x0000000000008000)\n\nn = nuke.thisNode()\nn.knob(\"overscan\").setRange(0,400)\nn.knob(\"overscanPercent\").setRange(1,4)"
   knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\nif k.name() == \"overscanType\":\n    if n.knob(\"overscanType\").getValue() == 1:\n        n.knob(\"overscanPercent\").setVisible(True)\n        n.knob(\"overscan\").setVisible(False)\n    else:\n        n.knob(\"overscanPercent\").setVisible(False)\n        n.knob(\"overscan\").setVisible(True)"
   tile_color 0xa57aaaff
   note_font "Verdana Bold"
   note_font_color 0xffffffff
   xpos 29
   ypos -812
   addUserKnob {20 CropBBox}
   addUserKnob {4 type l Type +INVISIBLE M {"To Format" "To BBox"}}
   addUserKnob {41 intersect T Crop6.intersect}
   addUserKnob {6 blackOutside l "Black Outside" -STARTLINE}
   addUserKnob {4 overscanType l "Overscan Type:" M {Pixels Percentage}}
   overscanType Percentage
   addUserKnob {14 overscan l Overscan +HIDDEN R 0 400}
   addUserKnob {14 overscanPercent l "Overscan Percent" R 1 4}
   overscanPercent 1.2
   addUserKnob {20 inputBbox l "BBox Data" n 1}
   addUserKnob {15 inputFormat l "Input Format"}
   inputFormat {0 0 {input.width} {input.height}}
   addUserKnob {15 inputBBox l "Input BBox"}
   inputBBox {{input.bbox.x} {input.bbox.y} {input.bbox.r} {input.bbox.t}}
   addUserKnob {12 outputBBoxCenter l OutputBBoxCenter}
   outputBBoxCenter {{OutputBBox1.outputBBoxCenter.w} {OutputBBox1.outputBBoxCenter.h}}
   addUserKnob {15 outputBBox l "Output BBox"}
   outputBBox {{OutputBBox1.OutputBBox} {OutputBBox1.OutputBBox} {OutputBBox1.OutputBBox} {OutputBBox1.OutputBBox}}
   addUserKnob {20 endGroup n -1}
   addUserKnob {20 info_1 l Info}
   addUserKnob {26 creator l Creator: T "<b><big>Tony Lyons"}
   addUserKnob {26 desc l Description: t "crop to inputformat\n\ndisplays values of input bbox" T CropBBox}
   addUserKnob {26 ver l Version: T v02}
  }
   Input {
    inputs 0
    name Input
    xpos 261
    ypos 394
   }
   Dot {
    name Dot2
    note_font_size 41
    xpos 295
    ypos 462
   }
set N72732c00 [stack 0]
   Dot {
    name Dot1
    note_font_size 41
    xpos -160
    ypos 462
   }
set N72733000 [stack 0]
push $N72732c00
   Crop {
    box {{curve} {curve} {input.width} {input.height}}
    crop {{parent.blackOutside}}
    name Crop6
    xpos 261
    ypos 510
    addUserKnob {20 User}
    addUserKnob {22 cropToBbox l "Crop to Bounding Box" -STARTLINE T codeBBox()}
   }
set N72733400 [stack 0]
   Remove {
    operation keep
    channels none
    name Remove1
    xpos 120
    ypos 504
   }
set N72733800 [stack 0]
   Transform {
    scale {{parent.overscanPercent} {parent.overscanPercent}}
    center {{input.bbox.r/2} {input.bbox.t/2}}
    shutteroffset centred
    name Transform1
    xpos 120
    ypos 555
   }
push $N72733800
   AdjBBox {
    numpixels {{parent.overscan} {parent.overscan}}
    name AdjBBox1
    xpos -5
    ypos 510
   }
   Switch {
    inputs 2
    which {{overscanType}}
    name Switch2
    label "\[value which]"
    xpos -5
    ypos 549
   }
   Merge2 {
    inputs 2
    bbox intersection
    Achannels {-rgba.red -rgba.green -rgba.blue rgba.alpha}
    Bchannels {-rgba.red -rgba.green -rgba.blue rgba.alpha}
    output {-rgba.red -rgba.green -rgba.blue rgba.alpha}
    name Merge1
    xpos -5
    ypos 647
    disable {{!parent.Crop6.intersect}}
   }
push $N72733000
   CopyBBox {
    inputs 2
    name CopyBBox1
    xpos -194
    ypos 653
   }
   BlackOutside {
    name BlackOutside1
    xpos -194
    ypos 692
    disable {{!parent.blackOutside}}
   }
   Dot {
    name Dot4
    note_font_size 41
    xpos -160
    ypos 769
   }
push $N72733400
   Switch {
    inputs 2
    which {{"overscanType == 0 ? overscan.w != 0 || overscan.h != 0 : overscanPercent.w != 1 || overscanPercent.h != 1 ? 1 : 0"}}
    name Switch1
    label "\[value which]"
    xpos 261
    ypos 759
   }
set N6f525800 [stack 0]
   Output {
    name Output1
    xpos 261
    ypos 921
   }
push $N6f525800
   NoOp {
    name OutputBBox1
    selected true
    xpos 378
    ypos 821
    addUserKnob {20 User}
    addUserKnob {15 OutputBBox l "Output BBox"}
    OutputBBox {{input.bbox.x} {input.bbox.y} {input.bbox.r} {input.bbox.t}}
    addUserKnob {14 outputBBoxCenter l "Output BBox Center" R 0 100}
    outputBBoxCenter {{OutputBBox.x+(OutputBBox.r-OutputBBox.x)/2} {OutputBBox.y+(OutputBBox.t-OutputBBox.y)/2}}
   }
  end_group
push $N72732400
  Merge2 {
   inputs 2
   name Merge4
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos -60
   ypos -748
  }
push $N456af800
  CopyBBox {
   inputs 2
   name CopyBBox1
   xpos -221
   ypos -748
  }
  Dot {
   name Dot22
   note_font_size 41
   xpos -187
   ypos 198
  }
  Merge2 {
   inputs 2
   operation copy
   bbox B
   Achannels none
   Bchannels none
   output none
   name Merge5
   label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
   xpos -221
   ypos 283
  }
  Dot {
   name Dot17
   label A
   note_font_size 41
   xpos -187
   ypos 675
  }
  Dot {
   name Dot7
   note_font_size 41
   xpos -187
   ypos 805
  }
push $N456af800
  Dot {
   name Dot2
   note_font_size 41
   xpos -588
   ypos -1062
  }
  Dot {
   name Dot18
   label B
   note_font_size 41
   xpos -588
   ypos 654
  }
  Dot {
   name Dot3
   note_font_size 41
   xpos -588
   ypos 895
  }
  Merge2 {
   inputs 2+1
   operation copy
   Achannels none
   Bchannels none
   output none
   also_merge all
   name MergeKeymix
   xpos -221
   ypos 888
  }
  Output {
   name Output1
   xpos -221
   ypos 1202
  }
  NoOp {
   inputs 0
   name MergeNumber
   xpos 202
   ypos -1145
   addUserKnob {20 User}
   addUserKnob {3 mergeNumber}
   mergeNumber {{"output2 == 0 ? 25 : output2 == 1 ? 24 : output2 == 2 ? 22 : output2 == 3 ? 13 : output2 == 4 ? 24 : output2 == 5 ? 17 : 18"}}
  }
 end_group
 Dot {
  name Dot40
  note_font_size 41
  xpos 1059
  ypos 1277
 }
set N68d9b400 [stack 0]
 Grade {
  channels all
  white {{wrapAllAmount/10}}
  name GradeBgWrapAmount
  xpos 1025
  ypos 1399
 }
 Multiply {
  channels rgba
  value {{globalAmount}}
  name MultiplyGlobal1
  label "\[value value]"
  xpos 1025
  ypos 1566
 }
 Dot {
  name Dot37
  label "WRAP ALL"
  note_font_size 61
  xpos 1059
  ypos 1692
 }
set N77ef2000 [stack 0]
 Dot {
  name Dot27
  note_font_size 41
  xpos 1059
  ypos 3062
 }
set N77ef2400 [stack 0]
 Merge2 {
  inputs 2
  name Merge1
  xpos 1530
  ypos 3168
 }
 Shuffle {
  alpha white
  name Shuffle5
  tile_color 0xffffffff
  note_font_color 0xffffffff
  xpos 1530
  ypos 3216
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge14
  xpos 1530
  ypos 3274
 }
push $Nd2cf6000
push $N77ef2400
 Shuffle {
  alpha white
  name Shuffle2
  tile_color 0xffffffff
  note_font_color 0xffffffff
  xpos 1025
  ypos 3158
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge7
  xpos 1025
  ypos 3221
 }
push $N684dbc00
push $N478dfc00
 Shuffle {
  alpha white
  name Shuffle4
  tile_color 0xffffffff
  note_font_color 0xffffffff
  xpos 1708
  ypos 3020
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge13
  xpos 1708
  ypos 3104
 }
push $N7d092400
 Dot {
  name Dot21
  xpos 2349
  ypos 397
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle3
  tile_color 0xffffffff
  label alpha
  note_font_size 21
  note_font_color 0xffffffff
  xpos 2315
  ypos 496
 }
 Dot {
  name Dot23
  xpos 2349
  ypos 3399
 }
push $N68d9b400
 Dot {
  name Dot29
  note_font_size 41
  xpos 757
  ypos 1277
 }
set N6b96d000 [stack 0]
 Grade {
  channels rgba
  gamma {{parent.bleedColorFalloff_2}}
  name Grade1
  selected true
  xpos 724
  ypos 2638
 }
 Dot {
  name Dot33
  note_font_size 41
  xpos 758
  ypos 2835
 }
 Multiply {
  channels rgba
  value {{globalAmount}}
  name MultiplyGlobal2
  label "\[value value]"
  xpos 297
  ypos 2828
 }
push $N2183cc00
 Dot {
  name Dot38
  note_font_size 41
  xpos 438
  ypos 725
 }
set N6aaa6000 [stack 0]
 Dot {
  name Dot2
  note_font_size 41
  xpos 439
  ypos 802
 }
set N6aaa6400 [stack 0]
 Dot {
  name Dot17
  note_font_size 41
  xpos 334
  ypos 802
 }
 Dot {
  name Dot16
  note_font_size 41
  xpos 334
  ypos 1201
 }
push $N6aaa6400
 Blur {
  size {{(width/13*parent.bleedColorSize*16*(ExponGlowWrapAll.aspectCalc.aspect.w/100))} {(height/13*parent.bleedColorSize*16*(ExponGlowWrapAll.aspectCalc.aspect.h/100))}}
  crop false
  name Blur6
  xpos 856
  ypos 874
 }
push $N6aaa6400
 Blur {
  size {{(width/13*parent.bleedColorSize*8*(ExponGlowWrapAll.aspectCalc.aspect.w/100))} {(height/13*parent.bleedColorSize*8*(ExponGlowWrapAll.aspectCalc.aspect.h/100))}}
  crop false
  name Blur4
  xpos 743
  ypos 873
 }
push $N6aaa6400
 Blur {
  size {{(width/15*parent.bleedColorSize*4*(ExponGlowWrapAll.aspectCalc.aspect.w/100))} {(height/15*parent.bleedColorSize*4*(ExponGlowWrapAll.aspectCalc.aspect.h/100))}}
  crop false
  name Blur3
  xpos 627
  ypos 874
 }
push $N6aaa6400
 Blur {
  size {{(width/20*parent.bleedColorSize*2*(ExponGlowWrapAll.aspectCalc.aspect.w/100))} {(height/20*parent.bleedColorSize*2*(ExponGlowWrapAll.aspectCalc.aspect.h/100))}}
  crop false
  name Blur2
  xpos 515
  ypos 872
 }
push $N6aaa6400
 Blur {
  size {{(width/25*parent.bleedColorSize*(ExponGlowWrapAll.aspectCalc.aspect.w/100))} {(height/25*parent.bleedColorSize*(ExponGlowWrapAll.aspectCalc.aspect.h/100))}}
  crop false
  name Blur1
  xpos 404
  ypos 871
 }
 Merge2 {
  inputs 2
  operation under
  bbox B
  name Merge2
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 404
  ypos 941
 }
 Merge2 {
  inputs 2
  operation under
  bbox B
  name Merge4
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 404
  ypos 999
 }
 Merge2 {
  inputs 2
  operation under
  bbox B
  name Merge8
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 404
  ypos 1049
 }
 Merge2 {
  inputs 2
  operation under
  bbox B
  name Merge12
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 404
  ypos 1087
 }
 Unpremult {
  name Unpremult2
  xpos 404
  ypos 1111
 }
 Blur {
  size {{(width/50*parent.bleedColorSize*10*(ExponGlowWrapAll.aspectCalc.aspect.w/100))} {(height/50*parent.bleedColorSize*10*(ExponGlowWrapAll.aspectCalc.aspect.h/100))}}
  crop false
  name Blur5
  xpos 404
  ypos 1151
 }
 CopyBBox {
  inputs 2
  name CopyBBox1
  xpos 404
  ypos 1198
 }
 Unpremult {
  name Unpremult5
  xpos 404
  ypos 2385
 }
 Colorspace {
  channels all
  colorspace_out HSV
  name Colorspace1
  xpos 404
  ypos 2456
 }
 Multiply {
  value {1 1 0 1}
  name Multiply5
  label "\[value value]"
  xpos 404
  ypos 2532
 }
push $N478df800
push $N77ef2000
push $N6aaa6000
 Dot {
  name Dot10
  xpos 201
  ypos 725
 }
 Clamp {
  minimum 0.001
  maximum 100
  name Clamp1
  xpos 167
  ypos 996
 }
 Dot {
  name Dot24
  xpos 201
  ypos 1517
 }
 Multiply {
  channels rgba
  value {{globalAmount}}
  name MultiplyGlobal
  label "\[value value]"
  xpos 19
  ypos 1507
 }
push $N6b96d000
 Colorspace {
  channels all
  colorspace_out HSV
  name Colorspace6
  xpos -13
  ypos 1267
 }
 Multiply {
  value {1 1 0 1}
  name Multiply4
  label "\[value value]"
  xpos -123
  ypos 1262
 }
push $N684db000
 Remove {
  operation keep
  channels rgba
  name Remove1
  xpos -413
  ypos 594
 }
 Unpremult {
  channels all
  name Unpremult1
  xpos -407
  ypos 1094
  disable {{premultiplied*-1+1 x1 1}}
 }
set N82c56800 [stack 0]
 Dot {
  name Dot12
  xpos -226
  ypos 1101
 }
 Colorspace {
  channels all
  colorspace_out HSV
  name Colorspace5
  xpos -260
  ypos 1140
 }
 Multiply {
  value {0 0 1 1}
  name Multiply3
  label "\[value value]"
  xpos -260
  ypos 1188
 }
 Merge2 {
  inputs 2
  operation plus
  Achannels none
  Bchannels none
  output none
  also_merge all
  name Merge3
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos -260
  ypos 1267
 }
 Colorspace {
  channels all
  colorspace_in HSV
  name Colorspace7
  xpos -260
  ypos 1327
 }
 Dot {
  name Dot36
  label "BLEND EDGES"
  note_font_size 45
  xpos -226
  ypos 1408
 }
push $N82c56800
 Dot {
  name Dot18
  note_font_size 41
  xpos -373
  ypos 1514
 }
set N74fa0400 [stack 0]
 Merge2 {
  inputs 2+1
  operation copy
  bbox B
  Achannels none
  Bchannels none
  output none
  also_merge all
  mix {{blendEdgesAmount}}
  name Merge10
  xpos -260
  ypos 1507
 }
 Dot {
  name Dot22
  note_font_size 41
  xpos -226
  ypos 1588
 }
push $N74fa0400
 Switch {
  inputs 2
  which {{"blendEdgesAmount == 0 ? 0 : 1"}}
  name Switch3
  xpos -407
  ypos 1585
 }
 Merge2 {
  inputs 2
  bbox B
  Achannels none
  Bchannels none
  output none
  also_merge all
  name Merge5
  xpos -407
  ypos 1685
 }
 Merge2 {
  inputs 2
  bbox B
  Achannels none
  Bchannels none
  output none
  also_merge all
  name Merge6
  xpos -407
  ypos 1791
 }
 Dot {
  name Dot34
  note_font_size 41
  xpos -373
  ypos 2417
 }
set N74fa1c00 [stack 0]
 Colorspace {
  channels all
  colorspace_out HSV
  name Colorspace2
  xpos -81
  ypos 2410
 }
 Multiply {
  value {0 0 1 1}
  name Multiply6
  label "\[value value]"
  xpos -81
  ypos 2458
 }
 Merge2 {
  inputs 2
  operation plus
  Achannels none
  Bchannels none
  output none
  also_merge all
  name Merge11
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos -81
  ypos 2537
 }
 Colorspace {
  channels all
  colorspace_in HSV
  name Colorspace8
  xpos -81
  ypos 2606
 }
push $N82c56800
 Dot {
  name Dot13
  xpos -579
  ypos 1101
 }
 Dot {
  name Dot14
  xpos -579
  ypos 2559
 }
push $N74fa1c00
 Copy {
  inputs 2
  from0 rgba.alpha
  to0 rgba.alpha
  name Copy1
  xpos -407
  ypos 2552
 }
 Dot {
  name Dot6
  note_font_size 41
  xpos -373
  ypos 2649
 }
set N6adabc00 [stack 0]
 Merge2 {
  inputs 2+1
  operation copy
  output {rgba.red rgba.green rgba.blue -rgba.alpha}
  mix {{bleedColorAmount}}
  name Merge9
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos -81
  ypos 2828
 }
push $N6adabc00
 Switch {
  inputs 2
  which {{"parent.bleedColorAmount== 0 ? 0 : 1"}}
  name Switch2
  xpos -407
  ypos 2832
 }
 Premult {
  name Premult3
  xpos -407
  ypos 2983
  disable {{premultiplied*-1+1 i}}
 }
 Dot {
  name Dot19
  xpos -373
  ypos 3396
 }
 Switch {
  inputs 5
  which {{"\[value ls parent.outputView]"}}
  name Switch1
  xpos 1708
  ypos 3395
 }
push $N684db800
 Dot {
  name Dot5
  note_font_size 41
  xpos -825
  ypos 3581
 }
 Merge2 {
  inputs 2+1
  operation copy
  also_merge all
  name MergeCopyLightWrapPro
  label "\[ expr \{ \[value mix] == 1 ? \" \" : \[concat Mix: \[value mix]] \}]"
  xpos 1708
  ypos 3580
 }
 Output {
  name Output1
  xpos 1708
  ypos 3898
 }
end_group
Dot {
 name Dot75
 xpos 4571
 ypos 11709
}
push $N64d3d800
push $N6ce9a800
Merge2 {
 inputs 2
 name Merge16
 xpos 4848
 ypos 11536
}
Merge2 {
 inputs 2
 operation plus
 bbox B
 name Merge18
 xpos 4848
 ypos 11706
}
Dot {
 name Dot11
 xpos 4882
 ypos 13285
}
set N8e7f4c00 [stack 0]
Merge2 {
 inputs 2
 operation mask
 name Merge11
 xpos 4498
 ypos 13282
 disable true
}
VolumeRays {
 name VolumeRays1
 label "Mar 20 2005"
 xpos 4498
 ypos 13314
 vol_pos {2140 728}
 raylength 150
 pre_blur 5
 quality "Very High"
 flicker_speed 0
 volume_end_color {0 0 0 0}
}
Saturation {
 saturation 0.15
 name Saturation2
 xpos 4498
 ypos 13350
}
Group {
 name Glow_Exponential4
 help "Exponential Glow node, with options to recolor and adjust falloff."
 knobChanged "\nk = nuke.thisKnob()\nif k.name()=='crop':\n    if k.value():\n        nuke.thisNode().knob('overscan').setEnabled(True)\n    else:\n        nuke.thisNode().knob('overscan').setEnabled(False)\n"
 tile_color 0xc97200ff
 xpos 4498
 ypos 13406
 addUserKnob {20 ge l Glow}
 addUserKnob {26 glow_ctrls l "@b;Glow:"}
 addUserKnob {7 size t "Size of the glow" R 0 100}
 size 8
 addUserKnob {7 intensity t "Brightness of the Glow" R 0 10}
 intensity 5
 addUserKnob {7 falloff t "Adjust the light falloff of the glow. Higher values will have a longer falloff, resulting in visually bigger glows."}
 falloff 0.75
 addUserKnob {26 glow_highlights l "@b;Highlights:"}
 addUserKnob {41 range t "Luma key to define which parts of the image will glow." T Keyer1.range}
 addUserKnob {26 glow_colors l "@b;Glow Colors:"}
 addUserKnob {7 saturation l "color from img" t "By default the glow takes on the colors of the plate. By using this knob you can desaturate the color of the glow."}
 saturation 1
 addUserKnob {18 core_color l "core re-color" t "Re-color the core of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 core_color {1 1 1}
 addUserKnob {6 core_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {18 falloff_color l "falloff re-color" t "Re-color the falloff of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 falloff_color {1 1 1}
 addUserKnob {6 falloff_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 threshold l "core threshold" t "Define which parts of the glow are core or falloff."}
 threshold 1
 addUserKnob {26 glow_options l "@b;Options:"}
 addUserKnob {14 aspect l "aspect ratio" t "Set the aspect ratio for your glow. Streaky results can be obtained by changing the ratio here." R 0 100}
 aspect {1 1}
 addUserKnob {6 glow_only l "Glow only" t "By default the glow is added onto the plate. Checking this box will output the glow only. " +STARTLINE}
 addUserKnob {6 crop l "Crop to Format" t "This glow can expand the bounding box to massive values, checking this box can prevent your bbox from getting unmanageable." +STARTLINE}
 crop true
 addUserKnob {7 overscan l "overscan (%)" t "If you are cropping to format but originally had some values outside the format, you can add some overscan here to preserve these. The values are a percentage of the format size." R 0 100}
 overscan 10
 addUserKnob {7 mix t "Mix back with the original plate (or black, if glow only is enabled)"}
 mix 0.05
 addUserKnob {26 ""}
 addUserKnob {26 spin_copyright l "" t " <b>SPIN<span style=\"color:#b32026\">VFX</span></b>\nGlow_Exponential\nVersion 1.0\n2017" +STARTLINE T "<span style=\"color:#aaa;font-family:sans-serif;font-size:8pt\"><b>SPIN<span style=\"color:#b32026\">VFX</span></b> - Version 1.0 - 2017 - <a href=\"https://github.com/SpinVFX/spin_nuke_gizmos/\" style=\"color:#aaa\">Github Page</a></span>"}
}
 Input {
  inputs 0
  name img
  xpos 0
  ypos -59
 }
 Dot {
  name Dot1
  tile_color 0xcccccc00
  xpos 34
  ypos 50
 }
set N8d40c800 [stack 0]
 Dot {
  name Dot24
  tile_color 0xcccccc00
  xpos 34
  ypos 1274
 }
set N8d40cc00 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 136
  ypos 158
  number 1
 }
push $N8d40c800
 NoOp {
  name CTRL
  xpos 304
  ypos 46
  addUserKnob {20 User}
  addUserKnob {7 falloff R 0 2}
  falloff {{"max(parent.falloff/2+0.5, 0.0001)"}}
  addUserKnob {7 falloff_intensity}
  falloff_intensity {{falloff+pow(falloff,2)+pow(falloff,3)+pow(falloff,4)+pow(falloff,5)+pow(falloff,6)+pow(falloff,7)+pow(falloff,8)+pow(falloff,9)+pow(falloff,10)}}
  addUserKnob {14 size R 0 100}
  size {{parent.size/20*parent.aspect.w} {parent.size/20*parent.aspect.h}}
  addUserKnob {7 intensity}
  intensity {{parent.intensity/falloff_intensity}}
  addUserKnob {7 core R 0 2}
  core {{threshold}}
  addUserKnob {7 core_length}
  core_length {{sqrt(pow(core_color.r,2)+pow(core_color.g,2)+pow(core_color.b,2))/sqrt(3)}}
  addUserKnob {7 falloff_length}
  falloff_length {{sqrt(pow(falloff_color.r,2)+pow(falloff_color.g,2)+pow(falloff_color.b,2))/sqrt(3)}}
 }
 Keyer {
  operation "luminance key"
  name Keyer1
  xpos 304
  ypos 98
 }
 ChannelMerge {
  inputs 2
  operation in
  name ChannelMerge1
  xpos 304
  ypos 146
  disable {{"!\[exists parent.input1] "}}
 }
 Premult {
  name Premult1
  xpos 304
  ypos 202
 }
 Remove {
  operation keep
  channels rgb
  name Remove1
  xpos 304
  ypos 228
 }
 Multiply {
  value {{parent.CTRL.intensity}}
  name Multiplyer
  xpos 304
  ypos 263
 }
 Saturation {
  saturation {{parent.saturation}}
  name Saturation1
  xpos 304
  ypos 325
 }
 Dot {
  name Dot3
  tile_color 0x7aa9ff00
  xpos 338
  ypos 372
 }
set Nc524f000 [stack 0]
 Dot {
  name Dot2
  tile_color 0x7aa9ff00
  xpos 604
  ypos 372
 }
set Nc524f400 [stack 0]
 Dot {
  name Dot4
  tile_color 0x7aa9ff00
  xpos 870
  ypos 372
 }
set Nc524f800 [stack 0]
 Dot {
  name Dot5
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 372
 }
set Nc524fc00 [stack 0]
 Dot {
  name Dot6
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 372
 }
set N71b72000 [stack 0]
 Dot {
  name Dot7
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 372
 }
set N71b72400 [stack 0]
 Dot {
  name Dot8
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 372
 }
set N71b72800 [stack 0]
 Dot {
  name Dot9
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 372
 }
set N71b72c00 [stack 0]
 Dot {
  name Dot10
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 372
 }
set N71b73000 [stack 0]
 Dot {
  name Dot11
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 372
 }
 Blur {
  size {{Blur9.size*2} {Blur9.size*2}}
  crop false
  name Blur10
  xpos 2698
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,10)}}
  name Multiply10
  xpos 2698
  ypos 543
 }
 Dot {
  name Dot20
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 796
 }
push $N71b73000
 Blur {
  size {{Blur8.size*2} {Blur8.size*2}}
  crop false
  name Blur9
  xpos 2432
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,9)}}
  name Multiply9
  xpos 2432
  ypos 542
 }
 Dot {
  name Dot19
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 770
 }
push $N71b72c00
 Blur {
  size {{Blur7.size*2} {Blur7.size*2}}
  crop false
  name Blur8
  xpos 2166
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,8)}}
  name Multiply8
  xpos 2166
  ypos 536
 }
 Dot {
  name Dot18
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 744
 }
push $N71b72800
 Blur {
  size {{Blur6.size*2} {Blur6.size*2}}
  crop false
  name Blur7
  xpos 1900
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,7)}}
  name Multiply7
  xpos 1900
  ypos 528
 }
 Dot {
  name Dot17
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 718
 }
push $N71b72400
 Blur {
  size {{Blur5.size*2} {Blur5.size*2}}
  crop false
  name Blur6
  xpos 1634
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,6)}}
  name Multiply6
  xpos 1634
  ypos 528
 }
 Dot {
  name Dot16
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 692
 }
push $N71b72000
 Blur {
  size {{Blur4.size*2} {Blur4.size*2}}
  crop false
  name Blur5
  xpos 1368
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,5)}}
  name Multiply5
  xpos 1368
  ypos 524
 }
 Dot {
  name Dot15
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 666
 }
push $Nc524fc00
 Blur {
  size {{Blur3.size*2} {Blur3.size*2}}
  crop false
  name Blur4
  xpos 1102
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,4)}}
  name Multiply4
  xpos 1102
  ypos 518
 }
 Dot {
  name Dot14
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 640
 }
push $Nc524f800
 Blur {
  size {{Blur2.size*2} {Blur2.size*2}}
  crop false
  name Blur3
  xpos 836
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,3)}}
  name Multiply3
  xpos 836
  ypos 509
 }
 Dot {
  name Dot13
  tile_color 0x7aa9ff00
  xpos 870
  ypos 614
 }
push $Nc524f400
 Blur {
  size {{Blur1.size*2} {Blur1.size*2}}
  crop false
  name Blur2
  xpos 570
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,2)}}
  name Multiply2
  xpos 570
  ypos 508
 }
 Dot {
  name Dot12
  tile_color 0x7aa9ff00
  xpos 604
  ypos 588
 }
push $Nc524f000
 Blur {
  size {{CTRL.size*2} {CTRL.size*2}}
  crop false
  name Blur1
  xpos 304
  ypos 440
 }
 Multiply {
  value {{CTRL.falloff}}
  name Multiply1
  xpos 304
  ypos 512
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge1
  xpos 304
  ypos 584
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos 304
  ypos 610
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge3
  xpos 304
  ypos 636
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge4
  xpos 304
  ypos 662
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge5
  xpos 304
  ypos 688
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge6
  xpos 304
  ypos 714
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge7
  xpos 304
  ypos 740
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge8
  xpos 304
  ypos 766
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge9
  xpos 304
  ypos 792
 }
 Dot {
  name Dot21
  tile_color 0x4b5ec600
  xpos 338
  ypos 928
 }
set Neb2af000 [stack 0]
 Dot {
  name Dot22
  tile_color 0x4b5ec600
  xpos 498
  ypos 928
 }
 Grade {
  whitepoint {{CTRL.core}}
  white_clamp true
  name Grade2
  xpos 464
  ypos 977
 }
 Gamma {
  channels rgb
  value {{parent.falloff_color.r/CTRL.falloff_length} {parent.falloff_color.g/CTRL.falloff_length} {parent.falloff_color.b/CTRL.falloff_length} {curve}}
  name Gamma1
  xpos 464
  ypos 1037
 }
 Grade {
  whitepoint {{CTRL.core}}
  reverse true
  name Grade3
  xpos 464
  ypos 1082
 }
push $Neb2af000
 Clamp {
  minimum {{CTRL.core}}
  maximum_enable false
  name Clamp1
  xpos 304
  ypos 972
 }
 Grade {
  add {{1-CTRL.core}}
  name Grade4
  xpos 304
  ypos 1020
 }
 Gamma {
  channels rgb
  value {{1+(1-parent.core_color.r)/CTRL.core_length} {1+(1-parent.core_color.g)/CTRL.core_length} {1+(1-parent.core_color.b)/CTRL.core_length} {curve}}
  name Gamma2
  xpos 304
  ypos 1061
 }
 Add {
  channels rgb
  value -1
  name Add1
  xpos 304
  ypos 1087
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge10
  xpos 304
  ypos 1157
 }
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 304
  ypos 1183
 }
 Multiply {
  value {{parent.mix}}
  name mix
  xpos 304
  ypos 1217
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge11
  xpos 304
  ypos 1270
  disable {{parent.glow_only}}
 }
 Dot {
  name Dot23
  tile_color 0x4b5ec600
  xpos 338
  ypos 1436
 }
push $N8d40cc00
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  name Copy1
  xpos 0
  ypos 1414
 }
 Crop {
  box {{-width*(parent.overscan/100)/2} {-height*(parent.overscan/100)/2} {width+(width*(parent.overscan/100)/2)} {height+(height*(parent.overscan/100)/2)}}
  crop false
  name Crop2
  xpos 0
  ypos 1495
  disable {{!parent.crop}}
 }
 Output {
  name Output1
  xpos 0
  ypos 1543
 }
end_group
Blur {
 channels rgba
 size 10
 name Blur2
 label "Size: \[ value size ]"
 xpos 4498
 ypos 13430
 disable true
}
push $N8e7f4c00
Merge2 {
 inputs 2
 operation plus
 bbox B
 mix 0.25
 name Merge12
 xpos 4848
 ypos 13436
 disable true
}
Merge2 {
 inputs 2
 name Merge24
 xpos 4848
 ypos 14847
}
ColorCorrect {
 highlights.gain 0.95
 name ColorCorrect2
 label "GAIN DOWN TO .9"
 xpos 4848
 ypos 15547
}
Grade {
 multiply {0.991666615 0.9866666794 1.021666646 1}
 mix 0.5
 name Grade75
 label "Mix: \[ value mix ]"
 xpos 4848
 ypos 15609
}
Grade {
 inputs 1+1
 name Grade18
 label "Mix: \[ value mix ]"
 xpos 4848
 ypos 15742
}
Grade {
 inputs 1+1
 name Grade31
 label "Mix: \[ value mix ]"
 xpos 4848
 ypos 15891
}
Group {
 name Glow_Exponential1
 help "Exponential Glow node, with options to recolor and adjust falloff."
 knobChanged "\nk = nuke.thisKnob()\nif k.name()=='crop':\n    if k.value():\n        nuke.thisNode().knob('overscan').setEnabled(True)\n    else:\n        nuke.thisNode().knob('overscan').setEnabled(False)\n"
 tile_color 0xc97200ff
 xpos 4848
 ypos 16482
 addUserKnob {20 ge l Glow}
 addUserKnob {26 glow_ctrls l "@b;Glow:"}
 addUserKnob {7 size t "Size of the glow" R 0 100}
 size 6
 addUserKnob {7 intensity t "Brightness of the Glow" R 0 10}
 intensity 1
 addUserKnob {7 falloff t "Adjust the light falloff of the glow. Higher values will have a longer falloff, resulting in visually bigger glows."}
 falloff 0.75
 addUserKnob {26 glow_highlights l "@b;Highlights:"}
 addUserKnob {41 range t "Luma key to define which parts of the image will glow." T Keyer1.range}
 addUserKnob {26 glow_colors l "@b;Glow Colors:"}
 addUserKnob {7 saturation l "color from img" t "By default the glow takes on the colors of the plate. By using this knob you can desaturate the color of the glow."}
 saturation 1
 addUserKnob {18 core_color l "core re-color" t "Re-color the core of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 core_color {1 1 1}
 addUserKnob {6 core_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {18 falloff_color l "falloff re-color" t "Re-color the falloff of the glow. Use the core threshold to define which parts of the glow are core or falloff."}
 falloff_color {1 1 1}
 addUserKnob {6 falloff_color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 threshold l "core threshold" t "Define which parts of the glow are core or falloff."}
 threshold 1
 addUserKnob {26 glow_options l "@b;Options:"}
 addUserKnob {14 aspect l "aspect ratio" t "Set the aspect ratio for your glow. Streaky results can be obtained by changing the ratio here." R 0 100}
 aspect {1 1}
 addUserKnob {6 glow_only l "Glow only" t "By default the glow is added onto the plate. Checking this box will output the glow only. " +STARTLINE}
 addUserKnob {6 crop l "Crop to Format" t "This glow can expand the bounding box to massive values, checking this box can prevent your bbox from getting unmanageable." +STARTLINE}
 crop true
 addUserKnob {7 overscan l "overscan (%)" t "If you are cropping to format but originally had some values outside the format, you can add some overscan here to preserve these. The values are a percentage of the format size." R 0 100}
 overscan 10
 addUserKnob {7 mix t "Mix back with the original plate (or black, if glow only is enabled)"}
 mix 0.05
 addUserKnob {26 ""}
 addUserKnob {26 spin_copyright l "" t " <b>SPIN<span style=\"color:#b32026\">VFX</span></b>\nGlow_Exponential\nVersion 1.0\n2017" +STARTLINE T "<span style=\"color:#aaa;font-family:sans-serif;font-size:8pt\"><b>SPIN<span style=\"color:#b32026\">VFX</span></b> - Version 1.0 - 2017 - <a href=\"https://github.com/SpinVFX/spin_nuke_gizmos/\" style=\"color:#aaa\">Github Page</a></span>"}
}
 Input {
  inputs 0
  name img
  xpos 0
  ypos -59
 }
 Dot {
  name Dot1
  tile_color 0xcccccc00
  xpos 34
  ypos 50
 }
set N217ff400 [stack 0]
 Dot {
  name Dot24
  tile_color 0xcccccc00
  xpos 34
  ypos 1274
 }
set N217ff800 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 136
  ypos 158
  number 1
 }
push $N217ff400
 NoOp {
  name CTRL
  xpos 304
  ypos 46
  addUserKnob {20 User}
  addUserKnob {7 falloff R 0 2}
  falloff {{"max(parent.falloff/2+0.5, 0.0001)"}}
  addUserKnob {7 falloff_intensity}
  falloff_intensity {{falloff+pow(falloff,2)+pow(falloff,3)+pow(falloff,4)+pow(falloff,5)+pow(falloff,6)+pow(falloff,7)+pow(falloff,8)+pow(falloff,9)+pow(falloff,10)}}
  addUserKnob {14 size R 0 100}
  size {{parent.size/20*parent.aspect.w} {parent.size/20*parent.aspect.h}}
  addUserKnob {7 intensity}
  intensity {{parent.intensity/falloff_intensity}}
  addUserKnob {7 core R 0 2}
  core {{threshold}}
  addUserKnob {7 core_length}
  core_length {{sqrt(pow(core_color.r,2)+pow(core_color.g,2)+pow(core_color.b,2))/sqrt(3)}}
  addUserKnob {7 falloff_length}
  falloff_length {{sqrt(pow(falloff_color.r,2)+pow(falloff_color.g,2)+pow(falloff_color.b,2))/sqrt(3)}}
 }
 Keyer {
  operation "luminance key"
  range {0 0.5091790611 1 1}
  name Keyer1
  xpos 304
  ypos 98
 }
 ChannelMerge {
  inputs 2
  operation in
  name ChannelMerge1
  xpos 304
  ypos 146
  disable {{"!\[exists parent.input1] "}}
 }
 Premult {
  name Premult1
  xpos 304
  ypos 202
 }
 Remove {
  operation keep
  channels rgb
  name Remove1
  xpos 304
  ypos 228
 }
 Multiply {
  value {{parent.CTRL.intensity}}
  name Multiplyer
  xpos 304
  ypos 263
 }
 Saturation {
  saturation {{parent.saturation}}
  name Saturation1
  xpos 304
  ypos 325
 }
 Dot {
  name Dot3
  tile_color 0x7aa9ff00
  xpos 338
  ypos 372
 }
set N8ed17c00 [stack 0]
 Dot {
  name Dot2
  tile_color 0x7aa9ff00
  xpos 604
  ypos 372
 }
set N6adc4000 [stack 0]
 Dot {
  name Dot4
  tile_color 0x7aa9ff00
  xpos 870
  ypos 372
 }
set N6adc4400 [stack 0]
 Dot {
  name Dot5
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 372
 }
set N6adc4800 [stack 0]
 Dot {
  name Dot6
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 372
 }
set N6adc4c00 [stack 0]
 Dot {
  name Dot7
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 372
 }
set N6adc5000 [stack 0]
 Dot {
  name Dot8
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 372
 }
set N6adc5400 [stack 0]
 Dot {
  name Dot9
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 372
 }
set N6adc5800 [stack 0]
 Dot {
  name Dot10
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 372
 }
set N6adc5c00 [stack 0]
 Dot {
  name Dot11
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 372
 }
 Blur {
  size {{Blur9.size*2} {Blur9.size*2}}
  crop false
  name Blur10
  xpos 2698
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,10)}}
  name Multiply10
  xpos 2698
  ypos 543
 }
 Dot {
  name Dot20
  tile_color 0x7aa9ff00
  xpos 2732
  ypos 796
 }
push $N6adc5c00
 Blur {
  size {{Blur8.size*2} {Blur8.size*2}}
  crop false
  name Blur9
  xpos 2432
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,9)}}
  name Multiply9
  xpos 2432
  ypos 542
 }
 Dot {
  name Dot19
  tile_color 0x7aa9ff00
  xpos 2466
  ypos 770
 }
push $N6adc5800
 Blur {
  size {{Blur7.size*2} {Blur7.size*2}}
  crop false
  name Blur8
  xpos 2166
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,8)}}
  name Multiply8
  xpos 2166
  ypos 536
 }
 Dot {
  name Dot18
  tile_color 0x7aa9ff00
  xpos 2200
  ypos 744
 }
push $N6adc5400
 Blur {
  size {{Blur6.size*2} {Blur6.size*2}}
  crop false
  name Blur7
  xpos 1900
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,7)}}
  name Multiply7
  xpos 1900
  ypos 528
 }
 Dot {
  name Dot17
  tile_color 0x7aa9ff00
  xpos 1934
  ypos 718
 }
push $N6adc5000
 Blur {
  size {{Blur5.size*2} {Blur5.size*2}}
  crop false
  name Blur6
  xpos 1634
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,6)}}
  name Multiply6
  xpos 1634
  ypos 528
 }
 Dot {
  name Dot16
  tile_color 0x7aa9ff00
  xpos 1668
  ypos 692
 }
push $N6adc4c00
 Blur {
  size {{Blur4.size*2} {Blur4.size*2}}
  crop false
  name Blur5
  xpos 1368
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,5)}}
  name Multiply5
  xpos 1368
  ypos 524
 }
 Dot {
  name Dot15
  tile_color 0x7aa9ff00
  xpos 1402
  ypos 666
 }
push $N6adc4800
 Blur {
  size {{Blur3.size*2} {Blur3.size*2}}
  crop false
  name Blur4
  xpos 1102
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,4)}}
  name Multiply4
  xpos 1102
  ypos 518
 }
 Dot {
  name Dot14
  tile_color 0x7aa9ff00
  xpos 1136
  ypos 640
 }
push $N6adc4400
 Blur {
  size {{Blur2.size*2} {Blur2.size*2}}
  crop false
  name Blur3
  xpos 836
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,3)}}
  name Multiply3
  xpos 836
  ypos 509
 }
 Dot {
  name Dot13
  tile_color 0x7aa9ff00
  xpos 870
  ypos 614
 }
push $N6adc4000
 Blur {
  size {{Blur1.size*2} {Blur1.size*2}}
  crop false
  name Blur2
  xpos 570
  ypos 440
 }
 Multiply {
  value {{pow(CTRL.falloff,2)}}
  name Multiply2
  xpos 570
  ypos 508
 }
 Dot {
  name Dot12
  tile_color 0x7aa9ff00
  xpos 604
  ypos 588
 }
push $N8ed17c00
 Blur {
  size {{CTRL.size*2} {CTRL.size*2}}
  crop false
  name Blur1
  xpos 304
  ypos 440
 }
 Multiply {
  value {{CTRL.falloff}}
  name Multiply1
  xpos 304
  ypos 512
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge1
  xpos 304
  ypos 584
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos 304
  ypos 610
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge3
  xpos 304
  ypos 636
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge4
  xpos 304
  ypos 662
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge5
  xpos 304
  ypos 688
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge6
  xpos 304
  ypos 714
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge7
  xpos 304
  ypos 740
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge8
  xpos 304
  ypos 766
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge9
  xpos 304
  ypos 792
 }
 Dot {
  name Dot21
  tile_color 0x4b5ec600
  xpos 338
  ypos 928
 }
set N6ccf5c00 [stack 0]
 Dot {
  name Dot22
  tile_color 0x4b5ec600
  xpos 498
  ypos 928
 }
 Grade {
  whitepoint {{CTRL.core}}
  white_clamp true
  name Grade2
  xpos 464
  ypos 977
 }
 Gamma {
  channels rgb
  value {{parent.falloff_color.r/CTRL.falloff_length} {parent.falloff_color.g/CTRL.falloff_length} {parent.falloff_color.b/CTRL.falloff_length} {curve}}
  name Gamma1
  xpos 464
  ypos 1037
 }
 Grade {
  whitepoint {{CTRL.core}}
  reverse true
  name Grade3
  xpos 464
  ypos 1082
 }
push $N6ccf5c00
 Clamp {
  minimum {{CTRL.core}}
  maximum_enable false
  name Clamp1
  xpos 304
  ypos 972
 }
 Grade {
  add {{1-CTRL.core}}
  name Grade4
  xpos 304
  ypos 1020
 }
 Gamma {
  channels rgb
  value {{1+(1-parent.core_color.r)/CTRL.core_length} {1+(1-parent.core_color.g)/CTRL.core_length} {1+(1-parent.core_color.b)/CTRL.core_length} {curve}}
  name Gamma2
  xpos 304
  ypos 1061
 }
 Add {
  channels rgb
  value -1
  name Add1
  xpos 304
  ypos 1087
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge10
  xpos 304
  ypos 1157
 }
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 304
  ypos 1183
 }
 Multiply {
  value {{parent.mix}}
  name mix
  xpos 304
  ypos 1217
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge11
  xpos 304
  ypos 1270
  disable {{parent.glow_only}}
 }
 Dot {
  name Dot23
  tile_color 0x4b5ec600
  xpos 338
  ypos 1436
 }
push $N217ff800
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  name Copy1
  xpos 0
  ypos 1414
 }
 Crop {
  box {{-width*(parent.overscan/100)/2} {-height*(parent.overscan/100)/2} {width+(width*(parent.overscan/100)/2)} {height+(height*(parent.overscan/100)/2)}}
  crop false
  name Crop2
  xpos 0
  ypos 1495
  disable {{!parent.crop}}
 }
 Output {
  name Output1
  xpos 0
  ypos 1543
 }
end_group
Crop {
 box {0 0 2048 858}
 name Crop1
 xpos 4848
 ypos 16526
}
Group {
 name apChroma
 help "Advanced chromatic drift gizmo, that works through a sub-frame blend of different values on an STMap and Transform, while creating a color spectrum.\n\napChroma v1.1\nadrianpueyo.com"
 knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\nkn = k.name()\nif kn == \"monochrome\":\n    k.setValue(min(1,max(0,k.value())))\nelif kn == \"output_dist_matte\":\n    n.knob(\"output_matte_channel\").setEnabled(k.value())"
 tile_color 0x736efdff
 xpos 4848
 ypos 16591
 addUserKnob {20 apChroma}
 addUserKnob {26 text l "<b> Transform"}
 addUserKnob {41 translate T Transform17.translate}
 addUserKnob {41 rotate T Transform17.rotate}
 addUserKnob {41 scale T Transform17.scale}
 addUserKnob {41 center T Transform17.center}
 addUserKnob {22 center_on_input l "center on input" -STARTLINE T "n = nuke.thisNode()\ntry:\n    ni = n.input(0)\n    n\[\"center\"].setValue(\[ni.width()/2,ni.height()/2])\nexcept:\n    pass"}
 addUserKnob {7 smooth l "smooth<i style=\"color:#888\"></i>" t "Helps keep a lower sample number for large distortions by adding motion blur. The higher this value, the higher the motion blur quality.\n\nFor typical aberrations this won't be needed, so better avoid smoothing when possible by keeping it 0, as it is super heavy to compute!"}
 addUserKnob {41 invert_matrix l invert T Transform17.invert_matrix}
 addUserKnob {6 black_outside l "black outside" t "When disabled, the edges of your image will be extended in the aberration instead of seeing black entering through the first frequencies." -STARTLINE}
 addUserKnob {22 create_uv_map l " Create UV Map " T "n = nuke.thisNode()\nn.end()\nns = nuke.selectedNodes()\n\[i.setSelected(False) for i in ns]\nuv = nuke.nodes.Expression()\nuv.setXYpos(n.xpos()+140, n.ypos()-100)\nuv.setSelected(True)\nuv\[\"expr0\"].setValue(\"(x+0.5)/width\")\nuv\[\"expr1\"].setValue(\"(y+0.5)/height\")\nn.setInput(1,uv)\nd = nuke.createNode(\"Dot\")\nd.hideControlPanel()\nd.setYpos(int(n.ypos()+n.screenHeight()/2 - d.screenHeight()/2))\nuv.setSelected(False)\nd.setSelected(False)\n\[i.setSelected(True) for i in ns]" +STARTLINE}
 addUserKnob {26 breathe l "" +STARTLINE T " "}
 addUserKnob {26 text_1 l "<b> Settings"}
 addUserKnob {3 samples}
 samples 10
 addUserKnob {7 ab l aberration t "This drives the amount of color aberration.\n0 = No aberration at all, works as regular STMap.\n1 = Amount of aberration equal to the values of the input UV Map." R 0 2}
 ab 1
 addUserKnob {7 compensate t "Inverse the values of the distortion map so that the overall effect stays at the same position." R -1 1}
 compensate 1
 addUserKnob {7 monochrome t "With the same amount of \"color leak\", this desaturates the spectrum in that leak.\nAt value 1, the effect is similar to a directional blur."}
 addUserKnob {14 overscan R 0 100}
 addUserKnob {6 invert_spectrum l "invert spectrum" +STARTLINE}
 addUserKnob {6 calculate_multi_alpha l "calculate per-channel alpha" t "Also generates a channel layer called apChroma wich includes the transformed alphas for each of the rgba channels. This is necessary if you want to merge the result of this node onto a background. You'll need apChromaMerge or a similar gizmo in order to perform the special merge." -STARTLINE}
 calculate_multi_alpha true
 addUserKnob {6 output_dist_matte l "output distortion matte" t "Useful if you want to add a grading or iBlur afterwards, driven by the amount of chromatic aberration." +STARTLINE}
 addUserKnob {41 output_matte_channel l "" -STARTLINE T CopyAlpha.to0}
 addUserKnob {26 breathe3 l "" +STARTLINE T " "}
 addUserKnob {26 ""}
 addUserKnob {41 maskChannelMask l "mask " T MergeRGB.maskChannelMask}
 addUserKnob {41 inject -STARTLINE T MergeRGB.inject}
 addUserKnob {41 invert_mask l invert -STARTLINE T MergeRGB.invert_mask}
 addUserKnob {41 fringe -STARTLINE T MergeRGB.fringe}
 addUserKnob {41 mix T MergeRGB.mix}
 addUserKnob {26 version_author l "" t "apChroma v1.1\n2016-2019" +STARTLINE T "<span style=\"color:#666\"><br/><b>apChroma v1.1</b> - <a href=\"http://www.adrianpueyo.com\" style=\"color:#666;text-decoration: none;\">adrianpueyo.com</a>, 2016-2019</span>"}
 addUserKnob {20 Spectrum}
 addUserKnob {41 lut l "" +STARTLINE T CLP.lut}
 addUserKnob {22 lutPrepare l INVISIBLE +INVISIBLE T "n = nuke.thisNode()\ntry:\n    n.knob(\"lut\").delCurve(\"master\")\n    n.knob(\"lut\").delCurve(\"alpha\")\nexcept:\n    pass" +STARTLINE}
 addUserKnob {52 lutPrepareGo T "nuke.thisNode()\[\"lutPrepare\"].execute()" +STARTLINE}
}
 ColorLookup {
  inputs 0
  use_precomputed false
  lut {red {curve C 0 s0 x0.3128865659 1 s-0 v0.7904256582 x0.7806204557 -0.0007482314769 s0 u1.743535638 v1.742119074 x0.9418143034 0.06970721483 s-0.05000000075 x1 0 s0}
    green {curve C x0.1143286526 0 s0.01999999955 v1.837088585 x0.530087471 1 s-0.05000000075 u1.36422956 v1.120811939 x0.9743717909 0 s-0 u2.045060158}
    blue {curve C x0.6321670413 0 s0 x0.8160832524 0.99800843 s0 x1 0 s0}}
  name CLP
  label "Natural Spectrum"
  xpos 137
  ypos -191
 }
 Input {
  inputs 0
  name Inputmask
  xpos -498
  ypos 449
  number 2
 }
 Dot {
  name Dot25
  note_font_size 41
  xpos -464
  ypos 494
 }
set N8606ac00 [stack 0]
 Dot {
  name Dot21
  xpos -464
  ypos 532
 }
set N8606b000 [stack 0]
 Dot {
  name Dot24
  note_font_size 41
  xpos -464
  ypos 576
 }
 Input {
  inputs 0
  name Inputimg
  xpos -388
  ypos -554
 }
 NoTimeBlur {
  rounding none
  name NoTB
  xpos -388
  ypos -528
 }
 AdjBBox {
  numpixels {{parent.overscan} {parent.overscan}}
  name AdjBBox
  xpos -388
  ypos -502
 }
set N64256000 [stack 0]
 Dot {
  name Dot1
  xpos -47
  ypos -498
 }
set N64256400 [stack 0]
 Expression {
  expr0 (x+0.5)/width
  expr1 (y+0.5)/height
  expr2 0
  name ExpressionUVDefault
  xpos 118
  ypos -502
 }
 Input {
  inputs 0
  name Inputuv
  xpos 279
  ypos -558
  number 1
 }
 Switch {
  inputs 2
  which 1
  name SwitchUV
  xpos 279
  ypos -502
  disable {{"\[exists parent.input1]"}}
 }
 NoTimeBlur {
  rounding none
  name NoTB1
  xpos 279
  ypos -476
 }
 Dot {
  name Dot3
  note_font_size 41
  xpos 313
  ypos -275
 }
set N64257800 [stack 0]
 Dot {
  name Dot11
  note_font_size 41
  xpos 447
  ypos -275
 }
 Remove {
  name Remove1
  xpos 413
  ypos -257
 }
 Expression {
  expr0 (x+0.5)/width
  expr1 (y+0.5)/height
  expr2 0
  expr3 0
  name ExpressionUV
  xpos 413
  ypos -219
 }
 Dot {
  name Dot13
  note_font_size 41
  xpos 447
  ypos -183
 }
set Naa70a800 [stack 0]
 Dot {
  name Dot15
  note_font_size 41
  xpos 690
  ypos -183
 }
set Naa70ac00 [stack 0]
 Multiply {
  channels {rgba.red rgba.green -rgba.blue none}
  value {{1-parent.ab} {1-parent.ab} 1 1}
  name Multiply6
  xpos 656
  ypos -98
 }
 Dot {
  name Dot16
  xpos 690
  ypos -38
 }
push $N64257800
 Dot {
  name Dot27
  note_font_size 41
  xpos 214
  ypos -275
 }
 Dot {
  name Dot5
  note_font_size 41
  xpos 214
  ypos -233
 }
push $N64257800
 Merge2 {
  inputs 2
  operation copy
  name Merge3
  xpos 279
  ypos -237
 }
 Dot {
  name Dot8
  note_font_size 41
  xpos 313
  ypos -164
 }
set Ne9680400 [stack 0]
 Dot {
  name Dot14
  note_font_size 41
  xpos 600
  ypos -164
 }
 Multiply {
  channels {rgba.red rgba.green -rgba.blue none}
  value {{parent.ab} {parent.ab} 0 0}
  name Multiply5
  xpos 566
  ypos -98
 }
 Merge2 {
  inputs 2
  operation plus
  bbox B
  output rgb
  name Merge4
  xpos 566
  ypos -42
 }
 Transform {
  scale 1.0015
  center {1024 576}
  motionblur {{parent.smooth}}
  shutter {{1/parent.samples}}
  shutteroffset centred
  name Transform17
  label control
  xpos 566
 }
set Ne9681400 [stack 0]
push $Naa70ac00
 Dot {
  name Dot18
  note_font_size 41
  xpos 831
  ypos -183
 }
 CopyBBox {
  inputs 2
  name CopyBBox1
  xpos 797
  ypos 6
 }
 Dot {
  name Dot19
  xpos 831
  ypos 77
 }
push $Ne9681400
 Merge2 {
  inputs 2
  operation difference
  bbox B
  name Merge5
  xpos 566
  ypos 73
 }
 Expression {
  expr3 sqrt(pow2(r)+pow2(g))
  name ExpressionDiff
  xpos 566
  ypos 99
 }
 Dot {
  name Dot9
  xpos 600
  ypos 376
 }
push $N64256400
 Dot {
  name Dot2
  note_font_size 41
  xpos -47
  ypos -436
 }
set N32f6b000 [stack 0]
 Dot {
  name Dot17
  note_font_size 41
  xpos 31
  ypos -436
 }
 Dot {
  name Dot26
  note_font_size 41
  xpos 31
  ypos -347
 }
push $N32f6b000
add_layer {apChroma apChroma.red apChroma.green apChroma.blue apChroma.alpha}
 Shuffle {
  alpha white
  black alpha
  white alpha
  red2 alpha
  out2 {apChroma.red apChroma.green apChroma.blue -apChroma.alpha}
  name ShuffleAlpha1
  xpos -81
  ypos -401
 }
 Merge2 {
  inputs 2
  operation copy
  Bchannels none
  name MergeGetChroma
  xpos -81
  ypos -351
  disable {{"\[\nif \{ \[lsearch -exact \[channels \[input this 1]] \[lindex \[channels MergeChosen] 0]] >= 0\} \{\n    return 0\n\} else \{\n    return 1\n\}\n]"}}
 }
 Remove {
  channels apChroma
  name Remove_apChroma
  xpos -81
  ypos -278
  disable {{parent.calculate_multi_alpha}}
 }
add_layer {apChromaWeight apChromaWeight.red apChromaWeight.green apChromaWeight.blue apChromaWeight.alpha}
 AddChannels {
  channels apChromaWeight
  color 1
  name AddChannels1
  xpos -81
  ypos -240
 }
 Multiply {
  value {{!parent.invert_spectrum?CL.lut.red(TB.frf):CL.lut.red(1-TB.frf)} {!parent.invert_spectrum?CL.lut.green(TB.frf):CL.lut.green(1-TB.frf)} {!parent.invert_spectrum?CL.lut.blue(TB.frf):CL.lut.blue(1-TB.frf)} {!parent.invert_spectrum?CL.lut.red(TB.frf):CL.lut.red(1-TB.frf)}}
  name Multiply1
  xpos -81
  ypos -189
  addUserKnob {20 User}
  addUserKnob {19 fullcolor}
  fullcolor {{!parent.invert_spectrum?CLP.lut.red(TB.frf):CLP.lut.red(1-TB.frf)} {!parent.invert_spectrum?CLP.lut.green(TB.frf):CLP.lut.green(1-TB.frf)} {!parent.invert_spectrum?CLP.lut.blue(TB.frf):CLP.lut.blue(1-TB.frf)} {!parent.invert_spectrum?CLP.lut.red(TB.frf):CLP.lut.red(1-TB.frf)}}
  addUserKnob {6 fullcolor_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 fullcolor_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 fullcolor_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 fullcolor_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 fullcolor_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 fullcolor_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 fullcolor_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 fullcolor_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 Dot {
  name Dot6
  note_font_size 41
  xpos -47
  ypos -141
 }
set Ne7019000 [stack 0]
 Dot {
  name Dot7
  note_font_size 41
  xpos -139
  ypos -141
 }
 Dot {
  name Dot10
  note_font_size 41
  xpos -139
  ypos 90
 }
push $Ne9680400
 Multiply {
  channels {rgba.red rgba.green -rgba.blue none}
  value {{"(TB.frf-.5)*parent.ab + 0.5*(1-parent.compensate)"} {"(TB.frf-.5)*parent.ab + 0.5*(1-parent.compensate)"} 0 0}
  name Multiply3
  xpos 279
  ypos -146
 }
 Dot {
  name Dot12
  note_font_size 41
  xpos 313
  ypos -108
 }
push $Naa70a800
 Multiply {
  channels {rgba.red rgba.green -rgba.blue none}
  value {{"(1- ((TB.frf-.5)*parent.ab + 0.5*(1-parent.compensate)) )" i} {"(1- ((TB.frf-.5)*parent.ab + 0.5*(1-parent.compensate)) )" i} 1 1}
  name Multiply4
  xpos 413
  ypos -145
 }
 Merge2 {
  inputs 2
  operation plus
  Achannels {rgba.red rgba.green -rgba.blue -rgba.alpha}
  Bchannels {rgba.red rgba.green -rgba.blue -rgba.alpha}
  output {rgba.red rgba.green -rgba.blue -rgba.alpha}
  name Merge1
  xpos 413
  ypos -112
 }
 Dot {
  name Dot4
  xpos 447
  ypos 43
 }
push $Ne7019000
 Remove {
  channels apChromaWeight
  name Remove3
  xpos -81
  ypos -104
 }
 Transform {
  translate {{"parent.Transform17.translate*((TB.frf-0.5)*parent.ab+ 0.5*(1-parent.compensate))"} {"parent.Transform17.translate*((TB.frf-0.5)*parent.ab+ 0.5*(1-parent.compensate))"}}
  rotate {{"parent.Transform17.rotate*((TB.frf-0.5)*parent.ab+ 0.5*(1-parent.compensate))"}}
  scale {{"parent.Transform17.scale*((TB.frf-0.5)*parent.ab+ 0.5*(1-parent.compensate)) + 1 - ((TB.frf-0.5)*parent.ab+ 0.5*(1-parent.compensate)) "} {"parent.Transform17.scale*((TB.frf-0.5)*parent.ab+ 0.5*(1-parent.compensate)) + 1 - ((TB.frf-0.5)*parent.ab+ 0.5*(1-parent.compensate)) "}}
  center {{parent.Transform17.center} {parent.Transform17.center}}
  invert_matrix {{parent.Transform17.invert_matrix}}
  black_outside {{parent.black_outside}}
  motionblur {{parent.smooth}}
  shutter {{1/parent.samples}}
  name TransformI
  xpos -81
  ypos -66
 }
 Blur {
  channels rgba
  name Blur1
  xpos -81
  ypos -40
  addUserKnob {20 User}
  addUserKnob {26 info l "" +STARTLINE T "needed to break concatenation and make sure mblur works with the stmaps"}
 }
 STMap {
  inputs 2
  uv rgb
  blur_scale 0
  name STMap1
  xpos -81
  ypos 33
  disable {{"!\[exists parent.input1]"}}
 }
 Copy {
  inputs 2
  channels apChromaWeight
  name Copy2
  xpos -81
  ypos 74
 }
 TimeBlur {
  divisions {{parent.samples}}
  shutter 1
  shutteroffset start
  shuttercustomoffset 0
  name TB
  xpos -81
  ypos 124
  addUserKnob {20 User}
  addUserKnob {7 frf}
  frf {{(frame%1)*(parent.samples+1)/parent.samples}}
 }
set N957d2400 [stack 0]
push $N957d2400
 Shuffle {
  in apChromaWeight
  name Shuffle2
  label "\[value in]"
  xpos 89
  ypos 118
 }
set N957d2800 [stack 0]
 Merge2 {
  inputs 2
  operation divide
  bbox A
  metainput A
  rangeinput A
  Achannels apChroma
  output apChroma
  name Merge6
  xpos 89
  ypos 227
 }
push $N957d2400
push $N957d2800
 Merge2 {
  inputs 2
  operation divide
  bbox A
  metainput A
  rangeinput A
  name Merge2
  xpos -81
  ypos 195
 }
 Copy {
  inputs 2
  channels apChroma
  name Copy3
  xpos -81
  ypos 221
 }
 Copy {
  inputs 2
  from0 rgba.alpha
  to0 apChroma.alpha
  from1 rgba.alpha
  to1 rgba.alpha
  bbox B
  name Copy1
  xpos -81
  ypos 360
 }
 Dot {
  name Dot22
  note_font_size 41
  xpos -47
  ypos 494
 }
set N957d3c00 [stack 0]
 Dot {
  name Dot20
  xpos -47
  ypos 532
 }
set N782e6000 [stack 0]
 Dot {
  name Dot23
  note_font_size 41
  xpos -47
  ypos 576
 }
push $N8606b000
push $N782e6000
push $N8606ac00
push $N957d3c00
push $N64256000
 Merge2 {
  inputs 2+1
  operation copy
  Achannels rgb
  Bchannels rgb
  output rgb
  also_merge apChroma
  name MergeRGB
  xpos -388
  ypos 490
 }
 Copy {
  inputs 2+1
  channels apChroma
  inject {{parent.MergeRGB.inject}}
  invert_mask {{parent.MergeRGB.invert_mask}}
  fringe {{parent.MergeRGB.fringe}}
  mix {{parent.MergeRGB.mix}}
  name Copy_apChroma
  xpos -388
  ypos 516
  disable {{!parent.calculate_multi_alpha}}
 }
 Copy {
  inputs 2+1
  from0 rgba.alpha
  to0 rgba.alpha
  name CopyAlpha
  xpos -388
  ypos 566
  disable {{!parent.output_dist_matte}}
 }
 Output {
  name Output
  xpos -388
  ypos 604
 }
 ColorLookup {
  inputs 0
  channels rgb
  lut {master {}
    red {"CLP.lut.red * (1-parent.monochrome) + parent.monochrome" C 0 1}
    green {"CLP.lut.green * (1-parent.monochrome) + parent.monochrome" C 0 1}
    blue {"CLP.lut.blue * (1-parent.monochrome) + parent.monochrome" C 0 1}
    alpha {"CLP.lut.alpha * (1-parent.monochrome) + parent.monochrome" C 0 1}}
  name CL
  label monochrome
  xpos 27
  ypos -149
 }
 Merge2 {
  inputs 0
  operation copy
  Bchannels none
  name MergeChosen
  xpos -209
  ypos -351
  hide_input true
 }
end_group
Group {
 name AlexaGrain
 label "ISO \[value ISO]\n\[value GrainSample]"
 xpos 4848
 ypos 16658
 addUserKnob {20 Basic}
 addUserKnob {4 GrainSample l "Grain Sample" t "Alexa 65:\n6560 x 3100 - 6.5k (65)\n\nAlexa LF:\n4480 x 3096 - 4.5k (LF)\n3840 x 2160 - UHD (LF)\n\nAlexa SXT:\n4096 x 2636 - 3.4k (XT)\n3840 x 2160 - 3.2k (XT)\n3424 x 2202 - 3.4k (XT)\n3200 x 1800 - 3.2k (XT)\n2880 x 1620 - 2.8k (XT)\n2048 x 1152 - 2.8k (XT)\n1920 x 1080 - 2.8k (XT)  " M {InputRes "6.5k (65)" "4.5k (LF)" "UHD (LF)" "3.4k (XT)" "3.2k (XT)" "2.8k (XT)" "" "" "" "" "" "" ""}}
 GrainSample "3.2k (XT)"
 addUserKnob {6 ResizetoInput l "Resize to input" -STARTLINE}
 ResizetoInput true
 addUserKnob {4 ISO l "ISO Sensitivity" M {160 200 250 320 400 500 640 "800 (native)" 1000 1280 1600 2000 2560 3200 "" "" "" "" "" "" "" ""}}
 ISO "800 (native)"
 addUserKnob {3 Seed l "Grain Seed"}
 addUserKnob {26 ""}
 addUserKnob {18 Overall_Amount l "Overall Amount"}
 Overall_Amount 0.5
 addUserKnob {6 Overall_Amount_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Overall_Amount_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {26 ""}
 addUserKnob {18 DeepBlacks l "Deep Blacks"}
 DeepBlacks {1 1 1}
 addUserKnob {6 DeepBlacks_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 BlacksLow l "Blacks Low"}
 BlacksLow 0.10022474
 addUserKnob {7 BlacksHigh l "Blacks High"}
 BlacksHigh 0.28105982
 addUserKnob {6 DeepBlacks_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 ViewBlacks l "View Blacks" +STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {18 Whites}
 Whites {1 1 1}
 addUserKnob {6 Whites_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 Whites_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 WhitesLow l "Whites Low"}
 WhitesLow 0.36362718
 addUserKnob {7 WhitesHigh l "Whites High"}
 WhitesHigh 0.58147438
 addUserKnob {6 ViewWhites l "View Whites" +STARTLINE}
 addUserKnob {6 Whites_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {26 ""}
 addUserKnob {20 Sharpness n 1}
 addUserKnob {7 RSharp l "Red Sharpness"}
 RSharp 0.25
 addUserKnob {7 GSharp l "Green Sharpness"}
 GSharp 0.25
 addUserKnob {7 BSharp l "Blue Sharpness"}
 BSharp 0.1
 addUserKnob {20 endGroup n -1}
 addUserKnob {20 Softness n 1}
 Softness 0
 addUserKnob {7 RSoft l "Red Softness"}
 addUserKnob {7 GSoft l "Green Softness"}
 addUserKnob {7 BSoft l "Blue Softness"}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {20 Size n 1}
 Size 0
 addUserKnob {7 LSize l "Luma Size" R 0.5 1.5}
 LSize 1
 addUserKnob {7 RSize l "Red Size" R 0.5 1.5}
 RSize 1
 addUserKnob {7 GSize l "Green Size" R 0.5 1.5}
 GSize 1
 addUserKnob {7 BSize l "Blue SIze" R 0.5 1.5}
 BSize 1
 addUserKnob {20 endGroup_2 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {26 INFO l "" +STARTLINE T "(c) Riley Gray 2020 - v1.1"}
 addUserKnob {20 Response}
 addUserKnob {41 lut l "" -STARTLINE T Film_Response.lut}
 addUserKnob {26 ResponseInfo l "" +STARTLINE T "\nThe above response curve was made at an iso setting of 800 (native). Changing the iso setting in this tool actually \nchanges the exposure of the plate up or down, then applies the response curve, then re applys the exposure \nchange to balance for middle grey (what the alexa actually does when you change iso). Therefore, if you wish to \nchange the response curve do it at iso 800 or look at the exposed up or down plate in the tool while sampling.  "}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0x388e8e00
  label "Sharpness\nSoftness"
  note_font_size 42
  xpos -527
  ypos -419
  bdwidth 572
  bdheight 266
 }
 BackdropNode {
  inputs 0
  name BackdropNode2
  tile_color 0x71c67100
  label "Response \nISO"
  note_font_size 42
  xpos -527
  ypos -134
  bdwidth 577
  bdheight 257
 }
 BackdropNode {
  inputs 0
  name BackdropNode3
  tile_color 0x8e8e3800
  label "Whites\nBlacks"
  note_font_size 42
  xpos -526
  ypos 147
  bdwidth 583
  bdheight 313
 }
 BackdropNode {
  inputs 0
  name BackdropNode4
  tile_color 0x7d7164ff
  label VIEWS
  note_font_size 42
  xpos -39
  ypos 647
  bdwidth 326
  bdheight 268
 }
 Input {
  inputs 0
  name Input1
  xpos 509
  ypos -1177
 }
 Dot {
  name Dot74
  label PLATE
  note_font_size 24
  xpos 543
  ypos -1006
 }
 Dot {
  name Dot72
  xpos 543
  ypos -64
 }
set N20e8d800 [stack 0]
 Dot {
  name Dot1
  xpos 543
  ypos 211
 }
set N20e8dc00 [stack 0]
 Colorspace {
  colorspace_out AlexaV3LogC
  name Colorspace1
  xpos 295
  ypos 208
 }
 Dot {
  name Dot9
  xpos 177
  ypos 211
 }
set N6ab68400 [stack 0]
 Dot {
  name Dot2
  xpos 177
  ypos 374
 }
 Keyer {
  invert true
  operation "luminance key"
  range {{parent.BlacksLow} {parent.BlacksHigh} 1 1}
  name Keyer1
  xpos -74
  ypos 365
 }
set N6ab68c00 [stack 0]
 Dot {
  name Dot5
  xpos 115
  ypos 727
  hide_input true
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Whites
  xpos 81
  ypos 768
 }
set N6ab69400 [stack 0]
 Dot {
  name Dot8
  xpos 5
  ypos 771
 }
push $N6ab68400
 Keyer {
  operation "luminance key"
  range {{parent.WhitesLow} {parent.WhitesHigh} 1 1}
  name Keyer2
  xpos -74
  ypos 202
 }
set N6ab69c00 [stack 0]
 Dot {
  name Dot4
  xpos 231
  ypos 728
  hide_input true
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Blacks
  xpos 197
  ypos 767
 }
 Dot {
  name Dot3
  xpos 231
  ypos 808
 }
set N84cec800 [stack 0]
 ContactSheet {
  inputs 2
  width {{Dot74.width}}
  height {{Dot74.width/2}}
  rows 1
  columns 2
  center true
  name ContactSheet1
  xpos -29
  ypos 805
 }
 Dot {
  name Dot6
  xpos 5
  ypos 890
 }
push $N6ab69400
 Dot {
  name Dot7
  xpos 115
  ypos 844
 }
push $N84cec800
 Switch {
  inputs 2
  which {{"parent.ViewBlacks == 1? 1:0"}}
  name Switch2
  xpos 197
  ypos 841
 }
 Switch {
  inputs 2
  which {{"parent.ViewWhites + parent.ViewBlacks == 2? 1:0 "}}
  name Switch3
  xpos 197
  ypos 887
 }
push $N6ab68c00
push $N6ab69c00
push $N20e8d800
 EXPTool {
  mode Stops
  gang false
  red {{(ISO==0?-2.333333333:ISO==1?-2:ISO==2?-1.6:ISO==3?-1.3:ISO==4?-1:ISO==5?-.6:ISO==6?-.3:ISO==7?0:ISO==8?.3:ISO==9?.6:ISO==10?1:ISO==11?1.3:ISO==12?1.6:2)/-1}}
  green {{red}}
  blue {{red}}
  name Exposure
  label Compensation
  xpos -78
  ypos -73
 }
 ColorLookup {
  channels rgb
  lut {master {}
    red {curve C x0.002999480115 0.1362445652 x0.1373360008 0.4889034033 s2 v0.7107599974 x1 1.239727497 s0.4499999881}
    green {curve C 0.110607639 x0.135157004 0.5191542506 s1.5 x1 1.144214392 s0.400000006}
    blue {curve C 0.1032338738 x0.1281179935 0.3248756528 x1 1}
    alpha {}}
  name Film_Response
  xpos -78
  ypos -23
 }
 EXPTool {
  mode Stops
  gang false
  red {{ISO==0?-2.333333333:ISO==1?-2:ISO==2?-1.6:ISO==3?-1.3:ISO==4?-1:ISO==5?-.6:ISO==6?-.3:ISO==7?0:ISO==8?.3:ISO==9?.6:ISO==10?1:ISO==11?1.3:ISO==12?1.6:2}}
  green {{red}}
  blue {{red}}
  name ISO_Exposure
  xpos -78
  ypos 13
 }
 Reformat {
  inputs 0
  type "to box"
  box_width {{"GrainSample == 0? Dot74.width:GrainSample == 1?6560 : GrainSample == 2? 4448: GrainSample == 3? 3840: GrainSample == 4? 3424: GrainSample == 5? 3200: 2880"}}
  box_height {{"(box_width/ (Dot74.width/Dot74.height))"}}
  box_fixed true
  name SensorSize
  xpos -204
  ypos -1016
 }
 Dot {
  name Dot13
  xpos -170
  ypos -911
 }
set N68847400 [stack 0]
 Dot {
  name Dot14
  xpos -45
  ypos -911
 }
set N68847800 [stack 0]
 Dot {
  name Dot15
  xpos 81
  ypos -911
 }
set N68847c00 [stack 0]
 Dot {
  name Dot16
  xpos 214
  ypos -911
 }
 Noise {
  output {-rgba.red -rgba.green rgba.blue -rgba.alpha}
  size {{"parent.BSize *8"}}
  zoffset {{"parent.LNoise2.zoffset +100"}}
  gain 1
  gamma 1
  center {1024 778}
  name bNoise3
  selected true
  xpos 180
  ypos -863
 }
 Add {
  channels rgb
  value -0.5
  name Add7
  xpos 180
  ypos -810
 }
 Multiply {
  channels rgb
  value 0.022
  name Multiply8
  xpos 180
  ypos -786
 }
push $N68847c00
 Noise {
  output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
  size {{"parent.GSize *4"}}
  zoffset {{"parent.LNoise2.zoffset +10"}}
  gain 1
  gamma 0.998
  center {1024 778}
  name gNoise1
  xpos 47
  ypos -861
 }
 Add {
  channels rgb
  value -0.5
  name Add6
  xpos 47
  ypos -812
 }
 Multiply {
  channels rgb
  value 0.01
  name Multiply7
  xpos 47
  ypos -788
 }
push 0
push $N68847800
 Noise {
  output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
  size {{parent.RSize*6.5}}
  zoffset {{parent.LNoise2.zoffset}}
  gain 1
  gamma 1
  center {1024 778}
  name rNoise2
  xpos -79
  ypos -862
 }
 Add {
  channels rgb
  value -0.5
  name Add5
  xpos -79
  ypos -810
 }
 Multiply {
  channels rgb
  value 0.03
  name Multiply6
  xpos -79
  ypos -786
 }
push $N68847400
 Noise {
  output {rgba.red rgba.green rgba.blue -rgba.alpha}
  size {{parent.LSize*2}}
  zoffset {{"parent.Seed + frame"}}
  gain 1
  gamma 0.998
  center {1024 778}
  name LNoise2
  xpos -204
  ypos -862
 }
 Add {
  channels rgb
  value -0.5
  name Add4
  xpos -204
  ypos -811
 }
 Multiply {
  channels rgb
  value 0.035
  name Multiply5
  xpos -204
  ypos -787
 }
 Merge2 {
  inputs 4+1
  operation plus
  name Merge7
  xpos -204
  ypos -687
 }
 Multiply {
  channels rgb
  value {1.6 2 3 1}
  name Multiply1
  xpos -204
  ypos -644
 }
 Colorspace {
  colorspace_out AlexaV3LogC
  name Colorspace3
  xpos -204
  ypos -535
 }
 Reformat {
  type "to box"
  box_width {{Dot74.width}}
  box_height {{Dot74.height}}
  box_fixed true
  filter Lanczos6
  name Reformat1
  xpos -204
  ypos -511
  disable {{1-parent.ResizetoInput}}
 }
 Colorspace {
  colorspace_in AlexaV3LogC
  name Colorspace2
  xpos -204
  ypos -487
 }
 Sharpen {
  channels {rgba.red -rgba.green -rgba.blue none}
  amount {{parent.RSharp}}
  name RedSharpen2
  xpos -204
  ypos -358
 }
 Sharpen {
  channels {-rgba.red rgba.green -rgba.blue none}
  amount {{parent.GSharp}}
  name GreenSharpen
  xpos -204
  ypos -334
 }
 Sharpen {
  channels {-rgba.red -rgba.green rgba.blue none}
  amount {{parent.BSharp}}
  name BlueSharpen
  xpos -204
  ypos -310
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{parent.RSoft}}
  name RedBlur
  xpos -204
  ypos -252
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{parent.GSoft}}
  name GreenBlur
  xpos -204
  ypos -228
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{parent.BSoft}}
  name BlueBlur
  xpos -204
  ypos -204
 }
 Multiply {
  channels rgb
  value {{parent.Overall_Amount} {parent.Overall_Amount} {parent.Overall_Amount} {parent.Overall_Amount}}
  name Overall
  xpos -204
  ypos -69
 }
 Merge2 {
  inputs 2
  operation multiply
  output rgb
  name Merge58
  xpos -204
  ypos 13
 }
 Multiply {
  inputs 1+1
  channels rgb
  value {{parent.Whites.r} {parent.Whites.g} {parent.Whites.b} 1}
  name WHITES
  xpos -204
  ypos 208
 }
 Multiply {
  inputs 1+1
  channels rgb
  value {{parent.DeepBlacks} {parent.DeepBlacks} {parent.DeepBlacks} 1}
  name BLACKS
  xpos -204
  ypos 371
 }
 Dot {
  name Dot73
  xpos -170
  ypos 548
 }
push $N20e8dc00
 Merge2 {
  inputs 2
  operation plus
  bbox B
  output rgb
  name Merge57
  xpos 509
  ypos 545
 }
 Switch {
  inputs 2
  which {{"clamp(parent.ViewWhites + parent.ViewBlacks) "}}
  name Switch4
  xpos 509
  ypos 887
 }
 Output {
  name Output1
  xpos 509
  ypos 998
 }
end_group
Remove {
 operation keep
 channels rgb
 name Remove9
 xpos 4848
 ypos 17366
}
set N6aedc000 [stack 0]
Dot {
 name Dot85
 xpos 4882
 ypos 17429
}
Write {
 file //192.168.99.203/prj/cinderella/render/ep04/sq18/sh030/comp/exr/ep04_sq18_sh030.%04d.exr
 colorspace scene_linear
 file_type exr
 write_ACES_compliant_EXR true
 first_part rgba
 version 8
 in_colorspace scene_linear
 out_colorspace scene_linear
 name EXR
 xpos 4848
 ypos 17546
}
Read {
 inputs 0
 file_type exr
 file //192.168.99.203/prj/cinderella/render/ep04/sq18/sh030/comp/exr/ep04_sq18_sh030.####.exr
 format "2048 858 0 0 2048 858 1 cinderella"
 last 50
 origlast 50
 origset true
 version 15
 name Read14
 xpos 5098
 ypos 17338
}
ShotInfo {
 name ShotInfo1
 xpos 5098
 ypos 17462
}
Write {
 file //192.168.99.203/prj/cinderella/render/ep04/sq18/sh030/comp/mov/ep04_sq18_sh030_v01.mov
 colorspace color_picking
 file_type mov
 mov64_format "mov (QuickTime / MOV)"
 mov64_codec h264
 mov_h264_codec_profile "High 4:2:0 8-bit"
 mov64_pixel_format {{0} "yuv420p\tYCbCr 4:2:0 8-bit"}
 mov64_quality Custom
 mov64_fast_start true
 mov64_write_timecode true
 mov64_gop_size 12
 mov64_b_frames 0
 mov64_bitrate 28000
 mov64_bitrate_tolerance 0
 mov64_quality_min 1
 mov64_quality_max 3
 checkHashOnRead false
 version 6
 in_colorspace scene_linear
 out_colorspace scene_linear
 name MOV
 xpos 5098
 ypos 17535
}
push $N6aedc000
Dot {
 name Dot79
 xpos 4337
 ypos 17369
}
Mirror2 {
 name Mirror2_1
 xpos 4303
 ypos 17490
}
push $N6ce9bc00
Dot {
 name Dot145
 label _bg_crypto
 note_font " Italic"
 note_font_size 22
 xpos -18
 ypos 10463
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Cryptomatte {
 pickerAdd {0.01886945963 0.05191135406 0.2076454163 0 1048 779 1049 780}
 lastSelectedCryptoLayerName crypto_asset
 name Cryptomatte3
 xpos -52
 ypos 10531
 disable true
}
push $Nea116c00
push $N684f9c00
Dot {
 name Dot115
 label _char_beauty
 note_font " Italic"
 note_font_size 22
 xpos 8993
 ypos -6343
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Merge2 {
 inputs 2
 operation mask
 name Merge48
 xpos 8959
 ypos -6139
}
Dot {
 name Dot116
 xpos 8993
 ypos -6004
}
push $N85b94400
Dot {
 name Dot114
 label _bg_beauty
 note_font " Italic"
 note_font_size 22
 xpos 8669
 ypos -6346
 hide_input true
 addUserKnob {20 User}
 addUserKnob {26 child}
}
Merge2 {
 inputs 2
 name Merge39
 xpos 8635
 ypos -6007
}
Dot {
 name __bg+char
 label "\[value name]"
 note_font_size 33
 xpos 8669
 ypos -5906
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
Read {
 inputs 0
 file_type mov
 file //192.168.99.203/prj/cinderella/render/ep04/sq18/sh030/comp/mov/ep04_sq18_sh030_v01.mov
 format "2048 858 0 0 2048 858 1 cinderella"
 last 50
 origlast 50
 origset true
 version 7
 colorspace color_picking
 name Read5
 xpos 5332
 ypos 17385
}
push $N6aedc000
push $N6b0f5000
Viewer {
 inputs 4
 frame_range 1-50
 input_number 1
 colour_sample_bbox {0.0234375 0.341796875 0.0244140625 0.3427734375}
 samplepoints {{0.0234375 0.341796875}
   }
 viewerProcess "sRGB (ACES)"
 softSelect true
 name Viewer1
 xpos 6386
 ypos 18001
}
NoOp {
 inputs 0
 name NoOp4
 xpos 11081
 ypos -6494
}
Dot {
 name __ref_location
 label "\[value name]"
 note_font_size 33
 xpos 11115
 ypos -6272
 addUserKnob {20 User}
 addUserKnob {26 parent}
}
